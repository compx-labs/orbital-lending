#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 0 1 1000 4 10000 1000000000000
    bytecblock 0x151f7c75 "base_token_id" "math_helper_app_id" "admin_account" "total_deposits" "total_borrows" "contract_state" "accepted_collaterals" "loan_record" "circulating_lst" "active_loan_records" "lst_token_id" "borrow_index_wad" "migration_admin" "last_apr_bps" "cash_on_hand" "fee_pool" "buyout_token_id" "current_accumulated_commission" 0x09ef525f 0xae859f3b "accepted_collaterals_count" "max_apr_bps" "liq_threshold_bps" "base_bps" "total_commission_earned" "total_additional_rewards" 0x00 "ltv_bps" "util_cap_bps" "prev_apr_bps" "last_accrual_ts" "commission_percentage" "flux_oracle_app" "liq_bonus_bps" 0x0000000000000000 "rate_model_type" "kink_norm_bps" "slope1_bps" "slope2_bps" "deposit_record" "origination_fee_bps" "protocol_share_bps" "oracle_app" "ema_alpha_bps" "power_gamma_q16" "scarcity_K_bps" 0x705e070c 0xfa5994d4
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn NumAppArgs
    bz main_after_if_else@41
    pushbytess 0x3b01665e 0x83978db1 0x6ca100cd 0x0d8d4574 0x34b8343e 0xca7a1795 0x17c33662 0x5efce39a 0x5cac25a9 0xe596ac73 0x86a6b1bb 0xc0799344 0xb5e7b73d 0x72c5c57b 0x3e41a49b 0x15a5b25e 0x8553cffa 0xb4a74766 0xae99f45b 0x3dea8a60 0xd217f842 0xc5089c7e 0xd0e69812 0x5f0d6f03 0xc861aedf 0xdaa7f7f2 // method "createApplication(account,uint64)void", method "initApplication(pay,uint64,uint64,uint64,uint64,application,uint64,uint64,application)void", method "setRateParams(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)void", method "setMathHelperApp(uint64)void", method "setContractState(uint64)void", method "setMigrationAdmin(account)void", method "generateLSTToken(pay)void", method "optInToLST(uint64,pay)void", method "configureLSTToken(axfer,uint64)void", method "getOraclePrice(uint64)uint64", method "addNewCollateralType(uint64,uint64,pay,uint64)void", method "addLoanRecordExternal(uint64,uint64,account,uint64)void", method "addDepositRecordExternal(account,uint64,uint64)void", method "depositASA(axfer,uint64,pay)void", method "withdrawDeposit(axfer,uint64,uint64,pay)void", method "borrow(axfer,uint64,uint64,uint64,uint64,pay)void", method "accrueLoanInterest(account,account)void", method "current_apr_bps()uint64", method "getLoanRecord(account)(address,uint64,uint64,(uint64,uint8,uint64),uint64,uint64,uint64)", method "repayLoanASA(axfer,uint64)void", method "withdrawPlatformFees(account,pay)void", method "buyoutSplitASA(account,account,axfer,axfer,uint64,pay)void", method "maxWithdrawableCollateralLST(uint64)uint64", method "withdrawCollateral(uint64,uint64,uint64)void", method "liquidatePartialASA(account,axfer,uint64,uint64)void", method "getLoanStatus(account)(uint64,uint64,uint64,uint64,uint64,bool,bool)"
    bytec 19 // method "getCirculatingLST()uint64"
    bytec 20 // method "getTotalDeposits()uint64"
    pushbytess 0x6c6337c0 0x3172ca9d 0xef0bd27a 0x6e06c709 0x0ac83b5d 0x8e38fca0 0x62d978da // method "getAcceptedCollateralsCount()uint64", method "gas()void", method "calculateCollateralValueUSD(uint64,uint64,uint64)uint64", method "pickupASARewards()void", method "migrateCollateralTokenId(uint64,pay)void", method "migrateContract(pay)(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)", method "acceptMigrationASAContract(axfer,pay,axfer,(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64),account)void"
    txna ApplicationArgs 0
    match main_createApplication_route@3 main_initApplication_route@4 main_setRateParams_route@5 main_setMathHelperApp_route@6 main_setContractState_route@7 main_setMigrationAdmin_route@8 main_generateLSTToken_route@9 main_optInToLST_route@10 main_configureLSTToken_route@11 main_getOraclePrice_route@12 main_addNewCollateralType_route@13 main_addLoanRecordExternal_route@14 main_addDepositRecordExternal_route@15 main_depositASA_route@16 main_withdrawDeposit_route@17 main_borrow_route@18 main_accrueLoanInterest_route@19 main_current_apr_bps_route@20 main_getLoanRecord_route@21 main_repayLoanASA_route@22 main_withdrawPlatformFees_route@23 main_buyoutSplitASA_route@24 main_maxWithdrawableCollateralLST_route@25 main_withdrawCollateral_route@26 main_liquidatePartialASA_route@27 main_getLoanStatus_route@28 main_getCirculatingLST_route@29 main_getTotalDeposits_route@30 main_getAcceptedCollateralsCount_route@31 main_gas_route@32 main_calculateCollateralValueUSD_route@33 main_pickupASARewards_route@34 main_migrateCollateralTokenId_route@35 main_migrateContract_route@36 main_acceptMigrationASAContract_route@37

main_after_if_else@41:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    intc_0 // 0
    return

main_acceptMigrationASAContract_route@37:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2198
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 3 // 3
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2198
    // @abimethod({ allowActions: 'NoOp' })
    callsub acceptMigrationASAContract
    intc_1 // 1
    return

main_migrateContract_route@36:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2132
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2132
    // @abimethod({ allowActions: 'NoOp' })
    callsub migrateContract
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_migrateCollateralTokenId_route@35:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2109
    // public migrateCollateralTokenId(collateralTokenId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2109
    // public migrateCollateralTokenId(collateralTokenId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    callsub migrateCollateralTokenId
    intc_1 // 1
    return

main_pickupASARewards_route@34:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2079
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub pickupASARewards
    intc_1 // 1
    return

main_calculateCollateralValueUSD_route@33:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1937
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1937
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    callsub calculateCollateralValueUSD
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_gas_route@32:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1899
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    intc_1 // 1
    return

main_getAcceptedCollateralsCount_route@31:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1892
    // getAcceptedCollateralsCount(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getAcceptedCollateralsCount
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getTotalDeposits_route@30:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1884
    // getTotalDeposits(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getTotalDeposits
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getCirculatingLST_route@29:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1876
    // getCirculatingLST(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getCirculatingLST
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getLoanStatus_route@28:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1833
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1833
    // @abimethod({ allowActions: 'NoOp' })
    callsub getLoanStatus
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    bytec 27 // 0x00
    intc_0 // 0
    uncover 8
    setbit
    bytec 27 // 0x00
    intc_0 // 0
    uncover 8
    setbit
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    intc_0 // 0
    getbit
    pushint 321 // 321
    swap
    setbit
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_liquidatePartialASA_route@27:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1645
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1645
    // @abimethod({ allowActions: 'NoOp' })
    callsub liquidatePartialASA
    intc_1 // 1
    return

main_withdrawCollateral_route@26:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1584
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1584
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawCollateral
    intc_1 // 1
    return

main_maxWithdrawableCollateralLST_route@25:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1458
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1458
    // @abimethod({ allowActions: 'NoOp' })
    callsub maxWithdrawableCollateralLST
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_buyoutSplitASA_route@24:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1290
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    txn GroupIndex
    pushint 3 // 3
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 3
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1290
    // @abimethod({ allowActions: 'NoOp' })
    callsub buyoutSplitASA
    intc_1 // 1
    return

main_withdrawPlatformFees_route@23:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1255
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1255
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawPlatformFees
    intc_1 // 1
    return

main_repayLoanASA_route@22:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1198
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1198
    // @abimethod({ allowActions: 'NoOp' })
    callsub repayLoanASA
    intc_1 // 1
    return

main_getLoanRecord_route@21:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1184
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1184
    // @abimethod({ allowActions: 'NoOp' })
    callsub getLoanRecord
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_current_apr_bps_route@20:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1027
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub current_apr_bps
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_accrueLoanInterest_route@19:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:943
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:943
    // @abimethod({ allowActions: 'NoOp' })
    callsub accrueLoanInterest
    intc_1 // 1
    return

main_borrow_route@18:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:848
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:848
    // @abimethod({ allowActions: 'NoOp' })
    callsub borrow
    intc_1 // 1
    return

main_withdrawDeposit_route@17:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:773
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:773
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawDeposit
    intc_1 // 1
    return

main_depositASA_route@16:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:705
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:705
    // @abimethod({ allowActions: 'NoOp' })
    callsub depositASA
    intc_1 // 1
    return

main_addDepositRecordExternal_route@15:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:633
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:633
    // @abimethod({ allowActions: 'NoOp' })
    callsub addDepositRecordExternal
    intc_1 // 1
    return

main_addLoanRecordExternal_route@14:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:619
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    txna ApplicationArgs 3
    btoi
    txnas Accounts
    txna ApplicationArgs 4
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:619
    // @abimethod({ allowActions: 'NoOp' })
    callsub addLoanRecordExternal
    intc_1 // 1
    return

main_addNewCollateralType_route@13:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:575
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 3
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:575
    // @abimethod({ allowActions: 'NoOp' })
    callsub addNewCollateralType
    intc_1 // 1
    return

main_getOraclePrice_route@12:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:493
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:493
    // @abimethod({ allowActions: 'NoOp' })
    callsub getOraclePrice
    itob
    bytec_0 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_configureLSTToken_route@11:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:475
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:475
    // @abimethod({ allowActions: 'NoOp' })
    callsub configureLSTToken
    intc_1 // 1
    return

main_optInToLST_route@10:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:448
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:448
    // @abimethod({ allowActions: 'NoOp' })
    callsub optInToLST
    intc_1 // 1
    return

main_generateLSTToken_route@9:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:415
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:415
    // @abimethod({ allowActions: 'NoOp' })
    callsub generateLSTToken
    intc_1 // 1
    return

main_setMigrationAdmin_route@8:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:404
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:404
    // @abimethod({ allowActions: 'NoOp' })
    callsub setMigrationAdmin
    intc_1 // 1
    return

main_setContractState_route@7:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:394
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:394
    // @abimethod({ allowActions: 'NoOp' })
    callsub setContractState
    intc_1 // 1
    return

main_setMathHelperApp_route@6:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:387
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:387
    // @abimethod({ allowActions: 'NoOp' })
    callsub setMathHelperApp
    intc_1 // 1
    return

main_setRateParams_route@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:337
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txna ApplicationArgs 9
    btoi
    txna ApplicationArgs 10
    btoi
    txna ApplicationArgs 11
    btoi
    txna ApplicationArgs 12
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:337
    // @abimethod({ allowActions: 'NoOp' })
    callsub setRateParams
    intc_1 // 1
    return

main_initApplication_route@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:240
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txnas Applications
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txnas Applications
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:240
    // @abimethod({ allowActions: 'NoOp' })
    callsub initApplication
    intc_1 // 1
    return

main_createApplication_route@3:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:220
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    !
    assert // can only call when creating
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:51-52
    // @contract({ name: 'orbital-lending-asa', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:220
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    callsub createApplication
    intc_1 // 1
    return


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.createApplication(admin: bytes, baseTokenId: uint64) -> void:
createApplication:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:220-221
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    // public createApplication(admin: Account, baseTokenId: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    bytec_3 // "admin_account"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:222
    // this.admin_account.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:223
    // this.base_token_id.value = new UintN64(baseTokenId)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    bytec_1 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:223
    // this.base_token_id.value = new UintN64(baseTokenId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    bytec 13 // "migration_admin"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:224
    // this.migration_admin.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 6 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:225
    // this.contract_state.value = new UintN64(0) // inactive
    bytec 35 // 0x0000000000000000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:212
    // contract_version = GlobalState<UintN64>() // contract version number
    pushbytess "contract_version" 0x00000000000007d2 // "contract_version", 0x00000000000007d2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:226
    // this.contract_version.value = new UintN64(CONTRACT_VERSION)
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.initApplication(mbrTxn: uint64, ltv_bps: uint64, liq_threshold_bps: uint64, origination_fee_bps: uint64, protocol_share_bps: uint64, oracle_app_id: uint64, buyout_token_id: uint64, additional_rewards_commission_percentage: uint64, flux_oracle_app_id: uint64) -> void:
initApplication:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:240-251
    // @abimethod({ allowActions: 'NoOp' })
    // public initApplication(
    //   mbrTxn: gtxn.PaymentTxn,
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   origination_fee_bps: uint64,
    //   protocol_share_bps: uint64,
    //   oracle_app_id: Application,
    //   buyout_token_id: uint64,
    //   additional_rewards_commission_percentage: uint64,
    //   flux_oracle_app_id: Application,
    // ): void {
    proto 9 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:252
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:252
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:254-258
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_CREATE_APP,
    // })
    frame_dig -9
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:254-258
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_CREATE_APP,
    // })
    ==
    bz initApplication_bool_false@4
    frame_dig -9
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:256
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:254-258
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_CREATE_APP,
    // })
    ==
    bz initApplication_bool_false@4
    frame_dig -9
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:3
    // export const MBR_CREATE_APP: uint64 = 400_000
    pushint 400000 // 400000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:254-258
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_CREATE_APP,
    // })
    ==
    bz initApplication_bool_false@4
    intc_1 // 1

initApplication_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:254-258
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_CREATE_APP,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:260
    // assert(additional_rewards_commission_percentage <= 100, 'COMMISSION_TOO_HIGH')
    frame_dig -2
    pushint 100 // 100
    <=
    assert // COMMISSION_TOO_HIGH
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:97
    // ltv_bps = GlobalState<uint64>()
    bytec 28 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:262
    // this.ltv_bps.value = ltv_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:100
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 23 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:263
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:103
    // origination_fee_bps = GlobalState<uint64>()
    bytec 41 // "origination_fee_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:264
    // this.origination_fee_bps.value = origination_fee_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 21 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:265
    // this.accepted_collaterals_count.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    bytec 16 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:266
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:267
    // this.circulating_lst.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:268
    // this.total_deposits.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:269
    // this.active_loan_records.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:106
    // protocol_share_bps = GlobalState<uint64>()
    bytec 42 // "protocol_share_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:270
    // this.protocol_share_bps.value = protocol_share_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:84
    // oracle_app = GlobalState<Application>()
    bytec 43 // "oracle_app"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:271
    // this.oracle_app.value = oracle_app_id
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    bytec 11 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:272
    // this.lst_token_id.value = new UintN64(99)
    pushbytes 0x0000000000000063
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:109
    // base_bps = GlobalState<uint64>()
    bytec 24 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:273
    // this.base_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:112
    // util_cap_bps = GlobalState<uint64>()
    bytec 29 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:274
    // this.util_cap_bps.value = 8000 // 80% utilization cap
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:275
    // this.total_borrows.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:138
    // rate_model_type = GlobalState<uint64>()
    bytec 36 // "rate_model_type"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:276
    // this.rate_model_type.value = 0 // Default to kinked model
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:115
    // kink_norm_bps = GlobalState<uint64>()
    bytec 37 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:277
    // this.kink_norm_bps.value = 5000 // 50% kink point
    pushint 5000 // 5000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:118
    // slope1_bps = GlobalState<uint64>()
    bytec 38 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:278
    // this.slope1_bps.value = 1000 // 10% slope to kink
    intc_2 // 1000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:121
    // slope2_bps = GlobalState<uint64>()
    bytec 39 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:279
    // this.slope2_bps.value = 2000 // 20% slope after kink
    pushint 2000 // 2000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    bytec 22 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:280
    // this.max_apr_bps.value = 6000 // 60% APR Cap by Default
    pushint 6000 // 6000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:126
    // ema_alpha_bps = GlobalState<uint64>()
    bytec 44 // "ema_alpha_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:281
    // this.ema_alpha_bps.value = 0 // No EMA smoothing by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:132
    // prev_apr_bps = GlobalState<uint64>()
    bytec 30 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:282
    // this.prev_apr_bps.value = 50 // Same as base_bps by default
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:135
    // util_ema_bps = GlobalState<uint64>()
    pushbytes "util_ema_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:283
    // this.util_ema_bps.value = 0 // No utilization EMA by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:141
    // power_gamma_q16 = GlobalState<uint64>()
    bytec 45 // "power_gamma_q16"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:284
    // this.power_gamma_q16.value = 0 // No power curve by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:144
    // scarcity_K_bps = GlobalState<uint64>()
    bytec 46 // "scarcity_K_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:285
    // this.scarcity_K_bps.value = 0 // No scarcity parameter by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    bytec 12 // "borrow_index_wad"
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:286
    // this.borrow_index_wad.value = INDEX_SCALE
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:153
    // last_accrual_ts = GlobalState<uint64>()
    bytec 31 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:287
    // this.last_accrual_ts.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:109
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:288
    // this.last_apr_bps.value = this.base_bps.value
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:289
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    bytec 17 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:289
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:193
    // total_commission_earned = GlobalState<uint64>()
    bytec 25 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:290
    // this.total_commission_earned.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 18 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:291
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:189
    // commission_percentage = GlobalState<uint64>()
    bytec 32 // "commission_percentage"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:292
    // this.commission_percentage.value = additional_rewards_commission_percentage
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:159
    // total_borrows_principal = GlobalState<uint64>()
    pushbytes "total_borrows_principal"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:293
    // this.total_borrows_principal.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    bytec 15 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:294
    // this.cash_on_hand.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:195
    // total_additional_rewards = GlobalState<uint64>()
    bytec 26 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:295
    // this.total_additional_rewards.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:87
    // flux_oracle_app = GlobalState<Application>()
    bytec 33 // "flux_oracle_app"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:296
    // this.flux_oracle_app.value = flux_oracle_app_id
    frame_dig -1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    bytec_2 // "math_helper_app_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:297
    // this.math_helper_app_id.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:299
    // if (this.base_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@8
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:300-307
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:302
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:303
    // xferAsset: this.base_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:304
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:300-306
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:300-307
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@8:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:309
    // if (this.buyout_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@11
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:310-317
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:312
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:313
    // xferAsset: this.buyout_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:314
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:310-316
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:310-317
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@11:
    retsub

initApplication_bool_false@4:
    intc_0 // 0
    b initApplication_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.setRateParams(base_bps: uint64, util_cap_bps: uint64, kink_norm_bps: uint64, slope1_bps: uint64, slope2_bps: uint64, max_apr_bps: uint64, max_apr_step_bps: uint64, ema_alpha_bps: uint64, power_gamma_q16: uint64, scarcity_K_bps: uint64, rate_model_type: uint64, liq_bonus_bps: uint64) -> void:
setRateParams:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:337-351
    // @abimethod({ allowActions: 'NoOp' })
    // public setRateParams(
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   max_apr_step_bps: uint64,
    //   ema_alpha_bps: uint64,
    //   power_gamma_q16: uint64,
    //   scarcity_K_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   liq_bonus_bps: uint64,
    // ) {
    proto 12 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:352
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:352
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:355
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    frame_dig -11
    bz setRateParams_bool_false@3
    frame_dig -11
    intc 4 // 10000
    <=
    bz setRateParams_bool_false@3
    intc_1 // 1

setRateParams_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:355
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    assert // BAD_UTIL_CAP
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:356
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    frame_dig -10
    bz setRateParams_bool_false@7
    frame_dig -10
    intc 4 // 10000
    <
    bz setRateParams_bool_false@7
    intc_1 // 1

setRateParams_bool_merge@8:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:356
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    assert // BAD_KINK
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:358
    // if (max_apr_bps > 0) {
    frame_dig -7
    bz setRateParams_after_if_else@14
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:359
    // assert(max_apr_bps >= base_bps, 'BAD_MAX_APR')
    frame_dig -7
    frame_dig -12
    >=
    assert // BAD_MAX_APR

setRateParams_after_if_else@14:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:361
    // assert(ema_alpha_bps <= 10_000, 'BAD_EMA_ALPHA')
    frame_dig -5
    intc 4 // 10000
    <=
    assert // BAD_EMA_ALPHA
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:364
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    frame_dig -2
    bz setRateParams_bool_true@16
    frame_dig -2
    pushint 255 // 255
    ==
    bz setRateParams_bool_false@17

setRateParams_bool_true@16:
    intc_1 // 1

setRateParams_bool_merge@18:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:364
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    assert // UNSUPPORTED_MODEL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:109
    // base_bps = GlobalState<uint64>()
    bytec 24 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:365
    // this.base_bps.value = base_bps
    frame_dig -12
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:112
    // util_cap_bps = GlobalState<uint64>()
    bytec 29 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:366
    // this.util_cap_bps.value = util_cap_bps
    frame_dig -11
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:115
    // kink_norm_bps = GlobalState<uint64>()
    bytec 37 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:367
    // this.kink_norm_bps.value = kink_norm_bps
    frame_dig -10
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:118
    // slope1_bps = GlobalState<uint64>()
    bytec 38 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:368
    // this.slope1_bps.value = slope1_bps
    frame_dig -9
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:121
    // slope2_bps = GlobalState<uint64>()
    bytec 39 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:369
    // this.slope2_bps.value = slope2_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    bytec 22 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:370
    // this.max_apr_bps.value = max_apr_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:129
    // max_apr_step_bps = GlobalState<uint64>()
    pushbytes "max_apr_step_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:371
    // this.max_apr_step_bps.value = max_apr_step_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:138
    // rate_model_type = GlobalState<uint64>()
    bytec 36 // "rate_model_type"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:372
    // this.rate_model_type.value = rate_model_type
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:181
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 34 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:373
    // this.liq_bonus_bps.value = liq_bonus_bps
    frame_dig -1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:126
    // ema_alpha_bps = GlobalState<uint64>()
    bytec 44 // "ema_alpha_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:374
    // this.ema_alpha_bps.value = ema_alpha_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:141
    // power_gamma_q16 = GlobalState<uint64>()
    bytec 45 // "power_gamma_q16"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:375
    // this.power_gamma_q16.value = power_gamma_q16
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:144
    // scarcity_K_bps = GlobalState<uint64>()
    bytec 46 // "scarcity_K_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:376
    // this.scarcity_K_bps.value = scarcity_K_bps
    frame_dig -3
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:378
    // if (this.max_apr_bps.value > 0 && this.prev_apr_bps.value > this.max_apr_bps.value) {
    bz setRateParams_after_if_else@21
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:132
    // prev_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 30 // "prev_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:378
    // if (this.max_apr_bps.value > 0 && this.prev_apr_bps.value > this.max_apr_bps.value) {
    >
    bz setRateParams_after_if_else@21
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:132
    // prev_apr_bps = GlobalState<uint64>()
    bytec 30 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:379
    // this.prev_apr_bps.value = this.max_apr_bps.value
    swap
    app_global_put

setRateParams_after_if_else@21:
    retsub

setRateParams_bool_false@17:
    intc_0 // 0
    b setRateParams_bool_merge@18

setRateParams_bool_false@7:
    intc_0 // 0
    b setRateParams_bool_merge@8

setRateParams_bool_false@3:
    intc_0 // 0
    b setRateParams_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.setMathHelperApp(mathHelperAppId: uint64) -> void:
setMathHelperApp:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:387-388
    // @abimethod({ allowActions: 'NoOp' })
    // public setMathHelperApp(mathHelperAppId: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:389
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:389
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:390
    // assert(mathHelperAppId > 0, 'BAD_HELPER_APP')
    frame_dig -1
    assert // BAD_HELPER_APP
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    bytec_2 // "math_helper_app_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:391
    // this.math_helper_app_id.value = mathHelperAppId
    frame_dig -1
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.setContractState(state: uint64) -> void:
setContractState:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:394-395
    // @abimethod({ allowActions: 'NoOp' })
    // public setContractState(state: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:396
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:396
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    ==
    bnz setContractState_bool_true@2
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:396
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    ==
    bz setContractState_bool_false@3

setContractState_bool_true@2:
    intc_1 // 1

setContractState_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:396
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:397
    // this.contract_state.value = new UintN64(state)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 6 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:397
    // this.contract_state.value = new UintN64(state)
    swap
    app_global_put
    retsub

setContractState_bool_false@3:
    intc_0 // 0
    b setContractState_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.setMigrationAdmin(migrationAdmin: bytes) -> void:
setMigrationAdmin:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:404-405
    // @abimethod({ allowActions: 'NoOp' })
    // public setMigrationAdmin(migrationAdmin: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:406
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:406
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    bytec 13 // "migration_admin"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:407
    // this.migration_admin.value = migrationAdmin
    frame_dig -1
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.generateLSTToken(mbrTxn: uint64) -> void:
generateLSTToken:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:415-416
    // @abimethod({ allowActions: 'NoOp' })
    // public generateLSTToken(mbrTxn: gtxn.PaymentTxn): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:417
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:417
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:418-422
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_INIT_APP,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:418-422
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_INIT_APP,
    // })
    ==
    bz generateLSTToken_bool_false@4
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:420
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:418-422
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_INIT_APP,
    // })
    ==
    bz generateLSTToken_bool_false@4
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:4
    // export const MBR_INIT_APP: uint64 = 102_000
    pushint 102000 // 102000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:418-422
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_INIT_APP,
    // })
    ==
    bz generateLSTToken_bool_false@4
    intc_1 // 1

generateLSTToken_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:418-422
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_INIT_APP,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:426
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:427-438
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:429
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:430
    // total: baseToken.total,
    dig 1
    asset_params_get AssetTotal
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:431
    // decimals: baseToken.decimals,
    dig 2
    asset_params_get AssetDecimals
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:433
    // manager: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:434
    // unitName: 'c' + String(baseToken.unitName),
    dig 4
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:435
    // assetName: 'c' + String(baseToken.unitName),
    uncover 5
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    itxn_field ConfigAssetName
    itxn_field ConfigAssetUnitName
    itxn_field ConfigAssetManager
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:432
    // defaultFrozen: false,
    intc_0 // 0
    itxn_field ConfigAssetDefaultFrozen
    itxn_field ConfigAssetDecimals
    itxn_field ConfigAssetTotal
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:427-437
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    pushint 3 // 3
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:427-438
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    itxn CreatedAssetID
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:439
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    bytec 11 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:439
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    swap
    app_global_put
    retsub

generateLSTToken_bool_false@4:
    intc_0 // 0
    b generateLSTToken_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.optInToLST(lstAssetId: uint64, mbrTxn: uint64) -> void:
optInToLST:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:448-449
    // @abimethod({ allowActions: 'NoOp' })
    // public optInToLST(lstAssetId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:450
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:450
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:451-455
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_OPT_IN_LST,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:451-455
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_OPT_IN_LST,
    // })
    ==
    bz optInToLST_bool_false@4
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:453
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:451-455
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_OPT_IN_LST,
    // })
    ==
    bz optInToLST_bool_false@4
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:5
    // export const MBR_OPT_IN_LST: uint64 = 2_000
    pushint 2000 // 2000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:451-455
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_OPT_IN_LST,
    // })
    ==
    bz optInToLST_bool_false@4
    intc_1 // 1

optInToLST_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:451-455
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MBR_OPT_IN_LST,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:456
    // this.lst_token_id.value = new UintN64(lstAssetId)
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    bytec 11 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:456
    // this.lst_token_id.value = new UintN64(lstAssetId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:459-466
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:461
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:463
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:459-465
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:459-466
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub

optInToLST_bool_false@4:
    intc_0 // 0
    b optInToLST_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.configureLSTToken(axferTxn: uint64, circulating_lst: uint64) -> void:
configureLSTToken:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:475-476
    // @abimethod({ allowActions: 'NoOp' })
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:477
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:477
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:478
    // assert(this.lst_token_id.value.native === axferTxn.xferAsset.id, 'LST token not set')
    btoi
    frame_dig -2
    gtxns XferAsset
    ==
    assert // LST token not set
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:480-483
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:480-483
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:482
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:480-483
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    intc_1 // 1

configureLSTToken_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:480-483
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:484
    // this.circulating_lst.value = circulating_lst
    frame_dig -1
    app_global_put
    retsub

configureLSTToken_bool_false@3:
    intc_0 // 0
    b configureLSTToken_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getOraclePrice(tokenId: bytes) -> uint64:
getOraclePrice:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:493-494
    // @abimethod({ allowActions: 'NoOp' })
    // public getOraclePrice(tokenId: UintN64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:84
    // oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 43 // "oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:496
    // const address = oracle.address
    dup
    app_params_get AppAddress
    bury 1
    assert // application exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:499-503
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    pushbytes 0xac13e004 // method "getTokenPrice(uint64)(uint64,uint64,uint64)"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:499-503
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    pushint 12 // 12
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:505
    // return result.price.native
    extract_uint64
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.updateCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
updateCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:533
    // private updateCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:535
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:537
    // const newTotal: uint64 = collateral.totalCollateral.native + amount
    dup
    pushint 24 // 24
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:539
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:540
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:541
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:542
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:543
    // originatingAppId: collateral.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:538-544
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.reduceCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
reduceCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:553
    // private reduceCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:555
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:557
    // assert(collateral.totalCollateral.native >= amount, 'INSUFFICIENT_COLLATERAL')
    dup
    pushint 24 // 24
    extract_uint64
    dup
    frame_dig -1
    >=
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:558
    // const newTotal: uint64 = collateral.totalCollateral.native - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:560
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:561
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:562
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:563
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:564
    // originatingAppId: collateral.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:559-565
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.addNewCollateralType(collateralTokenId: bytes, collateralBaseTokenId: bytes, mbrTxn: uint64, originatingAppId: bytes) -> void:
addNewCollateralType:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:575-581
    // @abimethod({ allowActions: 'NoOp' })
    // public addNewCollateralType(
    //   collateralTokenId: UintN64,
    //   collateralBaseTokenId: UintN64,
    //   mbrTxn: gtxn.PaymentTxn,
    //   originatingAppId: UintN64,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:582
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:583
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:583
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:584
    // assert(collateralTokenId.native !== baseToken.id, 'CANNOT_USE_BASE_AS_COLLATERAL')
    frame_dig -4
    btoi
    dup
    uncover 2
    !=
    assert // CANNOT_USE_BASE_AS_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig -4
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:515
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:585
    // assert(!this.collateralExists(collateralTokenId), 'COLLATERAL_ALREADY_EXISTS')
    !
    assert // COLLATERAL_ALREADY_EXISTS
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:586-594
    // assertMatch(
    //   mbrTxn,
    //   {
    //     sender: this.admin_account.value,
    //     receiver: Global.currentApplicationAddress,
    //     amount: MBR_COLLATERAL,
    //   },
    //   'INSUFFICIENT_MBR',
    // )
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:586-594
    // assertMatch(
    //   mbrTxn,
    //   {
    //     sender: this.admin_account.value,
    //     receiver: Global.currentApplicationAddress,
    //     amount: MBR_COLLATERAL,
    //   },
    //   'INSUFFICIENT_MBR',
    // )
    ==
    bz addNewCollateralType_bool_false@4
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:590
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:586-594
    // assertMatch(
    //   mbrTxn,
    //   {
    //     sender: this.admin_account.value,
    //     receiver: Global.currentApplicationAddress,
    //     amount: MBR_COLLATERAL,
    //   },
    //   'INSUFFICIENT_MBR',
    // )
    ==
    bz addNewCollateralType_bool_false@4
    frame_dig -2
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:6
    // export const MBR_COLLATERAL: uint64 = 101_000
    pushint 101000 // 101000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:586-594
    // assertMatch(
    //   mbrTxn,
    //   {
    //     sender: this.admin_account.value,
    //     receiver: Global.currentApplicationAddress,
    //     amount: MBR_COLLATERAL,
    //   },
    //   'INSUFFICIENT_MBR',
    // )
    ==
    bz addNewCollateralType_bool_false@4
    intc_1 // 1

addNewCollateralType_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:586-594
    // assertMatch(
    //   mbrTxn,
    //   {
    //     sender: this.admin_account.value,
    //     receiver: Global.currentApplicationAddress,
    //     amount: MBR_COLLATERAL,
    //   },
    //   'INSUFFICIENT_MBR',
    // )
    assert // INSUFFICIENT_MBR
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:596-602
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    frame_dig -4
    frame_dig -3
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:600
    // totalCollateral: new UintN64(0),
    bytec 35 // 0x0000000000000000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:596-602
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    concat
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:604
    // this.accepted_collaterals(key).value = newAcceptedCollateral.copy()
    frame_dig 1
    dup
    uncover 2
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:605
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 21 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:605
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:606-614
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:608
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:609
    // assetReceiver: Global.currentApplicationAddress,
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:611
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    frame_dig 0
    itxn_field XferAsset
    itxn_field AssetReceiver
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:606-613
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:606-614
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:515
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:616
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    retsub

addNewCollateralType_bool_false@4:
    intc_0 // 0
    b addNewCollateralType_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.addLoanRecordExternal(disbursement: uint64, collateralTokenId: bytes, borrowerAddress: bytes, collateralAmount: uint64) -> void:
addLoanRecordExternal:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:619-625
    // @abimethod({ allowActions: 'NoOp' })
    // public addLoanRecordExternal(
    //   disbursement: uint64,
    //   collateralTokenId: UintN64,
    //   borrowerAddress: Account,
    //   collateralAmount: uint64,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:626
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:626
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:627
    // this.mintLoanRecord(disbursement, collateralTokenId, borrowerAddress, collateralAmount)
    frame_dig -4
    frame_dig -3
    frame_dig -2
    frame_dig -1
    callsub mintLoanRecord
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:628
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -3
    frame_dig -1
    callsub updateCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:629
    // this.total_borrows.value = this.total_borrows.value + disbursement
    frame_dig -4
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:629
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:630
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:630
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.addDepositRecordExternal(userAddress: bytes, assetId: uint64, depositAmount: uint64) -> void:
addDepositRecordExternal:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:633-634
    // @abimethod({ allowActions: 'NoOp' })
    // public addDepositRecordExternal(userAddress: Account, assetId: uint64, depositAmount: uint64): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:635
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:635
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:637
    // assetId: new UintN64(assetId),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:636-639
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(assetId),
    //   userAddress: new Address(userAddress),
    // }).copy()
    frame_dig -3
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:642
    // depositAmount: new UintN64(depositAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:640-643
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(assetId),
    //   depositAmount: new UintN64(depositAmount),
    // }).copy()
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:183
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 40 // "deposit_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:640-643
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(assetId),
    //   depositAmount: new UintN64(depositAmount),
    // }).copy()
    swap
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.depositASA(assetTransferTxn: uint64, amount: uint64, mbrTxn: uint64) -> void:
depositASA:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:705-706
    // @abimethod({ allowActions: 'NoOp' })
    // public depositASA(assetTransferTxn: gtxn.AssetTransferTxn, amount: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:707
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:708-712
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:709
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:708-712
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    ==
    bz depositASA_bool_false@4
    frame_dig -3
    gtxns XferAsset
    frame_dig 0
    ==
    bz depositASA_bool_false@4
    frame_dig -3
    gtxns AssetAmount
    frame_dig -2
    ==
    bz depositASA_bool_false@4
    intc_1 // 1

depositASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:708-712
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:713-717
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: DEPOSIT_MBR,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:714
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:713-717
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: DEPOSIT_MBR,
    // })
    ==
    bz depositASA_bool_false@9
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:715
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:713-717
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: DEPOSIT_MBR,
    // })
    ==
    bz depositASA_bool_false@9
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:17
    // export const DEPOSIT_MBR: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:713-717
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: DEPOSIT_MBR,
    // })
    ==
    bz depositASA_bool_false@9
    intc_1 // 1

depositASA_bool_merge@10:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:713-717
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: DEPOSIT_MBR,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:718
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:719
    // this.addCash(amount)
    frame_dig -2
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:721
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:728
    // if (this.total_deposits.value === 0) {
    bnz depositASA_else_body@12
    frame_dig -2

depositASA_after_if_else@13:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:733-740
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:735
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:736
    // xferAsset: this.lst_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:733-739
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:733-740
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:742
    // this.circulating_lst.value += lstDue
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:742
    // this.circulating_lst.value += lstDue
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:743
    // this.total_deposits.value += amount
    frame_dig -2
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:743
    // this.total_deposits.value += amount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:744
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:744
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:746
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:747
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:745-748
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:183
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 40 // "deposit_record"
    swap
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:749
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz depositASA_else_body@16
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:750
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:751
    // const newAmount: uint64 = existingRecord.depositAmount.native + amount
    dup
    intc_0 // 0
    extract_uint64
    frame_dig -2
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:753
    // assetId: existingRecord.assetId,
    swap
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:754
    // depositAmount: new UintN64(newAmount),
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:752-755
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositASA_else_body@16:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:758
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:759
    // depositAmount: new UintN64(amount),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:757-760
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   depositAmount: new UintN64(amount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositASA_else_body@12:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:652
    // const [highBits1, lowBits1] = mulw(this.circulating_lst.value, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:654
    // const lstRatio = divw(highBits1, lowBits1, this.total_deposits.value)
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:656
    // const [highBits2, lowBits2] = mulw(lstRatio, amount)
    frame_dig -2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:657
    // return divw(highBits2, lowBits2, BASIS_POINTS)
    divw
    b depositASA_after_if_else@13

depositASA_bool_false@9:
    intc_0 // 0
    b depositASA_bool_merge@10

depositASA_bool_false@4:
    intc_0 // 0
    b depositASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.withdrawDeposit(assetTransferTxn: uint64, amount: uint64, lstAppId: uint64, mbrTxn: uint64) -> void:
withdrawDeposit:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:773-779
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawDeposit(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   amount: uint64,
    //   lstAppId: uint64,
    //   mbrTxn: gtxn.PaymentTxn,
    // ): void {
    proto 4 0
    intc_0 // 0
    dup
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:780
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:781
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:782-786
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    frame_dig -4
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:783
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:782-786
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@4
    frame_dig -4
    gtxns XferAsset
    frame_dig 3
    ==
    bz withdrawDeposit_bool_false@4
    frame_dig -4
    gtxns AssetAmount
    frame_dig -3
    ==
    bz withdrawDeposit_bool_false@4
    intc_1 // 1

withdrawDeposit_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:782-786
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:788-792
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: WITHDRAW_MBR,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:789
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:788-792
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: WITHDRAW_MBR,
    // })
    ==
    bz withdrawDeposit_bool_false@9
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:790
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:788-792
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: WITHDRAW_MBR,
    // })
    ==
    bz withdrawDeposit_bool_false@9
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:18
    // export const WITHDRAW_MBR: uint64 = 3_000
    pushint 3000 // 3000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:788-792
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: WITHDRAW_MBR,
    // })
    ==
    bz withdrawDeposit_bool_false@9
    intc_1 // 1

withdrawDeposit_bool_merge@10:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:788-792
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: WITHDRAW_MBR,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:794
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:798
    // if (lstAppId === Global.currentApplicationId.id) {
    frame_dig -2
    global CurrentApplicationID
    ==
    bz withdrawDeposit_else_body@12
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:689
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:690-694
    // return abiCall(NebulaCalculusStub.prototype.lstDue, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:692
    // args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:692
    // args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:692
    // args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:690-694
    // return abiCall(NebulaCalculusStub.prototype.lstDue, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x505ebdd2 // method "lstDue(uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:690-694
    // return abiCall(NebulaCalculusStub.prototype.lstDue, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(amount), new UintN64(this.circulating_lst.value), new UintN64(this.total_deposits.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:694
    // }).returnValue.native
    btoi

withdrawDeposit_after_if_else@13:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:803
    // this.removeCash(asaDue)
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:805
    // assert(op.AssetHolding.assetBalance(Global.currentApplicationAddress, this.base_token_id.value.native)[0] >= asaDue)
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:805
    // assert(op.AssetHolding.assetBalance(Global.currentApplicationAddress, this.base_token_id.value.native)[0] >= asaDue)
    btoi
    asset_holding_get AssetBalance
    pop
    dig 1
    >=
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:806-813
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:808
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:809
    // xferAsset: this.base_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:806-812
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:806-813
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:815
    // this.circulating_lst.value -= amount // LST burned
    frame_dig -3
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:815
    // this.circulating_lst.value -= amount // LST burned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:816
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:816
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:817
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:817
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:819
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:820
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:818-821
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:183
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 40 // "deposit_record"
    swap
    concat
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:822
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz withdrawDeposit_after_if_else@19
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:823
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    frame_dig 1
    box_get
    swap
    dup
    cover 2
    frame_bury 0
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:824
    // const newAmount: uint64 = existingRecord.depositAmount.native - amount
    intc_0 // 0
    extract_uint64
    frame_dig -3
    -
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:825
    // if (newAmount === 0) {
    bnz withdrawDeposit_else_body@17
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:826
    // this.deposit_record(depositKey).delete()
    frame_dig 1
    box_del
    pop

withdrawDeposit_after_if_else@19:
    retsub

withdrawDeposit_else_body@17:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:829
    // assetId: existingRecord.assetId,
    frame_dig 0
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:830
    // depositAmount: new UintN64(newAmount),
    frame_dig 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:828-831
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    frame_dig 1
    swap
    box_put
    retsub

withdrawDeposit_else_body@12:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:669-672
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 19 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -2
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:669-672
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:673-676
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -2
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:673-676
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:679
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -3
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:680
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw
    b withdrawDeposit_after_if_else@13

withdrawDeposit_bool_false@9:
    intc_0 // 0
    b withdrawDeposit_bool_merge@10

withdrawDeposit_bool_false@4:
    intc_0 // 0
    b withdrawDeposit_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.borrow(assetTransferTxn: uint64, requestedLoanAmount: uint64, collateralAmount: uint64, lstApp: uint64, collateralTokenId: bytes, mbrTxn: uint64) -> void:
borrow:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:848-856
    // @abimethod({ allowActions: 'NoOp' })
    // public borrow(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   requestedLoanAmount: uint64,
    //   collateralAmount: uint64,
    //   lstApp: uint64,
    //   collateralTokenId: UintN64,
    //   mbrTxn: gtxn.PaymentTxn,
    // ): void {
    proto 6 0
    intc_0 // 0
    pushbytes ""
    dupn 4
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:857
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:859
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:859
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    box_len
    dup
    uncover 2
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:860
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:862
    // if (hasLoan) {
    bz borrow_else_body@2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:863
    // const existingCollateral = this.getLoanRecord(op.Txn.sender).collateralAmount
    txn Sender
    callsub getLoanRecord
    pushint 40 // 40
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:864
    // collateralToUse = existingCollateral.native + collateralAmount
    extract_uint64
    frame_dig -4
    +
    frame_bury 1

borrow_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1915-1919
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: VALIDATE_BORROW_FEE,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1916
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1915-1919
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: VALIDATE_BORROW_FEE,
    // })
    ==
    bz borrow_bool_false@34
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1917
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1915-1919
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: VALIDATE_BORROW_FEE,
    // })
    ==
    bz borrow_bool_false@34
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:8
    // export const VALIDATE_BORROW_FEE: uint64 = 4_000
    pushint 4000 // 4000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1915-1919
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: VALIDATE_BORROW_FEE,
    // })
    ==
    bz borrow_bool_false@34
    intc_1 // 1

borrow_bool_merge@35:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1915-1919
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: VALIDATE_BORROW_FEE,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1921-1925
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    frame_dig -6
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1922
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1921-1925
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@39
    frame_dig -6
    gtxns AssetAmount
    frame_dig -4
    ==
    bz borrow_bool_false@39
    frame_dig -6
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1924
    // xferAsset: Asset(collateralTokenId.native),
    frame_dig -2
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1921-1925
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@39
    intc_1 // 1

borrow_bool_merge@40:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1921-1925
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:515
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1927
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:869
    // const collateralUSD = this.calculateCollateralValueUSD(collateralTokenId, collateralToUse, lstApp)
    frame_dig -2
    frame_dig 1
    frame_dig -3
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:97
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 28 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:870
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    *
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:870
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    /
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:871
    // const baseTokenOraclePrice: uint64 = this.getOraclePrice(this.base_token_id.value)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1977
    // const [rH, rL] = mulw(requestedLoanAmount, baseTokenOraclePrice)
    frame_dig -5
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    pushint 1000000 // 1000000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1978
    // const requestedLoanUSD = divw(rH, rL, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1980
    // assert(requestedLoanUSD <= maxBorrowUSD, 'exceeds LTV limit')
    >=
    assert // exceeds LTV limit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:112
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "util_cap_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1992
    // const [h, l] = mulw(this.total_deposits.value, this.util_cap_bps.value)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1993
    // return divw(h, l, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1982
    // assert(this.total_borrows.value + requestedLoanAmount <= capBorrow, 'UTIL_CAP_EXCEEDED')
    frame_dig -5
    +
    >=
    assert // UTIL_CAP_EXCEEDED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:875
    // let userTier: UintN64 = new UintN64(0)
    bytec 35 // 0x0000000000000000
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:87
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 33 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:876
    // if (this.flux_oracle_app.value.id !== 0) {
    bz borrow_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:877-884
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: STANDARD_TXN_FEE,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:87
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 33 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:880
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:87
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 33 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:883
    // accounts: [op.Txn.sender],
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:879
    // args: [new Address(op.Txn.sender)],
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:877-884
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: STANDARD_TXN_FEE,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    pushbytes 0xd4d7aa5c // method "getUserTier(address)uint64"
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field Accounts
    itxn_field Applications
    itxn_field Sender
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:877-884
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: STANDARD_TXN_FEE,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    frame_bury 0
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix

borrow_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:886
    // const calculatedFee = this.computeFees(requestedLoanAmount, userTier.native)
    frame_dig 0
    btoi
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:103
    // origination_fee_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 41 // "origination_fee_bps"
    app_global_get_ex
    swap
    frame_bury 4
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1003
    // if (userTier === 1) {
    intc_1 // 1
    ==
    bz borrow_else_body@17
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1004
    // const [hi, lo] = mulw(initialFee, 90)
    frame_dig 4
    pushint 90 // 90
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1005
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3

borrow_after_if_else@26:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1017
    // const [feeHi, feeLo] = mulw(depositAmount, effectiveFeeBps)
    frame_dig -5
    frame_dig 3
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1018
    // const fee: uint64 = divw(feeHi, feeLo, 10_000)
    intc 4 // 10000
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2003
    // const disbursement: uint64 = requestedAmount - calculatedFee
    frame_dig -5
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2005
    // this.fee_pool.value += calculatedFee
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    bytec 16 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2005
    // this.fee_pool.value += calculatedFee
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:890
    // if (hasLoan) {
    frame_dig 6
    bz borrow_else_body@8
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:892
    // op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2029
    // const existingLoan = this.getLoanRecord(borrower)
    dup
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2031
    // const liveDebt: uint64 = this.syncBorrowerSnapshot(borrower)
    dig 1
    callsub syncBorrowerSnapshot
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2039
    // const newDebt: uint64 = liveDebt + disbursement
    frame_dig 2
    dup
    cover 3
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2044
    // collateralTokenId: existingLoan.collateralTokenId,
    dig 1
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2045
    // collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    uncover 2
    pushint 40 // 40
    extract_uint64
    frame_dig -4
    +
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2048
    // amount: new UintN64(disbursement),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2049
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2047-2051
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2050
    // changeType: new UintN8(0), // borrow
    bytec 27 // 0x00
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2047-2051
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2052
    // principal: new UintN64(newDebt),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2053
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2042-2054
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2042-2054
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2057
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -2
    frame_dig -4
    callsub updateCollateralTotal

borrow_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:905
    // this.disburseFunds(op.Txn.sender, disbursement)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2065-2072
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2068
    // xferAsset: this.base_token_id.value.native,
    btoi
    frame_dig 2
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    swap
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2065-2071
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2065-2072
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:906
    // this.removeCash(disbursement)
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:907
    // this.total_borrows.value = this.total_borrows.value + disbursement
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:907
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:908
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:908
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

borrow_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:901
    // this.mintLoanRecord(disbursement, collateralTokenId, op.Txn.sender, collateralAmount)
    txn Sender
    frame_dig 2
    frame_dig -2
    uncover 2
    frame_dig -4
    callsub mintLoanRecord
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:902
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -2
    frame_dig -4
    callsub updateCollateralTotal
    b borrow_after_if_else@9

borrow_else_body@17:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1006
    // } else if (userTier === 2) {
    frame_dig 5
    pushint 2 // 2
    ==
    bz borrow_else_body@19
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1007
    // const [hi, lo] = mulw(initialFee, 75)
    frame_dig 4
    pushint 75 // 75
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1008
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_else_body@19:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1009
    // } else if (userTier === 3) {
    frame_dig 5
    pushint 3 // 3
    ==
    bz borrow_else_body@21
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1010
    // const [hi, lo] = mulw(initialFee, 50)
    frame_dig 4
    pushint 50 // 50
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1011
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_else_body@21:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1012
    // } else if (userTier >= 4) {
    frame_dig 5
    intc_3 // 4
    >=
    frame_dig 4
    frame_bury 3
    bz borrow_after_if_else@26
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1013
    // const [hi, lo] = mulw(initialFee, 25)
    frame_dig 4
    pushint 25 // 25
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1014
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_bool_false@39:
    intc_0 // 0
    b borrow_bool_merge@40

borrow_bool_false@34:
    intc_0 // 0
    b borrow_bool_merge@35

borrow_else_body@2:
    frame_dig -4
    frame_bury 1
    b borrow_after_if_else@3


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.mintLoanRecord(disbursement: uint64, collateralTokenId: bytes, borrowerAddress: bytes, collateralAmount: uint64) -> void:
mintLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:918-923
    // private mintLoanRecord(
    //   disbursement: uint64,
    //   collateralTokenId: UintN64,
    //   borrowerAddress: Account,
    //   collateralAmount: uint64,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:929
    // collateralAmount: new UintN64(collateralAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:932
    // amount: new UintN64(disbursement),
    frame_dig -4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:933
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:931-935
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    dig 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:934
    // changeType: new UintN8(0), // borrow
    bytec 27 // 0x00
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:931-935
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:937
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:926-938
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    frame_dig -2
    frame_dig -3
    concat
    uncover 5
    concat
    uncover 2
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:926-938
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:940
    // this.active_loan_records.value = this.active_loan_records.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:940
    // this.active_loan_records.value = this.active_loan_records.value + 1
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.accrueLoanInterest(debtor: bytes, templateReserveAddress: bytes) -> void:
accrueLoanInterest:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:943-944
    // @abimethod({ allowActions: 'NoOp' })
    // public accrueLoanInterest(debtor: Account, templateReserveAddress: Account): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:945
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:946
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:947
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:949
    // this.syncBorrowerSnapshot(debtor)
    frame_dig -2
    callsub syncBorrowerSnapshot
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:951
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:951
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.current_apr_bps() -> uint64:
current_apr_bps:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1027-1028
    // @abimethod({ allowActions: 'NoOp' })
    // public current_apr_bps(): uint64 {
    proto 0 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:964
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:965-973
    // const result = abiCall(NebulaCalculusStub.prototype.utilNormBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(this.total_deposits.value),
    //     new UintN64(this.total_borrows.value),
    //     new UintN64(this.util_cap_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:968
    // new UintN64(this.total_deposits.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:969
    // new UintN64(this.total_borrows.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:112
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "util_cap_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:970
    // new UintN64(this.util_cap_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:965-973
    // const result = abiCall(NebulaCalculusStub.prototype.utilNormBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(this.total_deposits.value),
    //     new UintN64(this.total_borrows.value),
    //     new UintN64(this.util_cap_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    pushbytes 0xc9c4f2f4 // method "utilNormBps(uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:965-973
    // const result = abiCall(NebulaCalculusStub.prototype.utilNormBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(this.total_deposits.value),
    //     new UintN64(this.total_borrows.value),
    //     new UintN64(this.util_cap_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:974
    // return result.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:138
    // rate_model_type = GlobalState<uint64>()
    intc_0 // 0
    bytec 36 // "rate_model_type"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1035
    // const apr = this.rate_model_type.value === 0 ? this.apr_bps_kinked(U_used) : this.base_bps.value // Fixed APR fallback
    bnz current_apr_bps_ternary_false@2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:984
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:985-996
    // return abiCall(NebulaCalculusStub.prototype.aprBpsKinked, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(U_norm_bps),
    //     new UintN64(this.base_bps.value),
    //     new UintN64(this.kink_norm_bps.value),
    //     new UintN64(this.slope1_bps.value),
    //     new UintN64(this.slope2_bps.value),
    //     new UintN64(this.max_apr_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:988
    // new UintN64(U_norm_bps),
    frame_dig 0
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:109
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:989
    // new UintN64(this.base_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:115
    // kink_norm_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 37 // "kink_norm_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:990
    // new UintN64(this.kink_norm_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:118
    // slope1_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 38 // "slope1_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:991
    // new UintN64(this.slope1_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:121
    // slope2_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 39 // "slope2_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:992
    // new UintN64(this.slope2_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:124
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:993
    // new UintN64(this.max_apr_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:985-996
    // return abiCall(NebulaCalculusStub.prototype.aprBpsKinked, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(U_norm_bps),
    //     new UintN64(this.base_bps.value),
    //     new UintN64(this.kink_norm_bps.value),
    //     new UintN64(this.slope1_bps.value),
    //     new UintN64(this.slope2_bps.value),
    //     new UintN64(this.max_apr_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0xd75d3591 // method "aprBpsKinked(uint64,uint64,uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 5
    itxn_field ApplicationArgs
    uncover 4
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:985-996
    // return abiCall(NebulaCalculusStub.prototype.aprBpsKinked, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(U_norm_bps),
    //     new UintN64(this.base_bps.value),
    //     new UintN64(this.kink_norm_bps.value),
    //     new UintN64(this.slope1_bps.value),
    //     new UintN64(this.slope2_bps.value),
    //     new UintN64(this.max_apr_bps.value),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:996
    // }).returnValue.native
    btoi

current_apr_bps_ternary_merge@3:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:132
    // prev_apr_bps = GlobalState<uint64>()
    bytec 30 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1047
    // this.prev_apr_bps.value = apr
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1048
    // return apr
    swap
    retsub

current_apr_bps_ternary_false@2:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:109
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    b current_apr_bps_ternary_merge@3


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.currentDebtFromSnapshot(rec: bytes) -> uint64, bytes:
currentDebtFromSnapshot:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1072
    // private currentDebtFromSnapshot(rec: LoanRecord): uint64 {
    proto 1 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1073
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1074-1082
    // return abiCall(NebulaCalculusStub.prototype.currentDebtFromSnapshot, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     rec.principal,
    //     new UintN64(this.borrow_index_wad.value),
    //     rec.userIndexWad,
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1077
    // rec.principal,
    frame_dig -1
    extract 73 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1078
    // new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1079
    // rec.userIndexWad,
    frame_dig -1
    extract 81 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1074-1082
    // return abiCall(NebulaCalculusStub.prototype.currentDebtFromSnapshot, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     rec.principal,
    //     new UintN64(this.borrow_index_wad.value),
    //     rec.userIndexWad,
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x7b7ee824 // method "currentDebtFromSnapshot(uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1074-1082
    // return abiCall(NebulaCalculusStub.prototype.currentDebtFromSnapshot, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     rec.principal,
    //     new UintN64(this.borrow_index_wad.value),
    //     rec.userIndexWad,
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1082
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1074-1082
    // return abiCall(NebulaCalculusStub.prototype.currentDebtFromSnapshot, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     rec.principal,
    //     new UintN64(this.borrow_index_wad.value),
    //     rec.userIndexWad,
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    frame_dig -1
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.syncBorrowerSnapshot(borrower: bytes) -> uint64:
syncBorrowerSnapshot:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1091
    // private syncBorrowerSnapshot(borrower: Account): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1092
    // const rec = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1093
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1096
    // collateralTokenId: rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1097
    // collateralAmount: rec.collateralAmount,
    dig 1
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1099
    // lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    uncover 3
    extract 48 17 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1100
    // principal: new UintN64(liveDebt),
    dig 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1101
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1094-1102
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    //   principal: new UintN64(liveDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // })
    frame_dig -1
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1103
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1104
    // return liveDebt
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.accrueMarket() -> uint64:
accrueMarket:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1113
    // private accrueMarket(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1114
    // const now: uint64 = Global.latestTimestamp
    global LatestTimestamp
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:153
    // last_accrual_ts = GlobalState<uint64>()
    intc_0 // 0
    bytec 31 // "last_accrual_ts"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1116
    // if (now <= last) return 0
    <=
    bz accrueMarket_after_if_else@2
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1118
    // const deltaT: uint64 = now - last
    frame_dig 3
    frame_dig 4
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1059
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1060-1064
    // return abiCall(NebulaCalculusStub.prototype.sliceFactorWad, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(deltaT), new UintN64(this.last_apr_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1062
    // args: [new UintN64(deltaT), new UintN64(this.last_apr_bps.value)],
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "last_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1062
    // args: [new UintN64(deltaT), new UintN64(this.last_apr_bps.value)],
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1060-1064
    // return abiCall(NebulaCalculusStub.prototype.sliceFactorWad, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(deltaT), new UintN64(this.last_apr_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x0bf83943 // method "sliceFactorWad(uint64,uint64)uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1060-1064
    // return abiCall(NebulaCalculusStub.prototype.sliceFactorWad, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(deltaT), new UintN64(this.last_apr_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1064
    // }).returnValue.native
    btoi
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1127
    // if (simpleWad === 0) {
    bnz accrueMarket_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:153
    // last_accrual_ts = GlobalState<uint64>()
    bytec 31 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1128
    // this.last_accrual_ts.value = now
    frame_dig 3
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1129
    // return 0
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1135
    // const [hiI, loI] = mulw(oldIndex, simpleWad)
    dup
    frame_dig 1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1136
    // const incrIndex: uint64 = divw(hiI, loI, INDEX_SCALE)
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1137
    // const newIndex: uint64 = oldIndex + incrIndex
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    bytec 12 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1138
    // this.borrow_index_wad.value = newIndex
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1144
    // let interest: uint64 = 0
    intc_0 // 0
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1145
    // if (totalBefore > 0) {
    bz accrueMarket_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1146
    // const [hiB, loB] = mulw(totalBefore, simpleWad)
    frame_dig 2
    frame_dig 1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1147
    // interest = divw(hiB, loB, INDEX_SCALE)
    divw
    frame_bury 0

accrueMarket_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:106
    // protocol_share_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 42 // "protocol_share_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1152
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1153-1157
    // const split = abiCall(NebulaCalculusStub.prototype.aprSplit, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(interest), new UintN64(protoBps)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1155
    // args: [new UintN64(interest), new UintN64(protoBps)],
    frame_dig 0
    dup
    cover 3
    itob
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1153-1157
    // const split = abiCall(NebulaCalculusStub.prototype.aprSplit, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(interest), new UintN64(protoBps)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    pushbytes 0xee2418e8 // method "aprSplit(uint64,uint64)(uint64,uint64)"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1153-1157
    // const split = abiCall(NebulaCalculusStub.prototype.aprSplit, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(interest), new UintN64(protoBps)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1158
    // const depositorInterest: uint64 = split.depositorInterest.native
    dup
    intc_3 // 4
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1159
    // const protocolInterest: uint64 = split.protocolInterest.native
    swap
    pushint 12 // 12
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1163
    // this.total_borrows.value = totalBefore + interest
    frame_dig 2
    dig 3
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1163
    // this.total_borrows.value = totalBefore + interest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1166
    // this.total_deposits.value += depositorInterest
    uncover 2
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1166
    // this.total_deposits.value += depositorInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1169
    // this.fee_pool.value += protocolInterest
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    bytec 16 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1169
    // this.fee_pool.value += protocolInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:153
    // last_accrual_ts = GlobalState<uint64>()
    bytec 31 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1172
    // this.last_accrual_ts.value = now
    frame_dig 3
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1176
    // return interest
    frame_bury 0
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getLoanRecord(borrowerAddress: bytes) -> bytes:
getLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1184-1185
    // @abimethod({ allowActions: 'NoOp' })
    // public getLoanRecord(borrowerAddress: Account): LoanRecord {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1186
    // return this.loan_record(borrowerAddress).value
    box_get
    assert // Box must have value
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.repayLoanASA(assetTransferTxn: uint64, repaymentAmount: uint64) -> void:
repayLoanASA:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1198-1199
    // @abimethod({ allowActions: 'NoOp' })
    // public repayLoanASA(assetTransferTxn: gtxn.AssetTransferTxn, repaymentAmount: uint64): void {
    proto 2 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1200
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1201
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1202-1206
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1203
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1202-1206
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    ==
    bz repayLoanASA_bool_false@4
    frame_dig -2
    gtxns XferAsset
    frame_dig 1
    ==
    bz repayLoanASA_bool_false@4
    frame_dig -2
    gtxns AssetAmount
    frame_dig -1
    ==
    bz repayLoanASA_bool_false@4
    intc_1 // 1

repayLoanASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1202-1206
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1207
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1209
    // const rec = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1210
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1212
    // assert(repaymentAmount <= liveDebt)
    frame_dig -1
    dig 1
    <=
    assert
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1214
    // const remainingDebt: uint64 = liveDebt - repaymentAmount
    frame_dig -1
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1217
    // this.total_borrows.value -= repaymentAmount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1217
    // this.total_borrows.value -= repaymentAmount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1218
    // this.addCash(repaymentAmount)
    frame_dig -1
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1220
    // if (remainingDebt === 0) {
    bnz repayLoanASA_else_body@8
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1221
    // this.loan_record(op.Txn.sender).delete()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1221
    // this.loan_record(op.Txn.sender).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1222
    // this.active_loan_records.value -= 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1222
    // this.active_loan_records.value -= 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1224-1231
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1226
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1227
    // xferAsset: rec.collateralTokenId.native,
    swap
    dup
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1228
    // assetAmount: rec.collateralAmount.native,
    swap
    pushint 40 // 40
    extract_uint64
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1224-1230
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1224-1231
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub

repayLoanASA_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1235
    // borrowerAddress: new Address(op.Txn.sender.bytes),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1236
    // collateralTokenId: rec.collateralTokenId,
    swap
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1237
    // collateralAmount: rec.collateralAmount,
    swap
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1240
    // amount: new UintN64(repaymentAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1241
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1239-1243
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1242
    // changeType: new UintN8(2), // repay
    pushbytes 0x02
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1239-1243
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1244
    // principal: new UintN64(remainingDebt),
    frame_dig 0
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1245
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1234-1246
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1234
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1234-1246
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    retsub

repayLoanASA_bool_false@4:
    intc_0 // 0
    b repayLoanASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.withdrawPlatformFees(paymentReceiver: bytes, feeTxn: uint64) -> void:
withdrawPlatformFees:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1255-1256
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawPlatformFees(paymentReceiver: Account, feeTxn: gtxn.PaymentTxn): void {
    proto 2 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1257
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1257
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1258
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1259-1263
    // assertMatch(feeTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: STANDARD_TXN_FEE,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1260
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1259-1263
    // assertMatch(feeTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: STANDARD_TXN_FEE,
    // })
    ==
    bz withdrawPlatformFees_bool_false@4
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1261
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1259-1263
    // assertMatch(feeTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: STANDARD_TXN_FEE,
    // })
    ==
    bz withdrawPlatformFees_bool_false@4
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1259-1263
    // assertMatch(feeTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: STANDARD_TXN_FEE,
    // })
    ==
    bz withdrawPlatformFees_bool_false@4
    intc_1 // 1

withdrawPlatformFees_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1259-1263
    // assertMatch(feeTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: STANDARD_TXN_FEE,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1264
    // const payout: uint64 = this.fee_pool.value + this.current_accumulated_commission.value
    +
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1265
    // if (payout > 0) {
    bz withdrawPlatformFees_after_if_else@8
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1266-1273
    // itxn
    //   .assetTransfer({
    //     assetReceiver: paymentReceiver,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: payout,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1269
    // xferAsset: this.base_token_id.value.native,
    btoi
    frame_dig 0
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -2
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1266-1272
    // itxn
    //   .assetTransfer({
    //     assetReceiver: paymentReceiver,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: payout,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1266-1273
    // itxn
    //   .assetTransfer({
    //     assetReceiver: paymentReceiver,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: payout,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1275
    // this.removeCash(payout)
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    bytec 16 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1276
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 18 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1277
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put

withdrawPlatformFees_after_if_else@8:
    retsub

withdrawPlatformFees_bool_false@4:
    intc_0 // 0
    b withdrawPlatformFees_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.buyoutSplitASA(buyer: bytes, debtor: bytes, premiumAxferTxn: uint64, repayAxferTxn: uint64, lstAppId: uint64, mbrTxn: uint64) -> void:
buyoutSplitASA:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1290-1298
    // @abimethod({ allowActions: 'NoOp' })
    // public buyoutSplitASA(
    //   buyer: Account,
    //   debtor: Account,
    //   premiumAxferTxn: gtxn.AssetTransferTxn, // buyout token (xUSD) PREMIUM
    //   repayAxferTxn: gtxn.AssetTransferTxn, // BASE TOKEN (ASA) full DEBT
    //   lstAppId: uint64, // LST app backing the collateral
    //   mbrTxn: gtxn.PaymentTxn,
    // ): void {
    proto 6 0
    intc_0 // 0
    dup
    pushbytes ""
    dupn 5
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -5
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1299
    // assert(this.loan_record(debtor).exists, 'NO_LOAN_RECORD')
    box_len
    bury 1
    assert // NO_LOAN_RECORD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1300
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1302-1306
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: BUYOUT_MBR,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1303
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1302-1306
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: BUYOUT_MBR,
    // })
    ==
    bz buyoutSplitASA_bool_false@4
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1304
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1302-1306
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: BUYOUT_MBR,
    // })
    ==
    bz buyoutSplitASA_bool_false@4
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:16
    // export const BUYOUT_MBR: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1302-1306
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: BUYOUT_MBR,
    // })
    ==
    bz buyoutSplitASA_bool_false@4
    intc_1 // 1

buyoutSplitASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1302-1306
    // assertMatch(mbrTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: BUYOUT_MBR,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1309
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1312
    // const rec = this.loan_record(debtor).value.copy()
    frame_dig 8
    box_get
    swap
    dup
    cover 2
    frame_bury 1
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1313
    // const collateralAmount: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    cover 2
    frame_bury 4
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1314
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1317
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    pop
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1318
    // assert(debtBase > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1321
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collateralTokenId, collateralAmount, lstAppId)
    swap
    uncover 2
    frame_dig -2
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1322
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    swap
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1323
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1324
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1326
    // const buyoutTokenId: uint64 = this.buyout_token_id.value.native
    btoi
    dup
    cover 3
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1327
    // const buyoutTokenPrice: uint64 = this.getOraclePrice(this.buyout_token_id.value) // USD per token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1329-1338
    // const premiumData = abiCall(NebulaCalculusStub.prototype.buyoutPremium, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralUSD),
    //     new UintN64(debtUSDv),
    //     new UintN64(this.liq_threshold_bps.value),
    //     new UintN64(buyoutTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1332
    // new UintN64(collateralUSD),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1333
    // new UintN64(debtUSDv),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:100
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1334
    // new UintN64(this.liq_threshold_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1335
    // new UintN64(buyoutTokenPrice),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1329-1338
    // const premiumData = abiCall(NebulaCalculusStub.prototype.buyoutPremium, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralUSD),
    //     new UintN64(debtUSDv),
    //     new UintN64(this.liq_threshold_bps.value),
    //     new UintN64(buyoutTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    pushbytes 0x621e37d3 // method "buyoutPremium(uint64,uint64,uint64,uint64)(uint64,uint64,uint64)"
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1329-1338
    // const premiumData = abiCall(NebulaCalculusStub.prototype.buyoutPremium, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralUSD),
    //     new UintN64(debtUSDv),
    //     new UintN64(this.liq_threshold_bps.value),
    //     new UintN64(buyoutTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1340
    // const ltvBps: uint64 = premiumData.ltvBps.native
    dup
    intc_3 // 4
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:100
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1341
    // assert(ltvBps < this.liq_threshold_bps.value, 'NOT_BUYOUT_ELIGIBLE')
    <
    assert // NOT_BUYOUT_ELIGIBLE
    pushint 20 // 20
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1344
    // const premiumTokens: uint64 = premiumData.premiumTokens.native
    extract_uint64
    dup
    frame_bury 6
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1346
    // assert(premiumAxferTxn.assetReceiver === Global.currentApplicationAddress, 'INVALID_RECEIVER')
    frame_dig -4
    gtxns AssetReceiver
    global CurrentApplicationAddress
    ==
    assert // INVALID_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1347
    // assert(premiumAxferTxn.xferAsset === Asset(buyoutTokenId), 'INVALID_XFER_ASSET')
    frame_dig -4
    gtxns XferAsset
    uncover 2
    ==
    assert // INVALID_XFER_ASSET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1348
    // assert(premiumAxferTxn.assetAmount >= premiumTokens, 'INVALID_BUYOUT_AMOUNT')
    frame_dig -4
    gtxns AssetAmount
    dup
    dig 2
    >=
    assert // INVALID_BUYOUT_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1351
    // const refund: uint64 = paidAmount - premiumTokens
    swap
    -
    frame_bury 7
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1354
    // const baseAssetId = this.base_token_id.value.native
    btoi
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1355-1360
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt
    // })
    frame_dig -3
    gtxns Sender
    frame_dig -6
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1357
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1355-1360
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt
    // })
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -3
    gtxns XferAsset
    frame_dig 2
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -3
    gtxns AssetAmount
    frame_dig 5
    ==
    bz buyoutSplitASA_bool_false@11
    intc_1 // 1

buyoutSplitASA_bool_merge@12:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1355-1360
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1363
    // this.loan_record(debtor).delete()
    frame_dig 8
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1364
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1364
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1366-1373
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1369
    // xferAsset: collateralTokenId.native,
    frame_dig 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1314
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1369
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 4
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -6
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1366-1372
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1366-1373
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1377
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1378
    // const updatedTotal: uint64 = acVal.totalCollateral.native - collateralAmount
    dup
    pushint 24 // 24
    extract_uint64
    uncover 3
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1380
    // assetId: acVal.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1381
    // baseAssetId: acVal.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1382
    // totalCollateral: new UintN64(updatedTotal),
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1383
    // marketBaseAssetId: acVal.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1384
    // originatingAppId: acVal.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1379-1385
    // this.accepted_collaterals(acKey).value = new AcceptedCollateral({
    //   assetId: acVal.assetId,
    //   baseAssetId: acVal.baseAssetId,
    //   totalCollateral: new UintN64(updatedTotal),
    //   marketBaseAssetId: acVal.marketBaseAssetId,
    //   originatingAppId: acVal.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 2
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1388
    // this.total_borrows.value = this.total_borrows.value - debtBase
    frame_dig 5
    dup
    cover 2
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1388
    // this.total_borrows.value = this.total_borrows.value - debtBase
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1389
    // this.addCash(debtBase)
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1417
    // const halfPremium: uint64 = premiumTokens / 2
    frame_dig 6
    dup
    pushint 2 // 2
    /
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1419-1426
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    dig 1
    itxn_field AssetAmount
    frame_dig 3
    dup
    cover 3
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1419-1425
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1419-1426
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1428-1435
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1432
    // assetAmount: premiumTokens - halfPremium, // cover odd token if any
    uncover 2
    swap
    -
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1428-1434
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1428-1435
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1394
    // if (refund > 0) {
    frame_dig 7
    bz buyoutSplitASA_after_if_else@16
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1395-1402
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 7
    itxn_field AssetAmount
    frame_dig 3
    itxn_field XferAsset
    frame_dig -6
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1395-1401
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1395-1402
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

buyoutSplitASA_after_if_else@16:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1406
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1406
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

buyoutSplitASA_bool_false@11:
    intc_0 // 0
    b buyoutSplitASA_bool_merge@12

buyoutSplitASA_bool_false@4:
    intc_0 // 0
    b buyoutSplitASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.debtUSD(debtBaseUnits: uint64) -> uint64:
debtUSD:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1443
    // private debtUSD(debtBaseUnits: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1444
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1445
    // const baseTokenPrice: uint64 = this.getOraclePrice(this.base_token_id.value) // price of market base token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1446-1450
    // return abiCall(NebulaCalculusStub.prototype.baseValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtBaseUnits), new UintN64(baseTokenPrice)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1448
    // args: [new UintN64(debtBaseUnits), new UintN64(baseTokenPrice)],
    frame_dig -1
    itob
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1446-1450
    // return abiCall(NebulaCalculusStub.prototype.baseValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtBaseUnits), new UintN64(baseTokenPrice)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x40b4008c // method "baseValueUSD(uint64,uint64)uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1446-1450
    // return abiCall(NebulaCalculusStub.prototype.baseValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtBaseUnits), new UintN64(baseTokenPrice)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1450
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1446-1450
    // return abiCall(NebulaCalculusStub.prototype.baseValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtBaseUnits), new UintN64(baseTokenPrice)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.maxWithdrawableCollateralLST(lstAppId: uint64) -> uint64:
maxWithdrawableCollateralLST:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1458-1459
    // @abimethod({ allowActions: 'NoOp' })
    // public maxWithdrawableCollateralLST(lstAppId: uint64): uint64 {
    proto 1 1
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1460
    // assert(this.loan_record(op.Txn.sender).exists, 'NO_LOAN')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1460
    // assert(this.loan_record(op.Txn.sender).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1461
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1462
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1464
    // const rec = this.loan_record(op.Txn.sender).value.copy()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1464
    // const rec = this.loan_record(op.Txn.sender).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1465
    // const collateral = this.getCollateral(rec.collateralTokenId)
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1466
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1468
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1469
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz maxWithdrawableCollateralLST_after_if_else@2
    pushint 40 // 40
    extract_uint64
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1473
    // rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1474
    // rec.collateralAmount.native,
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1472-1476
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(
    //   rec.collateralTokenId,
    //   rec.collateralAmount.native,
    //   lstAppId,
    // )
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1479
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 3
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1481-1485
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1483
    // args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:97
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 28 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1483
    // args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1481-1485
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    bytec 47 // method "requiredCollateralUsd(uint64,uint64)uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1481-1485
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1485
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1481-1485
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1488
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz maxWithdrawableCollateralLST_after_if_else@5
    intc_0 // 0
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1491
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1494-1497
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 19 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1494-1497
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1498-1501
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1498-1501
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1503
    // const basePrice = this.getOraclePrice(this.getCollateral(rec.collateralTokenId).baseAssetId)
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1505-1514
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1508
    // new UintN64(removableUSD),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1509
    // new UintN64(circulatingLST),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1510
    // new UintN64(totalDeposits),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1511
    // new UintN64(basePrice),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1505-1514
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    bytec 48 // method "lstFromUsd(uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1505-1514
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1514
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1505-1514
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    frame_bury 0
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64) -> void:
withdrawCollateral:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1584-1585
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64): void {
    proto 3 0
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1586
    // assert(amountLST > 0, 'ZERO_AMOUNT')
    frame_dig -3
    assert // ZERO_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1587
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1588
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1588
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1589
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1590
    // this.accrueMarket() // 1) make time current for everyone
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1591
    // const loan = this.loan_record(borrower).value.copy()
    dup
    box_get
    swap
    dup
    cover 2
    cover 3
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1593
    // assert(loan.collateralTokenId.native === collateralTokenId, 'WRONG_COLLATERAL')
    dup
    extract 32 8 // on error: Index access is out of bounds
    cover 2
    pushint 32 // 32
    extract_uint64
    frame_dig -2
    ==
    assert // WRONG_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1595
    // const acKey = new AcceptedCollateralKey({ assetId: new UintN64(collateralTokenId) })
    frame_dig -2
    itob
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1596
    // assert(this.accepted_collaterals(acKey).exists, 'BAD_COLLATERAL')
    dup
    box_len
    bury 1
    assert // BAD_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1597
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1598
    // assert(acVal.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1524
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1525
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1526
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1528
    // const rec = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1529
    // const collateral = this.getCollateral(rec.collateralTokenId)
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1530
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1531
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1532
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz withdrawCollateral_after_if_else@4
    pushint 40 // 40
    extract_uint64

withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1601
    // assert(amountLST <= maxSafe, 'EXCEEDS_LIMITS')
    frame_dig -3
    >=
    assert // EXCEEDS_LIMITS
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1602
    // assert(amountLST < loan.collateralAmount.native, 'INSUFFICIENT_COLLATERAL')
    frame_dig 5
    dup
    pushint 40 // 40
    extract_uint64
    frame_dig -3
    dig 1
    <
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1603
    // const remainLST: uint64 = loan.collateralAmount.native - amountLST
    frame_dig -3
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1606-1613
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -3
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    frame_dig 3
    dup
    cover 2
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1606-1612
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1606-1613
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1619
    // collateralAmount: new UintN64(remainLST),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1622
    // amount: new UintN64(amountLST),
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1623
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1621-1625
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1624
    // changeType: new UintN8(3), // 3 = collateral withdraw
    pushbytes 0x03
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1621-1625
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1626
    // principal: loan.principal, // unchanged
    dig 4
    extract 73 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1627
    // userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    uncover 5
    extract 81 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1616-1628
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: new UintN64(collateralTokenId),
    //   collateralAmount: new UintN64(remainLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(amountLST),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(3), // 3 = collateral withdraw
    //   }),
    //   principal: loan.principal, // unchanged
    //   userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    // })
    uncover 5
    frame_dig 7
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1629
    // this.loan_record(borrower).value = newRec.copy()
    frame_dig 4
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1632
    // this.reduceCollateralTotal(loan.collateralTokenId, amountLST)
    frame_dig 6
    frame_dig -3
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1635
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1635
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

withdrawCollateral_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1536
    // rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1537
    // rec.collateralAmount.native,
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1535-1539
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(
    //   rec.collateralTokenId,
    //   rec.collateralAmount.native,
    //   lstAppId,
    // )
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1541
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 8
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1542-1546
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1544
    // args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:97
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 28 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1544
    // args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1542-1546
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    bytec 47 // method "requiredCollateralUsd(uint64,uint64)uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1542-1546
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1546
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1542-1546
    // const requiredCollateralUSD: uint64 = abiCall(NebulaCalculusStub.prototype.requiredCollateralUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(this.ltv_bps.value)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1549
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz withdrawCollateral_after_if_else@6
    intc_0 // 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1600
    // const maxSafe = this.maxWithdrawableCollateralLSTLocal(borrower, lstAppId)
    b withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7

withdrawCollateral_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1552
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1555-1558
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 19 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1555-1558
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1559-1562
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1559-1562
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1564
    // const basePrice = this.getOraclePrice(this.getCollateral(rec.collateralTokenId).baseAssetId)
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1566-1575
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1569
    // new UintN64(removableUSD),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1570
    // new UintN64(circulatingLST),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1571
    // new UintN64(totalDeposits),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1572
    // new UintN64(basePrice),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1566-1575
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    bytec 48 // method "lstFromUsd(uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1566-1575
    // return abiCall(NebulaCalculusStub.prototype.lstFromUsd, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(removableUSD),
    //     new UintN64(circulatingLST),
    //     new UintN64(totalDeposits),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1575
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1600
    // const maxSafe = this.maxWithdrawableCollateralLSTLocal(borrower, lstAppId)
    b withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.liquidatePartialASA(debtor: bytes, repayAxfer: uint64, repayBaseAmount: uint64, lstAppId: uint64) -> void:
liquidatePartialASA:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1645-1651
    // @abimethod({ allowActions: 'NoOp' })
    // public liquidatePartialASA(
    //   debtor: Account,
    //   repayAxfer: gtxn.AssetTransferTxn, // liquidator pays base token (ASA)
    //   repayBaseAmount: uint64, // amount to repay in base units ( live debt)
    //   lstAppId: uint64, // LST app backing the collateral
    // ): void {
    proto 4 0
    intc_0 // 0
    pushbytes ""
    dupn 14
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1652
    // assert(this.loan_record(debtor).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1653
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1654
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1656
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1657
    // const collTok: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1658
    // const collLSTBal: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1659
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1660
    // assert(liveDebt > 0, 'NO_DEBT')
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1661
    // assert(repayBaseAmount > 0 && repayBaseAmount <= liveDebt, 'BAD_REPAY')
    frame_dig -2
    bz liquidatePartialASA_bool_false@3
    frame_dig -2
    frame_dig 21
    <=
    bz liquidatePartialASA_bool_false@3
    intc_1 // 1

liquidatePartialASA_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1661
    // assert(repayBaseAmount > 0 && repayBaseAmount <= liveDebt, 'BAD_REPAY')
    assert // BAD_REPAY
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig 18
    dup
    cover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    swap
    frame_bury 0
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1665
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collTok, collLSTBal, lstAppId)
    frame_dig 19
    frame_dig -1
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1666
    // const debtUSDv: uint64 = this.debtUSD(liveDebt)
    frame_dig 21
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1667
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1668
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1670-1674
    // const ltvBps: uint64 = abiCall(NebulaCalculusStub.prototype.ltvBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(collateralUSD)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1672
    // args: [new UintN64(debtUSDv), new UintN64(collateralUSD)],
    swap
    itob
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1670-1674
    // const ltvBps: uint64 = abiCall(NebulaCalculusStub.prototype.ltvBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(collateralUSD)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0xbacd5578 // method "ltvBps(uint64,uint64)uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1670-1674
    // const ltvBps: uint64 = abiCall(NebulaCalculusStub.prototype.ltvBps, {
    //   appId: this.math_helper_app_id.value,
    //   args: [new UintN64(debtUSDv), new UintN64(collateralUSD)],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1674
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:100
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1675
    // assert(ltvBps >= this.liq_threshold_bps.value, 'NOT_LIQUIDATABLE')
    >=
    assert // NOT_LIQUIDATABLE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1678
    // const baseAssetId = this.base_token_id.value.native
    btoi
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1679-1684
    // assertMatch(repayAxfer, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: repayBaseAmount,
    // })
    frame_dig -3
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1680
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1679-1684
    // assertMatch(repayAxfer, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: repayBaseAmount,
    // })
    ==
    bz liquidatePartialASA_bool_false@10
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1681
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1679-1684
    // assertMatch(repayAxfer, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: repayBaseAmount,
    // })
    ==
    bz liquidatePartialASA_bool_false@10
    frame_dig -3
    gtxns XferAsset
    frame_dig 1
    ==
    bz liquidatePartialASA_bool_false@10
    frame_dig -3
    gtxns AssetAmount
    frame_dig -2
    ==
    bz liquidatePartialASA_bool_false@10
    intc_1 // 1

liquidatePartialASA_bool_merge@11:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1679-1684
    // assertMatch(repayAxfer, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: repayBaseAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1687
    // const basePrice = this.getOraclePrice(this.base_token_id.value) // USD
    callsub getOraclePrice
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1688
    // const closeFactorHalf: uint64 = liveDebt / 2
    frame_dig 21
    dup
    pushint 2 // 2
    /
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1689
    // const maxRepayAllowed: uint64 = closeFactorHalf > 0 ? closeFactorHalf : liveDebt
    dup2
    uncover 2
    select
    frame_bury 6
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:181
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 34 // "liq_bonus_bps"
    app_global_get_ex
    swap
    frame_bury 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1692
    // const isFullRepayRequest = repayBaseAmount === liveDebt
    frame_dig -2
    ==
    dup
    frame_bury 5
    frame_dig -2
    frame_bury 11
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1695
    // if (!isFullRepayRequest && repayCandidate > maxRepayAllowed) {
    bnz liquidatePartialASA_after_if_else@14
    frame_dig -2
    frame_dig 6
    >
    frame_dig -2
    frame_bury 11
    bz liquidatePartialASA_after_if_else@14
    frame_dig 6
    frame_bury 11

liquidatePartialASA_after_if_else@14:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1699
    // const repayUSD: uint64 = this.debtUSD(repayCandidate)
    frame_dig 11
    callsub debtUSD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1701
    // const [hSZ, lSZ] = mulw(repayUSD, BASIS_POINTS + bonusBps)
    frame_dig 3
    dup
    cover 3
    +
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1702
    // const seizeUSD: uint64 = divw(hSZ, lSZ, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1704-1707
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 19 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1704-1707
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1708-1711
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1708-1711
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1713
    // const underlyingPrice = this.getOraclePrice(collateralInfo.baseAssetId)
    frame_dig 0
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1716-1726
    // const seizeLST: uint64 = abiCall(NebulaCalculusStub.prototype.seizeLSTFromUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeUSD),
    //     new UintN64(underlyingPrice),
    //     new UintN64(circ),
    //     new UintN64(total),
    //     new UintN64(collLSTBal),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1719
    // new UintN64(seizeUSD),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1720
    // new UintN64(underlyingPrice),
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1721
    // new UintN64(circ),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1722
    // new UintN64(total),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1723
    // new UintN64(collLSTBal),
    frame_dig 19
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1716-1726
    // const seizeLST: uint64 = abiCall(NebulaCalculusStub.prototype.seizeLSTFromUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeUSD),
    //     new UintN64(underlyingPrice),
    //     new UintN64(circ),
    //     new UintN64(total),
    //     new UintN64(collLSTBal),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0xa579b03b // method "seizeLSTFromUSD(uint64,uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 4
    itxn_field ApplicationArgs
    dig 3
    itxn_field ApplicationArgs
    dig 2
    itxn_field ApplicationArgs
    dig 1
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1716-1726
    // const seizeLST: uint64 = abiCall(NebulaCalculusStub.prototype.seizeLSTFromUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeUSD),
    //     new UintN64(underlyingPrice),
    //     new UintN64(circ),
    //     new UintN64(total),
    //     new UintN64(collLSTBal),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1726
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1716-1726
    // const seizeLST: uint64 = abiCall(NebulaCalculusStub.prototype.seizeLSTFromUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeUSD),
    //     new UintN64(underlyingPrice),
    //     new UintN64(circ),
    //     new UintN64(total),
    //     new UintN64(collLSTBal),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    dup
    frame_bury 14
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1727
    // assert(seizeLST > 0, 'NOTHING_TO_SEIZE')
    dup
    assert // NOTHING_TO_SEIZE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1729-1740
    // let repaySupported: uint64 = abiCall(NebulaCalculusStub.prototype.repayBaseFromSeizedLST, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeLST),
    //     new UintN64(total),
    //     new UintN64(circ),
    //     new UintN64(underlyingPrice),
    //     new UintN64(bonusBps),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1732
    // new UintN64(seizeLST),
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1736
    // new UintN64(bonusBps),
    uncover 5
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1737
    // new UintN64(basePrice),
    frame_dig 2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1729-1740
    // let repaySupported: uint64 = abiCall(NebulaCalculusStub.prototype.repayBaseFromSeizedLST, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeLST),
    //     new UintN64(total),
    //     new UintN64(circ),
    //     new UintN64(underlyingPrice),
    //     new UintN64(bonusBps),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x0f91a0b6 // method "repayBaseFromSeizedLST(uint64,uint64,uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1729-1740
    // let repaySupported: uint64 = abiCall(NebulaCalculusStub.prototype.repayBaseFromSeizedLST, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeLST),
    //     new UintN64(total),
    //     new UintN64(circ),
    //     new UintN64(underlyingPrice),
    //     new UintN64(bonusBps),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1740
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1729-1740
    // let repaySupported: uint64 = abiCall(NebulaCalculusStub.prototype.repayBaseFromSeizedLST, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(seizeLST),
    //     new UintN64(total),
    //     new UintN64(circ),
    //     new UintN64(underlyingPrice),
    //     new UintN64(bonusBps),
    //     new UintN64(basePrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    dup
    frame_bury 12
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1741
    // if (repaySupported > liveDebt) {
    frame_dig 21
    >
    bz liquidatePartialASA_after_if_else@20
    frame_dig 21
    frame_bury 12

liquidatePartialASA_after_if_else@20:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1745
    // if (seizeLST === collLSTBal) {
    frame_dig 14
    frame_dig 19
    ==
    dup
    frame_bury 15
    bz liquidatePartialASA_after_if_else@22
    frame_dig -2
    frame_bury 11

liquidatePartialASA_after_if_else@22:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1750
    // const proposedRepayUsed: uint64 = repayCandidate <= repaySupported ? repayCandidate : repaySupported
    frame_dig 11
    dup
    frame_dig 12
    dup
    cover 2
    <=
    swap
    cover 2
    select
    frame_bury 8
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1752
    // if (!isFullRepayRequest && seizeLST === collLSTBal && proposedRepayUsed < liveDebt) {
    frame_dig 5
    bnz liquidatePartialASA_after_if_else@26
    frame_dig 15
    bz liquidatePartialASA_after_if_else@26
    frame_dig 8
    frame_dig 21
    <
    !
    assert // FULL_REPAY_REQUIRED

liquidatePartialASA_after_if_else@26:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1756
    // const repayUsed: uint64 = isFullRepayRequest ? repayBaseAmount : proposedRepayUsed
    frame_dig 8
    frame_dig -2
    frame_dig 5
    dup
    cover 3
    select
    dup
    frame_bury 13
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1757
    // assert(repayUsed > 0, 'ZERO_REPAY_USED')
    assert // ZERO_REPAY_USED
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1758
    // const refundAmount: uint64 = isFullRepayRequest ? 0 : repayBaseAmount - repayUsed
    bz liquidatePartialASA_ternary_false@28
    intc_0 // 0
    frame_bury 9

liquidatePartialASA_ternary_merge@29:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1761-1768
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1763
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1764
    // xferAsset: collTok.native,
    frame_dig 17
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1657
    // const collTok: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1764
    // xferAsset: collTok.native,
    extract_uint64
    dup
    frame_bury 4
    frame_dig 14
    dup
    cover 3
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1761-1767
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1761-1768
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1770
    // const remainingLST: uint64 = collLSTBal - seizeLST
    frame_dig 19
    dig 1
    -
    frame_bury 10
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1771
    // const newDebtBase: uint64 = liveDebt - repayUsed
    frame_dig 21
    frame_dig 13
    dup
    cover 3
    -
    frame_bury 7
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1774
    // this.reduceCollateralTotal(collTok, seizeLST)
    frame_dig 18
    swap
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1775
    // this.total_borrows.value = this.total_borrows.value - repayUsed
    dig 1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1775
    // this.total_borrows.value = this.total_borrows.value - repayUsed
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1776
    // this.addCash(repayUsed)
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1778
    // if (refundAmount > 0) {
    frame_dig 9
    bz liquidatePartialASA_after_if_else@33
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1779-1786
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: baseAssetId,
    //     assetAmount: refundAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1781
    // assetReceiver: op.Txn.sender,
    txn Sender
    frame_dig 9
    dup
    cover 2
    itxn_field AssetAmount
    frame_dig 1
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1779-1785
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: baseAssetId,
    //     assetAmount: refundAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1779-1786
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: baseAssetId,
    //     assetAmount: refundAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1787
    // this.removeCash(refundAmount)
    callsub removeCash

liquidatePartialASA_after_if_else@33:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1790
    // if (newDebtBase === 0) {
    frame_dig 7
    bnz liquidatePartialASA_else_body@38
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1792
    // if (remainingLST > 0) {
    frame_dig 10
    bz liquidatePartialASA_after_if_else@37
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1793-1800
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 10
    dup
    itxn_field AssetAmount
    frame_dig 4
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1793-1799
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1793-1800
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1801
    // this.reduceCollateralTotal(collTok, remainingLST)
    frame_dig 18
    swap
    callsub reduceCollateralTotal

liquidatePartialASA_after_if_else@37:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1803
    // this.loan_record(debtor).delete()
    frame_dig 16
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1804
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1804
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put

liquidatePartialASA_after_if_else@39:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1823
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:156
    // last_apr_bps = GlobalState<uint64>()
    bytec 14 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1823
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

liquidatePartialASA_else_body@38:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1808
    // borrowerAddress: rec.borrowerAddress,
    frame_dig 20
    dup
    extract 0 32 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1809
    // collateralTokenId: rec.collateralTokenId,
    swap
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1810
    // collateralAmount: new UintN64(remainingLST),
    frame_dig 10
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1812
    // principal: new UintN64(newDebtBase),
    frame_dig 7
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1813
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1815
    // amount: new UintN64(repayUsed),
    frame_dig 13
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1816
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1814-1818
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4), // 4 = liquidation repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1817
    // changeType: new UintN8(4), // 4 = liquidation repay
    pushbytes 0x04
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1814-1818
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4), // 4 = liquidation repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1807-1819
    // const newRec = new LoanRecord({
    //   borrowerAddress: rec.borrowerAddress,
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: new UintN64(remainingLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   principal: new UintN64(newDebtBase),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(4), // 4 = liquidation repay
    //   }),
    // })
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    swap
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1820
    // this.loan_record(debtor).value = newRec.copy()
    frame_dig 16
    swap
    box_put
    b liquidatePartialASA_after_if_else@39

liquidatePartialASA_ternary_false@28:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1758
    // const refundAmount: uint64 = isFullRepayRequest ? 0 : repayBaseAmount - repayUsed
    frame_dig -2
    frame_dig 13
    -
    frame_bury 9
    b liquidatePartialASA_ternary_merge@29

liquidatePartialASA_bool_false@10:
    intc_0 // 0
    b liquidatePartialASA_bool_merge@11

liquidatePartialASA_bool_false@3:
    intc_0 // 0
    b liquidatePartialASA_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getLoanStatus(borrower: bytes) -> uint64, uint64, uint64, uint64, uint64, uint64, uint64:
getLoanStatus:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1833-1842
    // @abimethod({ allowActions: 'NoOp' })
    // getLoanStatus(borrower: Account): {
    //   outstandingDebt: uint64
    //   collateralValueUSD: uint64
    //   collateralAmount: uint64
    //   collateralRatioBps: uint64
    //   liquidationThresholdBps: uint64
    //   eligibleForLiquidation: boolean
    //   eligibleForBuyout: boolean
    // } {
    proto 1 7
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:169
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 8 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1843
    // assert(this.loan_record(borrower).exists, 'Loan record does not exist')
    dup
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1844
    // const record = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1845
    // const collateralRecord = this.getCollateral(record.collateralTokenId)
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1846
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1847
    // const debt: uint64 = this.currentDebtFromSnapshot(record)
    swap
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1848
    // const collateralAmount: uint64 = record.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:100
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1852
    // record.collateralTokenId,
    uncover 2
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1854
    // collateralRecord.originatingAppId.native,
    uncover 4
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1851-1855
    // const collateralValueUSD: uint64 = this.calculateCollateralValueUSD(
    //   record.collateralTokenId,
    //   collateralAmount,
    //   collateralRecord.originatingAppId.native,
    // )
    dig 3
    swap
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1857
    // const CR: uint64 = (collateralValueUSD * BASIS_POINTS) / debt
    dup
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1857
    // const CR: uint64 = (collateralValueUSD * BASIS_POINTS) / debt
    *
    dig 4
    /
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1858
    // const eligibleForLiquidation = CR < liqBps
    dup
    dig 3
    <
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1859
    // const eligibleForBuyout = CR > liqBps
    dig 1
    dig 4
    >
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1861-1869
    // return {
    //   outstandingDebt: debt,
    //   collateralValueUSD: collateralValueUSD,
    //   collateralAmount: collateralAmount,
    //   collateralRatioBps: CR,
    //   liquidationThresholdBps: liqBps,
    //   eligibleForLiquidation,
    //   eligibleForBuyout,
    // }
    uncover 6
    uncover 4
    uncover 6
    uncover 5
    uncover 6
    uncover 6
    uncover 6
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getCirculatingLST() -> uint64:
getCirculatingLST:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1877
    // return this.circulating_lst.value
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getTotalDeposits() -> uint64:
getTotalDeposits:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1885
    // return this.total_deposits.value
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.getAcceptedCollateralsCount() -> uint64:
getAcceptedCollateralsCount:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1893
    // return this.accepted_collaterals_count.value
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.calculateCollateralValueUSD(collateralTokenId: bytes, collateralAmount: uint64, lstApp: uint64) -> uint64:
calculateCollateralValueUSD:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1937
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    proto 3 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    frame_dig -3
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:515
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1939
    // assert(this.collateralExists(collateralTokenId), 'unknown collateral')
    assert // unknown collateral
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:525
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1941
    // assert(collateralInfo.originatingAppId.native === lstApp, 'mismatched LST app')
    dup
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1942
    // assert(this.mathHelperConfigured(), 'MATH_HELPER_NOT_SET')
    assert // MATH_HELPER_NOT_SET
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1944-1947
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 19 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1944-1947
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1949-1952
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1949-1952
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1954
    // const baseTokenPrice = this.getOraclePrice(collateralInfo.baseAssetId)
    uncover 2
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1956-1965
    // return abiCall(NebulaCalculusStub.prototype.collateralValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralAmount),
    //     new UintN64(totalDepositsExternal),
    //     new UintN64(circulatingExternalLST),
    //     new UintN64(baseTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1959
    // new UintN64(collateralAmount),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1960
    // new UintN64(totalDepositsExternal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1961
    // new UintN64(circulatingExternalLST),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1962
    // new UintN64(baseTokenPrice),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1956-1965
    // return abiCall(NebulaCalculusStub.prototype.collateralValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralAmount),
    //     new UintN64(totalDepositsExternal),
    //     new UintN64(circulatingExternalLST),
    //     new UintN64(baseTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    pushbytes 0x8b7872cd // method "collateralValueUSD(uint64,uint64,uint64,uint64)uint64"
    itxn_field ApplicationArgs
    uncover 3
    itxn_field ApplicationArgs
    uncover 2
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1956-1965
    // return abiCall(NebulaCalculusStub.prototype.collateralValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralAmount),
    //     new UintN64(totalDepositsExternal),
    //     new UintN64(circulatingExternalLST),
    //     new UintN64(baseTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_0 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1965
    // }).returnValue.native
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:1956-1965
    // return abiCall(NebulaCalculusStub.prototype.collateralValueUSD, {
    //   appId: this.math_helper_app_id.value,
    //   args: [
    //     new UintN64(collateralAmount),
    //     new UintN64(totalDepositsExternal),
    //     new UintN64(circulatingExternalLST),
    //     new UintN64(baseTokenPrice),
    //   ],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue.native
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.pickupASARewards() -> void:
pickupASARewards:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2079-2080
    // @abimethod({ allowActions: 'NoOp' })
    // pickupASARewards(): void {
    proto 0 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2081
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:81
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2081
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    ==
    assert // Only admin can pickup rewards
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 6 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2082
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2084
    // const baseAsset = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2085
    // const assetBalance = baseAsset.balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    swap
    asset_holding_get AssetBalance
    swap
    dup
    uncover 2
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2087
    // if (assetBalance <= this.cash_on_hand.value) {
    <=
    bz pickupASARewards_after_if_else@2
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2088
    // return // nothing new arrived
    retsub

pickupASARewards_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2091
    // const rawReward: uint64 = assetBalance - this.cash_on_hand.value
    frame_dig 1
    swap
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/config.algo.ts:14
    // export const MINIMUM_ADDITIONAL_REWARD: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2092
    // if (rawReward <= MINIMUM_ADDITIONAL_REWARD) {
    <=
    bz pickupASARewards_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2093
    // return
    retsub

pickupASARewards_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2096
    // this.addCash(rawReward)
    frame_dig 0
    dup
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:189
    // commission_percentage = GlobalState<uint64>()
    intc_0 // 0
    bytec 32 // "commission_percentage"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2098
    // const [hi, lo] = mulw(rawReward, this.commission_percentage.value)
    dig 1
    mulw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2099
    // const commission: uint64 = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2101
    // this.current_accumulated_commission.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 18 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2101
    // this.current_accumulated_commission.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:193
    // total_commission_earned = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "total_commission_earned"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2102
    // this.total_commission_earned.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:193
    // total_commission_earned = GlobalState<uint64>()
    bytec 25 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2102
    // this.total_commission_earned.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2104
    // const netReward: uint64 = rawReward - commission
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:195
    // total_additional_rewards = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "total_additional_rewards"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2105
    // this.total_additional_rewards.value += netReward
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:195
    // total_additional_rewards = GlobalState<uint64>()
    bytec 26 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2105
    // this.total_additional_rewards.value += netReward
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2106
    // this.total_deposits.value += netReward
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2106
    // this.total_deposits.value += netReward
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.migrateCollateralTokenId(collateralTokenId: uint64, mbrTxn: uint64) -> void:
migrateCollateralTokenId:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2109
    // public migrateCollateralTokenId(collateralTokenId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2110
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate collateral')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2110
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate collateral')
    ==
    assert // Only migration admin can migrate collateral
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2112
    // const acKey = new AcceptedCollateralKey({ assetId: new UintN64(collateralTokenId) })
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:166
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 7 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2113
    // assert(this.accepted_collaterals(acKey).exists, 'collateral not found')
    box_len
    bury 1
    assert // collateral not found
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2114
    // const collateralBalance = Asset(collateralTokenId).balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    frame_dig -2
    asset_holding_get AssetBalance
    swap
    dup
    uncover 2
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2115
    // if (collateralBalance > 0) {
    bz migrateCollateralTokenId_after_if_else@3
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2116-2123
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    frame_dig 0
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2116-2122
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2116-2123
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

migrateCollateralTokenId_after_if_else@3:
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.migrateContract(feeTxn: uint64) -> bytes:
migrateContract:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2132-2133
    // @abimethod({ allowActions: 'NoOp' })
    // public migrateContract(feeTxn: gtxn.PaymentTxn): MigrationSnapshot {
    proto 1 1
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2134
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2134
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate')
    ==
    assert // Only migration admin can migrate
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2135
    // this.setContractState(2) // set to migrating
    pushint 2 // 2
    callsub setContractState
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2136-2140
    // assertMatch(feeTxn, {
    //   sender: this.migration_admin.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MIGRATION_FEE,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2136-2140
    // assertMatch(feeTxn, {
    //   sender: this.migration_admin.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MIGRATION_FEE,
    // })
    ==
    bz migrateContract_bool_false@4
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2138
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2136-2140
    // assertMatch(feeTxn, {
    //   sender: this.migration_admin.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MIGRATION_FEE,
    // })
    ==
    bz migrateContract_bool_false@4
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:15
    // export const MIGRATION_FEE: uint64 = 500_000 // 0.5 Algo
    pushint 500000 // 500000
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2136-2140
    // assertMatch(feeTxn, {
    //   sender: this.migration_admin.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MIGRATION_FEE,
    // })
    ==
    bz migrateContract_bool_false@4
    intc_1 // 1

migrateContract_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2136-2140
    // assertMatch(feeTxn, {
    //   sender: this.migration_admin.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: MIGRATION_FEE,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2143
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2144
    // const lstBalance = lstAsset.balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    swap
    asset_holding_get AssetBalance
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2147-2154
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2150
    // xferAsset: this.lst_token_id.value.native,
    btoi
    uncover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2147-2153
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2147-2154
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2156
    // const baseAsset = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2157
    // const assetBalance = baseAsset.balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    swap
    asset_holding_get AssetBalance
    swap
    dup
    cover 2
    frame_bury 0
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2158
    // if (assetBalance > 0) {
    bz migrateContract_after_if_else@9
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2159-2166
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2162
    // xferAsset: this.base_token_id.value.native,
    btoi
    frame_dig 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2159-2165
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2159-2166
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

migrateContract_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2170
    // accepted_collaterals_count: new UintN64(this.accepted_collaterals_count.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2171
    // cash_on_hand: new UintN64(this.cash_on_hand.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2172
    // circulating_lst: new UintN64(this.circulating_lst.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2173
    // total_deposits: new UintN64(this.total_deposits.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2174
    // total_borrows: new UintN64(this.total_borrows.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:195
    // total_additional_rewards = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "total_additional_rewards"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2175
    // total_additional_rewards: new UintN64(this.total_additional_rewards.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:193
    // total_commission_earned = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "total_commission_earned"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2176
    // total_commission_earned: new UintN64(this.total_commission_earned.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2177
    // current_accumulated_commission: new UintN64(this.current_accumulated_commission.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2178
    // fee_pool: new UintN64(this.fee_pool.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2179
    // borrowIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2180
    // base_token_id: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2181
    // lst_token_id: new UintN64(this.lst_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2182
    // buyout_token_id: new UintN64(this.buyout_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:189
    // commission_percentage = GlobalState<uint64>()
    intc_0 // 0
    bytec 32 // "commission_percentage"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2183
    // commission_percentage: new UintN64(this.commission_percentage.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:181
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 34 // "liq_bonus_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2184
    // liq_bonus_bps: new UintN64(this.liq_bonus_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2185
    // active_loan_records: new UintN64(this.active_loan_records.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    intc_0 // 0
    bytec_2 // "math_helper_app_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2186
    // math_helper_app_id: new UintN64(this.math_helper_app_id.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2169-2187
    // return new MigrationSnapshot({
    //   accepted_collaterals_count: new UintN64(this.accepted_collaterals_count.value),
    //   cash_on_hand: new UintN64(this.cash_on_hand.value),
    //   circulating_lst: new UintN64(this.circulating_lst.value),
    //   total_deposits: new UintN64(this.total_deposits.value),
    //   total_borrows: new UintN64(this.total_borrows.value),
    //   total_additional_rewards: new UintN64(this.total_additional_rewards.value),
    //   total_commission_earned: new UintN64(this.total_commission_earned.value),
    //   current_accumulated_commission: new UintN64(this.current_accumulated_commission.value),
    //   fee_pool: new UintN64(this.fee_pool.value),
    //   borrowIndexWad: new UintN64(this.borrow_index_wad.value),
    //   base_token_id: new UintN64(this.base_token_id.value.native),
    //   lst_token_id: new UintN64(this.lst_token_id.value.native),
    //   buyout_token_id: new UintN64(this.buyout_token_id.value.native),
    //   commission_percentage: new UintN64(this.commission_percentage.value),
    //   liq_bonus_bps: new UintN64(this.liq_bonus_bps.value),
    //   active_loan_records: new UintN64(this.active_loan_records.value),
    //   math_helper_app_id: new UintN64(this.math_helper_app_id.value),
    // })
    uncover 13
    uncover 13
    concat
    uncover 13
    concat
    uncover 13
    concat
    uncover 8
    concat
    uncover 7
    concat
    uncover 4
    concat
    uncover 5
    concat
    uncover 5
    concat
    uncover 8
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    swap
    retsub

migrateContract_bool_false@4:
    intc_0 // 0
    b migrateContract_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.acceptMigrationASAContract(lstTransferTxn: uint64, algoTxn: uint64, baseAssetTransferTxn: uint64, snapshot: bytes, migrationAdmin: bytes) -> void:
acceptMigrationASAContract:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2198-2205
    // @abimethod({ allowActions: 'NoOp' })
    // public acceptMigrationASAContract(
    //   lstTransferTxn: gtxn.AssetTransferTxn,
    //   algoTxn: gtxn.PaymentTxn,
    //   baseAssetTransferTxn: gtxn.AssetTransferTxn,
    //   snapshot: MigrationSnapshot,
    //   migrationAdmin: Account,
    // ): void {
    proto 5 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2206
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can accept migration')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:204
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 13 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2206
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can accept migration')
    ==
    assert // Only migration admin can accept migration
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2207-2211
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    frame_dig -5
    gtxns Sender
    frame_dig -1
    ==
    bz acceptMigrationASAContract_bool_false@4
    frame_dig -5
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2209
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2207-2211
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    ==
    bz acceptMigrationASAContract_bool_false@4
    frame_dig -5
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 11 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2210
    // xferAsset: Asset(this.lst_token_id.value.native),
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2207-2211
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    ==
    bz acceptMigrationASAContract_bool_false@4
    intc_1 // 1

acceptMigrationASAContract_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2207-2211
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2212-2215
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    frame_dig -4
    gtxns Sender
    frame_dig -1
    ==
    bz acceptMigrationASAContract_bool_false@8
    frame_dig -4
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2214
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2212-2215
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    ==
    bz acceptMigrationASAContract_bool_false@8
    intc_1 // 1

acceptMigrationASAContract_bool_merge@9:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2212-2215
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2216-2220
    // assertMatch(baseAssetTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    // })
    frame_dig -3
    gtxns Sender
    frame_dig -1
    ==
    bz acceptMigrationASAContract_bool_false@13
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2218
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2216-2220
    // assertMatch(baseAssetTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    // })
    ==
    bz acceptMigrationASAContract_bool_false@13
    frame_dig -3
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_1 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2219
    // xferAsset: Asset(this.base_token_id.value.native),
    btoi
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2216-2220
    // assertMatch(baseAssetTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    // })
    ==
    bz acceptMigrationASAContract_bool_false@13
    intc_1 // 1

acceptMigrationASAContract_bool_merge@14:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2216-2220
    // assertMatch(baseAssetTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2223
    // this.cash_on_hand.value = snapshot.cash_on_hand.native
    frame_dig -2
    pushint 24 // 24
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    bytec 15 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2223
    // this.cash_on_hand.value = snapshot.cash_on_hand.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2224
    // this.total_deposits.value = snapshot.total_deposits.native
    frame_dig -2
    intc_0 // 0
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:71
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2224
    // this.total_deposits.value = snapshot.total_deposits.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2225
    // this.circulating_lst.value = snapshot.circulating_lst.native
    frame_dig -2
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:68
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2225
    // this.circulating_lst.value = snapshot.circulating_lst.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2226
    // this.total_borrows.value = snapshot.total_borrows.native
    frame_dig -2
    pushint 8 // 8
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:147
    // total_borrows = GlobalState<uint64>()
    bytec 5 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2226
    // this.total_borrows.value = snapshot.total_borrows.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2227
    // this.total_additional_rewards.value = snapshot.total_additional_rewards.native
    frame_dig -2
    pushint 112 // 112
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:195
    // total_additional_rewards = GlobalState<uint64>()
    bytec 26 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2227
    // this.total_additional_rewards.value = snapshot.total_additional_rewards.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2228
    // this.total_commission_earned.value = snapshot.total_commission_earned.native
    frame_dig -2
    pushint 104 // 104
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:193
    // total_commission_earned = GlobalState<uint64>()
    bytec 25 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2228
    // this.total_commission_earned.value = snapshot.total_commission_earned.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2229
    // this.current_accumulated_commission.value = snapshot.current_accumulated_commission.native
    frame_dig -2
    pushint 96 // 96
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:191
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 18 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2229
    // this.current_accumulated_commission.value = snapshot.current_accumulated_commission.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2230
    // this.fee_pool.value = snapshot.fee_pool.native
    frame_dig -2
    pushint 64 // 64
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:74
    // fee_pool = GlobalState<uint64>()
    bytec 16 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2230
    // this.fee_pool.value = snapshot.fee_pool.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2231
    // this.borrow_index_wad.value = snapshot.borrowIndexWad.native
    frame_dig -2
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:150
    // borrow_index_wad = GlobalState<uint64>()
    bytec 12 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2231
    // this.borrow_index_wad.value = snapshot.borrowIndexWad.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2232
    // this.accepted_collaterals_count.value = snapshot.accepted_collaterals_count.native
    frame_dig -2
    pushint 72 // 72
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:175
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 21 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2232
    // this.accepted_collaterals_count.value = snapshot.accepted_collaterals_count.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2233
    // this.base_token_id.value = new UintN64(snapshot.base_token_id.native)
    frame_dig -2
    pushint 40 // 40
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:58
    // base_token_id = GlobalState<UintN64>()
    bytec_1 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2233
    // this.base_token_id.value = new UintN64(snapshot.base_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2234
    // this.lst_token_id.value = new UintN64(snapshot.lst_token_id.native)
    frame_dig -2
    pushint 56 // 56
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:61
    // lst_token_id = GlobalState<UintN64>()
    bytec 11 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2234
    // this.lst_token_id.value = new UintN64(snapshot.lst_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2235
    // this.buyout_token_id.value = new UintN64(snapshot.buyout_token_id.native)
    frame_dig -2
    pushint 80 // 80
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:178
    // buyout_token_id = GlobalState<UintN64>()
    bytec 17 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2235
    // this.buyout_token_id.value = new UintN64(snapshot.buyout_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2236
    // this.commission_percentage.value = snapshot.commission_percentage.native
    frame_dig -2
    pushint 48 // 48
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:189
    // commission_percentage = GlobalState<uint64>()
    bytec 32 // "commission_percentage"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2236
    // this.commission_percentage.value = snapshot.commission_percentage.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2237
    // this.liq_bonus_bps.value = snapshot.liq_bonus_bps.native
    frame_dig -2
    pushint 88 // 88
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:181
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 34 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2237
    // this.liq_bonus_bps.value = snapshot.liq_bonus_bps.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2238
    // this.active_loan_records.value = snapshot.active_loan_records.native
    frame_dig -2
    pushint 120 // 120
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:172
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2238
    // this.active_loan_records.value = snapshot.active_loan_records.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2239
    // this.math_helper_app_id.value = snapshot.math_helper_app_id.native
    frame_dig -2
    pushint 128 // 128
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:90
    // math_helper_app_id = GlobalState<uint64>()
    bytec_2 // "math_helper_app_id"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2239
    // this.math_helper_app_id.value = snapshot.math_helper_app_id.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:210
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 6 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2241
    // this.contract_state.value = new UintN64(1) // active
    pushbytes 0x0000000000000001
    app_global_put
    retsub

acceptMigrationASAContract_bool_false@13:
    intc_0 // 0
    b acceptMigrationASAContract_bool_merge@14

acceptMigrationASAContract_bool_false@8:
    intc_0 // 0
    b acceptMigrationASAContract_bool_merge@9

acceptMigrationASAContract_bool_false@4:
    intc_0 // 0
    b acceptMigrationASAContract_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.addCash(amount: uint64) -> void:
addCash:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2248
    // private addCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2249
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    bytec 15 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2249
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts::OrbitalLending.removeCash(amount: uint64) -> void:
removeCash:
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2257
    // private removeCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2258
    // assert(this.cash_on_hand.value >= amount, 'INSUFFICIENT_CASH')
    frame_dig -1
    >=
    assert // INSUFFICIENT_CASH
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2259
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:197
    // cash_on_hand = GlobalState<uint64>()
    bytec 15 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLendingASA.algo.ts:2259
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    swap
    app_global_put
    retsub
