#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 0 1 10000 4 1000000000000 69000000000000 1000000000000000
    bytecblock "base_token_id" "total_borrows" 0x151f7c75 "total_deposits" "admin_account" "contract_state" "accepted_collaterals" "loan_record" "base_token_decimals" "circulating_lst" "active_loan_records" "borrow_index_wad" "last_apr_bps" "cash_on_hand" "fee_pool" "liq_threshold_bps" "accepted_collaterals_count" 0x09ef525f 0xae859f3b "lst_token_id" "buyout_token_id" "liq_bonus_bps" "current_accumulated_commission" "ltv_bps" "base_bps" "util_cap_bps" "last_accrual_ts" "flux_oracle_app" 0x0000000000000000 "kink_norm_bps" "slope1_bps" "slope2_bps" "total_commission_earned" "total_additional_rewards" "origination_fee_bps" "protocol_share_bps" "oracle_app" "prev_apr_bps" "max_apr_bps" "commission_percentage" "deposit_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn NumAppArgs
    bz main_after_if_else@35
    pushbytess 0x3b01665e 0x6c29350a 0xcffce757 0x34b8343e 0x13d67149 0x5cac25a9 0x8dbd47f8 0x58a78322 0xacbb7514 0xc250efa4 0xf445489b 0xd501c95d 0xe9c33c1e 0xb4a74766 0xae99f45b 0xbed00024 0xe4164cb7 0xd1de4b5b 0x18f270bf 0x173b4a34 0x70d451f7 0x3172ca9d 0xfc2185f4 0x71757509 // method "createApplication(account,uint64)void", method "initApplication(uint64,uint64,uint64,uint64,application,uint64,uint64,application)void", method "setRateParams(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)void", method "setContractState(uint64)void", method "generateLSTToken()void", method "configureLSTToken(axfer,uint64)void", method "removeCollateralType(uint64)void", method "updateCollateralOriginationId(uint64,uint64)void", method "addNewCollateralType(uint64,uint64,uint64)void", method "depositAlgo(pay,uint64)void", method "withdrawDeposit(axfer,uint64)void", method "borrow(axfer,uint64,uint64,uint64)void", method "accrueLoanInterest(account)void", method "current_apr_bps()uint64", method "getLoanRecord(account)(address,uint64,uint64,(uint64,uint8,uint64),uint64,uint64,uint64)", method "repayLoanAlgo(pay,uint64)void", method "withdrawPlatformFees(account)void", method "buyoutSplitAlgo(account,account,axfer,pay)void", method "maxWithdrawableCollateralLST()uint64", method "withdrawCollateral(uint64,uint64)void", method "liquidatePartialAlgo(account,pay,uint64,uint64)void", method "gas()void", method "calculateCollateralValueUSD(uint64,uint64)uint64", method "pickupAlgoRewards()void"
    bytec 17 // method "getCirculatingLST()uint64"
    bytec 18 // method "getTotalDeposits()uint64"
    pushbytess 0x6c6337c0 0x400e14fb 0x51ef3b21 // method "getAcceptedCollateralsCount()uint64", method "goOnline(pay,byte[],byte[],byte[],uint64,uint64,uint64)void", method "goOffline()void"
    txna ApplicationArgs 0
    match main_createApplication_route@3 main_initApplication_route@4 main_setRateParams_route@5 main_setContractState_route@6 main_generateLSTToken_route@7 main_configureLSTToken_route@8 main_removeCollateralType_route@9 main_updateCollateralOriginationId_route@10 main_addNewCollateralType_route@11 main_depositAlgo_route@12 main_withdrawDeposit_route@13 main_borrow_route@14 main_accrueLoanInterest_route@15 main_current_apr_bps_route@16 main_getLoanRecord_route@17 main_repayLoanAlgo_route@18 main_withdrawPlatformFees_route@19 main_buyoutSplitAlgo_route@20 main_maxWithdrawableCollateralLST_route@21 main_withdrawCollateral_route@22 main_liquidatePartialAlgo_route@23 main_gas_route@24 main_calculateCollateralValueUSD_route@25 main_pickupAlgoRewards_route@26 main_getCirculatingLST_route@27 main_getTotalDeposits_route@28 main_getAcceptedCollateralsCount_route@29 main_goOnline_route@30 main_goOffline_route@31

main_after_if_else@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    intc_0 // 0
    return

main_goOffline_route@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2023
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub goOffline
    intc_1 // 1
    return

main_goOnline_route@30:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1989
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    extract 2 0
    txna ApplicationArgs 2
    extract 2 0
    txna ApplicationArgs 3
    extract 2 0
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1989
    // @abimethod({ allowActions: 'NoOp' })
    callsub goOnline
    intc_1 // 1
    return

main_getAcceptedCollateralsCount_route@29:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1975
    // getAcceptedCollateralsCount(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getAcceptedCollateralsCount
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getTotalDeposits_route@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1967
    // getTotalDeposits(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getTotalDeposits
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getCirculatingLST_route@27:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1959
    // getCirculatingLST(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getCirculatingLST
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_pickupAlgoRewards_route@26:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1917
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub pickupAlgoRewards
    intc_1 // 1
    return

main_calculateCollateralValueUSD_route@25:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1780
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1780
    // @abimethod({ allowActions: 'NoOp' })
    callsub calculateCollateralValueUSD
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_gas_route@24:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1749
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    intc_1 // 1
    return

main_liquidatePartialAlgo_route@23:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1580
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1580
    // @abimethod({ allowActions: 'NoOp' })
    callsub liquidatePartialAlgo
    intc_1 // 1
    return

main_withdrawCollateral_route@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1445
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1445
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawCollateral
    intc_1 // 1
    return

main_maxWithdrawableCollateralLST_route@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1434
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub maxWithdrawableCollateralLST
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_buyoutSplitAlgo_route@20:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1214
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1214
    // @abimethod({ allowActions: 'NoOp' })
    callsub buyoutSplitAlgo
    intc_1 // 1
    return

main_withdrawPlatformFees_route@19:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawPlatformFees
    intc_1 // 1
    return

main_repayLoanAlgo_route@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1114
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1114
    // @abimethod({ allowActions: 'NoOp' })
    callsub repayLoanAlgo
    intc_1 // 1
    return

main_getLoanRecord_route@17:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1099
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1099
    // @abimethod({ allowActions: 'NoOp' })
    callsub getLoanRecord
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_current_apr_bps_route@16:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:961
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub current_apr_bps
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_accrueLoanInterest_route@15:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:896
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:896
    // @abimethod({ allowActions: 'NoOp' })
    callsub accrueLoanInterest
    intc_1 // 1
    return

main_borrow_route@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:809
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:809
    // @abimethod({ allowActions: 'NoOp' })
    callsub borrow
    intc_1 // 1
    return

main_withdrawDeposit_route@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:722
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:722
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawDeposit
    intc_1 // 1
    return

main_depositAlgo_route@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:657
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:657
    // @abimethod({ allowActions: 'NoOp' })
    callsub depositAlgo
    intc_1 // 1
    return

main_addNewCollateralType_route@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:561
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    txna ApplicationArgs 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:561
    // @abimethod({ allowActions: 'NoOp' })
    callsub addNewCollateralType
    intc_1 // 1
    return

main_updateCollateralOriginationId_route@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:536
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:536
    // @abimethod({ allowActions: 'NoOp' })
    callsub updateCollateralOriginationId
    intc_1 // 1
    return

main_removeCollateralType_route@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:523
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:523
    // @abimethod({ allowActions: 'NoOp' })
    callsub removeCollateralType
    intc_1 // 1
    return

main_configureLSTToken_route@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:374
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:374
    // @abimethod({ allowActions: 'NoOp' })
    callsub configureLSTToken
    intc_1 // 1
    return

main_generateLSTToken_route@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:345
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub generateLSTToken
    intc_1 // 1
    return

main_setContractState_route@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // @abimethod({ allowActions: 'NoOp' })
    callsub setContractState
    intc_1 // 1
    return

main_setRateParams_route@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:296
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txna ApplicationArgs 9
    btoi
    txna ApplicationArgs 10
    btoi
    txna ApplicationArgs 11
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:296
    // @abimethod({ allowActions: 'NoOp' })
    callsub setRateParams
    intc_1 // 1
    return

main_initApplication_route@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:204
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txnas Applications
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txnas Applications
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:204
    // @abimethod({ allowActions: 'NoOp' })
    callsub initApplication
    intc_1 // 1
    return

main_createApplication_route@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:184
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    !
    assert // can only call when creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:37-38
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:184
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    callsub createApplication
    intc_1 // 1
    return


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.createApplication(admin: bytes, baseTokenId: uint64) -> void:
createApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:184-185
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    // public createApplication(admin: Account, baseTokenId: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    bytec 4 // "admin_account"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:186
    // this.admin_account.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:187
    // this.base_token_id.value = new UintN64(baseTokenId)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    bytec_0 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:187
    // this.base_token_id.value = new UintN64(baseTokenId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:168
    // migration_admin = GlobalState<Account>()
    pushbytes "migration_admin"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188
    // this.migration_admin.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 5 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:189
    // this.contract_state.value = new UintN64(0) // inactive
    bytec 28 // 0x0000000000000000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:176
    // contract_version = GlobalState<UintN64>() // contract version number
    pushbytess "contract_version" 0x0000000000000fa0 // "contract_version", 0x0000000000000fa0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:190
    // this.contract_version.value = new UintN64(CONTRACT_VERSION)
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.initApplication(ltv_bps: uint64, liq_threshold_bps: uint64, origination_fee_bps: uint64, protocol_share_bps: uint64, oracle_app_id: uint64, buyout_token_id: uint64, additional_rewards_commission_percentage: uint64, flux_oracle_app_id: uint64) -> void:
initApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:204-214
    // @abimethod({ allowActions: 'NoOp' })
    // public initApplication(
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   origination_fee_bps: uint64,
    //   protocol_share_bps: uint64,
    //   oracle_app_id: Application,
    //   buyout_token_id: uint64,
    //   additional_rewards_commission_percentage: uint64,
    //   flux_oracle_app_id: Application,
    // ): void {
    proto 8 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:215
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:215
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:217
    // assert(additional_rewards_commission_percentage <= 100, 'COMMISSION_TOO_HIGH')
    frame_dig -2
    pushint 100 // 100
    <=
    assert // COMMISSION_TOO_HIGH
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:83
    // ltv_bps = GlobalState<uint64>()
    bytec 23 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:219
    // this.ltv_bps.value = ltv_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 15 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:220
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:89
    // origination_fee_bps = GlobalState<uint64>()
    bytec 34 // "origination_fee_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:221
    // this.origination_fee_bps.value = origination_fee_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:222
    // this.accepted_collaterals_count.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    bytec 14 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:223
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:224
    // this.circulating_lst.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    bytec_3 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:225
    // this.total_deposits.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:226
    // this.active_loan_records.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:92
    // protocol_share_bps = GlobalState<uint64>()
    bytec 35 // "protocol_share_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:227
    // this.protocol_share_bps.value = protocol_share_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:73
    // oracle_app = GlobalState<Application>()
    bytec 36 // "oracle_app"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:228
    // this.oracle_app.value = oracle_app_id
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:50
    // lst_token_id = GlobalState<UintN64>()
    bytec 19 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229
    // this.lst_token_id.value = new UintN64(99)
    pushbytes 0x0000000000000063
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:97
    // base_bps = GlobalState<uint64>()
    bytec 24 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:230
    // this.base_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:123
    // prev_apr_bps = GlobalState<uint64>()
    bytec 37 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:231
    // this.prev_apr_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:94
    // max_apr_bps = GlobalState<uint64>()
    bytec 38 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:232
    // this.max_apr_bps.value = 8000 // 80% APR Cap by Default
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:100
    // util_cap_bps = GlobalState<uint64>()
    bytec 25 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:233
    // this.util_cap_bps.value = 8000 // 80% utilization cap
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:234
    // this.total_borrows.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:103
    // kink_norm_bps = GlobalState<uint64>()
    bytec 29 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:235
    // this.kink_norm_bps.value = 5000 // 50% kink point
    pushint 5000 // 5000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:106
    // slope1_bps = GlobalState<uint64>()
    bytec 30 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:236
    // this.slope1_bps.value = 1000 // 10% slope to kink
    pushint 1000 // 1000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:109
    // slope2_bps = GlobalState<uint64>()
    bytec 31 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:237
    // this.slope2_bps.value = 2000 // 20% slope after kink
    pushint 2000 // 2000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    bytec 11 // "borrow_index_wad"
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 4 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:238
    // this.borrow_index_wad.value = INDEX_SCALE
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:118
    // last_accrual_ts = GlobalState<uint64>()
    bytec 26 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:239
    // this.last_accrual_ts.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:97
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:240
    // this.last_apr_bps.value = this.base_bps.value
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:241
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:142
    // buyout_token_id = GlobalState<UintN64>()
    bytec 20 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:241
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:145
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 21 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:242
    // this.liq_bonus_bps.value = 800
    pushint 800 // 800
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // total_commission_earned = GlobalState<uint64>()
    bytec 32 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:243
    // this.total_commission_earned.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:155
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 22 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:244
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:153
    // commission_percentage = GlobalState<uint64>()
    bytec 39 // "commission_percentage"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:245
    // this.commission_percentage.value = additional_rewards_commission_percentage
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    bytec 13 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:246
    // this.cash_on_hand.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // total_additional_rewards = GlobalState<uint64>()
    bytec 33 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:247
    // this.total_additional_rewards.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:76
    // flux_oracle_app = GlobalState<Application>()
    bytec 27 // "flux_oracle_app"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:248
    // this.flux_oracle_app.value = flux_oracle_app_id
    frame_dig -1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:250
    // if (this.base_token_id.value.native === 0) {
    btoi
    bnz initApplication_else_body@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    bytec 8 // "base_token_decimals"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:251
    // this.base_token_decimals.value = 6
    pushint 6 // 6
    app_global_put

initApplication_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:256
    // if (this.base_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:257-264
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:259
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:260
    // xferAsset: this.base_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:261
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:257-263
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:262
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:257-264
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:142
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 20 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:266
    // if (this.buyout_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:267-274
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:269
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:142
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 20 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:270
    // xferAsset: this.buyout_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:271
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:267-273
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:272
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:267-274
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@9:
    retsub

initApplication_else_body@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:253
    // this.base_token_decimals.value = Asset(this.base_token_id.value.native).decimals
    btoi
    asset_params_get AssetDecimals
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    bytec 8 // "base_token_decimals"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:253
    // this.base_token_decimals.value = Asset(this.base_token_id.value.native).decimals
    swap
    app_global_put
    b initApplication_after_if_else@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setRateParams(ltv_bps: uint64, liq_threshold_bps: uint64, base_bps: uint64, util_cap_bps: uint64, kink_norm_bps: uint64, slope1_bps: uint64, slope2_bps: uint64, max_apr_bps: uint64, ema_alpha_bps: uint64, rate_model_type: uint64, liq_bonus_bps: uint64) -> void:
setRateParams:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:296-309
    // @abimethod({ allowActions: 'NoOp' })
    // public setRateParams(
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   ema_alpha_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   liq_bonus_bps: uint64,
    // ) {
    proto 11 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:310
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:310
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:313
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    frame_dig -8
    bz setRateParams_bool_false@3
    frame_dig -8
    intc_2 // 10000
    <=
    bz setRateParams_bool_false@3
    intc_1 // 1

setRateParams_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:313
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    assert // BAD_UTIL_CAP
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:314
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    frame_dig -7
    bz setRateParams_bool_false@7
    frame_dig -7
    intc_2 // 10000
    <
    bz setRateParams_bool_false@7
    intc_1 // 1

setRateParams_bool_merge@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:314
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    assert // BAD_KINK
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:316
    // if (max_apr_bps > 0) {
    frame_dig -4
    bz setRateParams_after_if_else@14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:317
    // assert(max_apr_bps >= base_bps, 'BAD_MAX_APR')
    frame_dig -4
    frame_dig -9
    >=
    assert // BAD_MAX_APR

setRateParams_after_if_else@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:319
    // assert(ema_alpha_bps <= 10_000, 'BAD_EMA_ALPHA')
    frame_dig -3
    intc_2 // 10000
    <=
    assert // BAD_EMA_ALPHA
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:322
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    frame_dig -2
    bz setRateParams_bool_true@16
    frame_dig -2
    pushint 255 // 255
    ==
    bz setRateParams_bool_false@17

setRateParams_bool_true@16:
    intc_1 // 1

setRateParams_bool_merge@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:322
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    assert // UNSUPPORTED_MODEL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:97
    // base_bps = GlobalState<uint64>()
    bytec 24 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:323
    // this.base_bps.value = base_bps
    frame_dig -9
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 15 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:324
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -10
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:83
    // ltv_bps = GlobalState<uint64>()
    bytec 23 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:325
    // this.ltv_bps.value = ltv_bps
    frame_dig -11
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:100
    // util_cap_bps = GlobalState<uint64>()
    bytec 25 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:326
    // this.util_cap_bps.value = util_cap_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:103
    // kink_norm_bps = GlobalState<uint64>()
    bytec 29 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:327
    // this.kink_norm_bps.value = kink_norm_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:106
    // slope1_bps = GlobalState<uint64>()
    bytec 30 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:328
    // this.slope1_bps.value = slope1_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:109
    // slope2_bps = GlobalState<uint64>()
    bytec 31 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:329
    // this.slope2_bps.value = slope2_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:145
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 21 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:330
    // this.liq_bonus_bps.value = liq_bonus_bps
    frame_dig -1
    app_global_put
    retsub

setRateParams_bool_false@17:
    intc_0 // 0
    b setRateParams_bool_merge@18

setRateParams_bool_false@7:
    intc_0 // 0
    b setRateParams_bool_merge@8

setRateParams_bool_false@3:
    intc_0 // 0
    b setRateParams_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setContractState(state: uint64) -> void:
setContractState:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333-334
    // @abimethod({ allowActions: 'NoOp' })
    // public setContractState(state: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:335
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:335
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:336
    // assert(state === 0 || state === 1, 'INVALID_STATE')
    frame_dig -1
    bz setContractState_bool_true@2
    frame_dig -1
    intc_1 // 1
    ==
    bz setContractState_bool_false@3

setContractState_bool_true@2:
    intc_1 // 1

setContractState_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:336
    // assert(state === 0 || state === 1, 'INVALID_STATE')
    assert // INVALID_STATE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:337
    // this.contract_state.value = new UintN64(state)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 5 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:337
    // this.contract_state.value = new UintN64(state)
    swap
    app_global_put
    retsub

setContractState_bool_false@3:
    intc_0 // 0
    b setContractState_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.generateLSTToken() -> void:
generateLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:347
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:347
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:352
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:353-364
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:355
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:356
    // total: baseToken.total,
    dig 1
    asset_params_get AssetTotal
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:357
    // decimals: baseToken.decimals,
    dig 2
    asset_params_get AssetDecimals
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:359
    // manager: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360
    // unitName: 'c' + String(baseToken.unitName),
    dig 4
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:361
    // assetName: 'c' + String(baseToken.unitName),
    uncover 5
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    itxn_field ConfigAssetName
    itxn_field ConfigAssetUnitName
    itxn_field ConfigAssetManager
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:358
    // defaultFrozen: false,
    intc_0 // 0
    itxn_field ConfigAssetDefaultFrozen
    itxn_field ConfigAssetDecimals
    itxn_field ConfigAssetTotal
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:353-363
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    pushint 3 // 3
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:362
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:353-364
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    itxn CreatedAssetID
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:365
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:50
    // lst_token_id = GlobalState<UintN64>()
    bytec 19 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:365
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.configureLSTToken(axferTxn: uint64, circulating_lst: uint64) -> void:
configureLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:374-375
    // @abimethod({ allowActions: 'NoOp' })
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:376
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:376
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:50
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 19 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:377
    // assert(this.lst_token_id.value.native === axferTxn.xferAsset.id, 'LST token not set')
    btoi
    frame_dig -2
    gtxns XferAsset
    ==
    assert // LST token not set
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:379-382
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:379-382
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:381
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:379-382
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    intc_1 // 1

configureLSTToken_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:379-382
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:383
    // this.circulating_lst.value = circulating_lst
    frame_dig -1
    app_global_put
    retsub

configureLSTToken_bool_false@3:
    intc_0 // 0
    b configureLSTToken_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getOraclePrice(tokenId: bytes) -> uint64:
getOraclePrice:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392
    // private getOraclePrice(tokenId: UintN64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:73
    // oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 36 // "oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:394
    // const address = oracle.address
    dup
    app_params_get AppAddress
    bury 1
    assert // application exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:397-401
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: 0,
    // }).returnValue
    itxn_begin
    pushbytes 0xac13e004 // method "getTokenPrice(uint64)(uint64,uint64,uint64)"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:400
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:397-401
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    pushint 12 // 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:403
    // return result.price.native
    extract_uint64
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.decimalScale(decimals: uint64) -> uint64:
decimalScale:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:410
    // private decimalScale(decimals: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:411
    // assert(decimals <= 19, 'BAD_DECIMALS')
    frame_dig -1
    pushint 19 // 19
    <=
    assert // BAD_DECIMALS
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:412
    // let scale: uint64 = 1
    intc_1 // 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:413
    // let i: uint64 = 0
    intc_0 // 0

decimalScale_while_top@1:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:414
    // while (i < decimals) {
    frame_dig 1
    frame_dig -1
    <
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:414-417
    // while (i < decimals) {
    //   scale = scale * 10
    //   i = i + 1
    // }
    bz decimalScale_after_while@3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:415
    // scale = scale * 10
    frame_dig 0
    pushint 10 // 10
    *
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:416
    // i = i + 1
    frame_dig 1
    intc_1 // 1
    +
    frame_bury 1
    b decimalScale_while_top@1

decimalScale_after_while@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:418
    // return scale
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.updateCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
updateCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:484
    // private updateCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:486
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:488
    // const newTotal: uint64 = collateral.totalCollateral.native + amount
    dup
    pushint 40 // 40
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:490
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:491
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:492
    // baseAssetDecimals: collateral.baseAssetDecimals,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:493
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 4
    extract 24 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:494
    // marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    dig 5
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:495
    // totalCollateral: new UintN64(newTotal),
    uncover 5
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:496
    // originatingAppId: collateral.originatingAppId,
    uncover 6
    extract 48 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:489-497
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   baseAssetDecimals: collateral.baseAssetDecimals,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.reduceCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
reduceCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:506
    // private reduceCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:508
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:510
    // assert(collateral.totalCollateral.native >= amount, 'INSUFFICIENT_COLLATERAL')
    dup
    pushint 40 // 40
    extract_uint64
    dup
    frame_dig -1
    >=
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:511
    // const newTotal: uint64 = collateral.totalCollateral.native - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:513
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:514
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:515
    // baseAssetDecimals: collateral.baseAssetDecimals,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:516
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 4
    extract 24 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:517
    // marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    dig 5
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:518
    // totalCollateral: new UintN64(newTotal),
    uncover 5
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:519
    // originatingAppId: collateral.originatingAppId,
    uncover 6
    extract 48 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:512-520
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   baseAssetDecimals: collateral.baseAssetDecimals,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.removeCollateralType(collateralTokenId: bytes) -> void:
removeCollateralType:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:523-524
    // @abimethod({ allowActions: 'NoOp' })
    // public removeCollateralType(collateralTokenId: UintN64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:526
    // assert(this.collateralExists(collateralTokenId), 'COLLATERAL_NOT_FOUND')
    assert // COLLATERAL_NOT_FOUND
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:529
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:530
    // assert(collateral.totalCollateral.native === 0, 'COLLATERAL_IN_USE')
    pushint 40 // 40
    extract_uint64
    !
    assert // COLLATERAL_IN_USE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:532
    // this.accepted_collaterals(key).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:533
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:533
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value - 1
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.updateCollateralOriginationId(collateralTokenId: bytes, newOriginationAppId: bytes) -> void:
updateCollateralOriginationId:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:536-537
    // @abimethod({ allowActions: 'NoOp' })
    // public updateCollateralOriginationId(collateralTokenId: UintN64, newOriginationAppId: UintN64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:538
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:538
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:539
    // assert(this.collateralExists(collateralTokenId), 'COLLATERAL_NOT_FOUND')
    assert // COLLATERAL_NOT_FOUND
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:542
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:544
    // assetId: collateral.assetId,
    dup
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:545
    // baseAssetId: collateral.baseAssetId,
    dig 1
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:546
    // baseAssetDecimals: collateral.baseAssetDecimals,
    dig 2
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:547
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 3
    extract 24 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:548
    // marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    dig 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:549
    // totalCollateral: collateral.totalCollateral,
    uncover 5
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:543-551
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   baseAssetDecimals: collateral.baseAssetDecimals,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   marketBaseAssetDecimals: collateral.marketBaseAssetDecimals,
    //   totalCollateral: collateral.totalCollateral,
    //   originatingAppId: newOriginationAppId,
    // }).copy()
    uncover 5
    uncover 5
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    frame_dig -1
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addNewCollateralType(collateralTokenId: bytes, collateralBaseTokenId: bytes, originatingAppId: bytes) -> void:
addNewCollateralType:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:561-566
    // @abimethod({ allowActions: 'NoOp' })
    // public addNewCollateralType(
    //   collateralTokenId: UintN64,
    //   collateralBaseTokenId: UintN64,
    //   originatingAppId: UintN64,
    // ): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:567
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:568
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:568
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:569
    // assert(collateralTokenId.native !== baseToken.id, 'CANNOT_USE_BASE_AS_COLLATERAL')
    frame_dig -3
    btoi
    dup
    uncover 2
    !=
    assert // CANNOT_USE_BASE_AS_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -3
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:570
    // assert(!this.collateralExists(collateralTokenId), 'COLLATERAL_ALREADY_EXISTS')
    !
    assert // COLLATERAL_ALREADY_EXISTS
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:575
    // baseAssetDecimals: new UintN64(Asset(collateralBaseTokenId.native).decimals),
    frame_dig -2
    btoi
    asset_params_get AssetDecimals
    assert // asset exists
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:577
    // marketBaseAssetDecimals: new UintN64(this.base_token_decimals.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:572-580
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   baseAssetDecimals: new UintN64(Asset(collateralBaseTokenId.native).decimals),
    //   marketBaseAssetId: this.base_token_id.value,
    //   marketBaseAssetDecimals: new UintN64(this.base_token_decimals.value),
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    frame_dig -3
    frame_dig -2
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:578
    // totalCollateral: new UintN64(0),
    bytec 28 // 0x0000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:572-580
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   baseAssetDecimals: new UintN64(Asset(collateralBaseTokenId.native).decimals),
    //   marketBaseAssetId: this.base_token_id.value,
    //   marketBaseAssetDecimals: new UintN64(this.base_token_decimals.value),
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    concat
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:582
    // this.accepted_collaterals(key).value = newAcceptedCollateral.copy()
    dig 1
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:583
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:583
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:584-592
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:586
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:587
    // assetReceiver: Global.currentApplicationAddress,
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:589
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    uncover 3
    itxn_field XferAsset
    itxn_field AssetReceiver
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:584-591
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:590
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:584-592
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:594
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.depositAlgo(depositTxn: uint64, amount: uint64) -> void:
depositAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:657-658
    // @abimethod({ allowActions: 'NoOp' })
    // public depositAlgo(depositTxn: gtxn.PaymentTxn, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:660
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:19
    // export const MAXIMUM_ALGO_DEPOSITS: uint64 = 69_000_000_000_000 // 69,000,000 ALGO
    intc 5 // 69000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:662
    // assert(this.total_deposits.value <= MAXIMUM_ALGO_DEPOSITS, 'DEPOSIT_CAP_INVALID')
    <=
    assert // DEPOSIT_CAP_INVALID
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:19
    // export const MAXIMUM_ALGO_DEPOSITS: uint64 = 69_000_000_000_000 // 69,000,000 ALGO
    intc 5 // 69000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:663
    // const remainingCapacity: uint64 = MAXIMUM_ALGO_DEPOSITS - this.total_deposits.value
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:664
    // assert(amount <= remainingCapacity, 'DEPOSIT_LIMIT_EXCEEDED')
    frame_dig -1
    >=
    assert // DEPOSIT_LIMIT_EXCEEDED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666-670
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:667
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666-670
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    ==
    bz depositAlgo_bool_false@4
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:668
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666-670
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    ==
    bz depositAlgo_bool_false@4
    frame_dig -2
    gtxns Amount
    frame_dig -1
    ==
    bz depositAlgo_bool_false@4
    intc_1 // 1

depositAlgo_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666-670
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:671
    // this.addCash(amount)
    frame_dig -1
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:673
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:676
    // if (this.total_deposits.value === 0) {
    bnz depositAlgo_else_body@7
    frame_dig -1

depositAlgo_after_if_else@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:681-688
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:683
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:50
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 19 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:684
    // xferAsset: this.lst_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:681-687
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:686
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:681-688
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:690
    // this.circulating_lst.value += lstDue
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:690
    // this.circulating_lst.value += lstDue
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:691
    // this.total_deposits.value += amount
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    bytec_3 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:691
    // this.total_deposits.value += amount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:692
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:692
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:695
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:696
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:694-697
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 40 // "deposit_record"
    swap
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:698
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz depositAlgo_else_body@11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:699
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:700
    // const newAmount: uint64 = existingRecord.depositAmount.native + amount
    dup
    intc_0 // 0
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:702
    // assetId: existingRecord.assetId,
    swap
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:703
    // depositAmount: new UintN64(newAmount),
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:701-704
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositAlgo_else_body@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:707
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:708
    // depositAmount: new UintN64(amount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:706-709
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   depositAmount: new UintN64(amount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositAlgo_else_body@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const EXCHANGE_PRECISION: uint64 = 1_000_000_000_000_000
    intc 6 // 1000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:603
    // const [highBits1, lowBits1] = mulw(this.circulating_lst.value, EXCHANGE_PRECISION)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:605
    // const lstRatio = divw(highBits1, lowBits1, this.total_deposits.value)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:607
    // const [highBits2, lowBits2] = mulw(lstRatio, amount)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const EXCHANGE_PRECISION: uint64 = 1_000_000_000_000_000
    intc 6 // 1000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:608
    // return divw(highBits2, lowBits2, EXCHANGE_PRECISION)
    divw
    b depositAlgo_after_if_else@8

depositAlgo_bool_false@4:
    intc_0 // 0
    b depositAlgo_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawDeposit(assetTransferTxn: uint64, amount: uint64) -> void:
withdrawDeposit:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:722-723
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawDeposit(assetTransferTxn: gtxn.AssetTransferTxn, amount: uint64): void {
    proto 2 0
    intc_0 // 0
    dup
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:50
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 19 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:724
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:725
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726-731
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:727
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726-731
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:728
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726-731
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -2
    gtxns XferAsset
    frame_dig 5
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -2
    gtxns AssetAmount
    frame_dig -1
    ==
    bz withdrawDeposit_bool_false@5
    intc_1 // 1

withdrawDeposit_bool_merge@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726-731
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:733
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:645
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:646
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:738
    // this.removeCash(asaDue)
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:740
    // assert(Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance >= asaDue)
    global CurrentApplicationAddress
    acct_params_get AcctBalance
    assert // account funded
    global CurrentApplicationAddress
    acct_params_get AcctMinBalance
    assert // account funded
    -
    dig 1
    >=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:742-748
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:744
    // receiver: op.Txn.sender,
    txn Sender
    dig 1
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:742-747
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:746
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:742-748
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:750
    // this.circulating_lst.value -= amount // LST burned
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    bytec 9 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:750
    // this.circulating_lst.value -= amount // LST burned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:751
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    bytec_3 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:751
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:752
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:752
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:755
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:756
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:754-757
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 40 // "deposit_record"
    swap
    concat
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:758
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz withdrawDeposit_after_if_else@15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:759
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    frame_dig 1
    box_get
    swap
    dup
    cover 2
    frame_bury 0
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:761
    // asaDue > existingRecord.depositAmount.native ? 0 : existingRecord.depositAmount.native - asaDue
    intc_0 // 0
    extract_uint64
    dup
    frame_bury 4
    frame_dig 2
    <
    bz withdrawDeposit_ternary_false@10
    intc_0 // 0
    frame_bury 3

withdrawDeposit_ternary_merge@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:763
    // if (newAmount === 0) {
    frame_dig 3
    bnz withdrawDeposit_else_body@13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:764
    // this.deposit_record(depositKey).delete()
    frame_dig 1
    box_del
    pop

withdrawDeposit_after_if_else@15:
    retsub

withdrawDeposit_else_body@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:767
    // assetId: existingRecord.assetId,
    frame_dig 0
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:768
    // depositAmount: new UintN64(newAmount),
    frame_dig 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:766-769
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    frame_dig 1
    swap
    box_put
    retsub

withdrawDeposit_ternary_false@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:761
    // asaDue > existingRecord.depositAmount.native ? 0 : existingRecord.depositAmount.native - asaDue
    frame_dig 4
    frame_dig 2
    -
    frame_bury 3
    b withdrawDeposit_ternary_merge@11

withdrawDeposit_bool_false@5:
    intc_0 // 0
    b withdrawDeposit_bool_merge@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.borrow(assetTransferTxn: uint64, requestedLoanAmount: uint64, collateralAmount: uint64, collateralTokenId: bytes) -> void:
borrow:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:809-815
    // @abimethod({ allowActions: 'NoOp' })
    // public borrow(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   requestedLoanAmount: uint64,
    //   collateralAmount: uint64,
    //   collateralTokenId: UintN64,
    // ): void {
    proto 4 0
    intc_0 // 0
    pushbytes ""
    dupn 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:816
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:817
    // assert(collateralAmount > 0, 'COLLATERAL_REQUIRED')
    frame_dig -2
    assert // COLLATERAL_REQUIRED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:818
    // assert(requestedLoanAmount > 0, 'LOAN_AMOUNT_REQUIRED')
    frame_dig -3
    assert // LOAN_AMOUNT_REQUIRED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:820
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:820
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    box_len
    dup
    uncover 2
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:821
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:823
    // if (hasLoan) {
    bz borrow_else_body@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:824
    // const existingCollateral = this.getLoanRecord(op.Txn.sender).collateralAmount
    txn Sender
    callsub getLoanRecord
    pushint 40 // 40
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:825
    // collateralToUse = existingCollateral.native + collateralAmount
    extract_uint64
    frame_dig -2
    +
    frame_bury 1

borrow_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764-1768
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    frame_dig -4
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1765
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764-1768
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@36
    frame_dig -4
    gtxns AssetAmount
    frame_dig -2
    ==
    bz borrow_bool_false@36
    frame_dig -4
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1767
    // xferAsset: Asset(collateralTokenId.native),
    frame_dig -1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764-1768
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@36
    intc_1 // 1

borrow_bool_merge@37:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764-1768
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1770
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:830
    // const collateralUSD = this.calculateCollateralValueUSD(collateralTokenId, collateralToUse)
    frame_dig -1
    frame_dig 1
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:83
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:831
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    *
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:831
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:832
    // const baseTokenOraclePrice: uint64 = this.getOraclePrice(this.base_token_id.value)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1821
    // assert(baseTokenOraclePrice > 0, 'invalid base token price')
    dup
    assert // invalid base token price
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    frame_dig -3
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1824
    // assert(requestedLoanUSD <= maxBorrowUSD, 'exceeds LTV limit')
    >=
    assert // exceeds LTV limit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:100
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "util_cap_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1836
    // const [h, l] = mulw(this.total_deposits.value, this.util_cap_bps.value)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1837
    // return divw(h, l, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1826
    // assert(this.total_borrows.value + requestedLoanAmount <= capBorrow, 'UTIL_CAP_EXCEEDED')
    frame_dig -3
    +
    >=
    assert // UTIL_CAP_EXCEEDED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:836
    // let userTier: UintN64 = new UintN64(0)
    bytec 28 // 0x0000000000000000
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:76
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 27 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:837
    // if (this.flux_oracle_app.value.id !== 0) {
    bz borrow_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:838-845
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:76
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 27 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:841
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:76
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 27 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:844
    // accounts: [op.Txn.sender],
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:840
    // args: [new Address(op.Txn.sender)],
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:838-845
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    pushbytes 0xd4d7aa5c // method "getUserTier(address)uint64"
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field Accounts
    itxn_field Applications
    itxn_field Sender
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:842
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:838-845
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    frame_bury 0
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix

borrow_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:847
    // const calculatedFee = this.computeFees(requestedLoanAmount, userTier.native)
    frame_dig 0
    btoi
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:89
    // origination_fee_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 34 // "origination_fee_bps"
    app_global_get_ex
    swap
    frame_bury 4
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:778
    // if (userTier === 1) {
    intc_1 // 1
    ==
    bz borrow_else_body@19
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:779
    // const [hi, lo] = mulw(initialFee, 90)
    frame_dig 4
    pushint 90 // 90
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:780
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3

borrow_after_if_else@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:792
    // const [feeHi, feeLo] = mulw(depositAmount, effectiveFeeBps)
    frame_dig -3
    frame_dig 3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:793
    // const fee: uint64 = divw(feeHi, feeLo, 10_000)
    intc_2 // 10000
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1847
    // const disbursement: uint64 = requestedAmount - calculatedFee
    frame_dig -3
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1849
    // this.fee_pool.value += calculatedFee
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    bytec 14 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1849
    // this.fee_pool.value += calculatedFee
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:851
    // if (hasLoan) {
    frame_dig 6
    bz borrow_else_body@8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:852
    // this.processLoanTopUp(op.Txn.sender, collateralAmount, disbursement, baseTokenOraclePrice, collateralTokenId)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1869
    // const existingLoan = this.getLoanRecord(borrower)
    dup
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1871
    // const liveDebt: uint64 = this.syncBorrowerSnapshot(borrower)
    dig 1
    callsub syncBorrowerSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1878
    // const newDebt: uint64 = liveDebt + disbursement
    frame_dig 2
    dup
    cover 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1883
    // collateralTokenId: existingLoan.collateralTokenId,
    dig 1
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1884
    // collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    uncover 2
    pushint 40 // 40
    extract_uint64
    frame_dig -2
    +
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1887
    // amount: new UintN64(disbursement),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1888
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1886-1890
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1889
    // changeType: new UintN8(0), // borrow
    pushbytes 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1886-1890
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1891
    // principal: new UintN64(newDebt),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1892
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1881-1893
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1881-1893
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1896
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -1
    frame_dig -2
    callsub updateCollateralTotal

borrow_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:858
    // this.disburseFunds(op.Txn.sender, disbursement)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1904-1910
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 2
    dup
    cover 2
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1904-1909
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1908
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1904-1910
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:859
    // this.removeCash(disbursement)
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:860
    // this.total_borrows.value = this.total_borrows.value + disbursement
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:860
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:861
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:861
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

borrow_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:854
    // this.mintLoanRecord(disbursement, collateralTokenId, op.Txn.sender, collateralAmount)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:882
    // collateralAmount: new UintN64(collateralAmount),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:885
    // amount: new UintN64(disbursement),
    frame_dig 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:886
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:884-888
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    dig 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:887
    // changeType: new UintN8(0), // borrow
    pushbytes 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:884-888
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:890
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:879-891
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 5
    frame_dig -1
    concat
    uncover 5
    concat
    uncover 2
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:879-891
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:893
    // this.active_loan_records.value = this.active_loan_records.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:893
    // this.active_loan_records.value = this.active_loan_records.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:855
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -1
    frame_dig -2
    callsub updateCollateralTotal
    b borrow_after_if_else@9

borrow_else_body@19:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:781
    // } else if (userTier === 2) {
    frame_dig 5
    pushint 2 // 2
    ==
    bz borrow_else_body@21
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:782
    // const [hi, lo] = mulw(initialFee, 75)
    frame_dig 4
    pushint 75 // 75
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:783
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@28

borrow_else_body@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:784
    // } else if (userTier === 3) {
    frame_dig 5
    pushint 3 // 3
    ==
    bz borrow_else_body@23
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:785
    // const [hi, lo] = mulw(initialFee, 50)
    frame_dig 4
    pushint 50 // 50
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:786
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@28

borrow_else_body@23:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:787
    // } else if (userTier >= 4) {
    frame_dig 5
    intc_3 // 4
    >=
    frame_dig 4
    frame_bury 3
    bz borrow_after_if_else@28
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:788
    // const [hi, lo] = mulw(initialFee, 25)
    frame_dig 4
    pushint 25 // 25
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:789
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@28

borrow_bool_false@36:
    intc_0 // 0
    b borrow_bool_merge@37

borrow_else_body@2:
    frame_dig -2
    frame_bury 1
    b borrow_after_if_else@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueLoanInterest(debtor: bytes) -> void:
accrueLoanInterest:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:896-897
    // @abimethod({ allowActions: 'NoOp' })
    // public accrueLoanInterest(debtor: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:898
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:899
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:900
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:902
    // this.syncBorrowerSnapshot(debtor)
    frame_dig -1
    callsub syncBorrowerSnapshot
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:904
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:904
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.current_apr_bps() -> uint64:
current_apr_bps:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:961-962
    // @abimethod({ allowActions: 'NoOp' })
    // public current_apr_bps(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    swap
    dup
    uncover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:100
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "util_cap_bps"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:916
    // if (D === 0) return 0
    bnz current_apr_bps_after_if_else@3
    intc_0 // 0
    frame_bury 0

current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:97
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:103
    // kink_norm_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "kink_norm_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:106
    // slope1_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 30 // "slope1_bps"
    app_global_get_ex
    swap
    frame_bury 5
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:109
    // slope2_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 31 // "slope2_bps"
    app_global_get_ex
    swap
    frame_bury 6
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:941
    // if (U_norm_bps <= kink_norm_bps) {
    frame_dig 0
    >=
    bz current_apr_bps_else_body@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:942
    // const [hi1, lo1] = mulw(slope1_bps, U_norm_bps)
    frame_dig 5
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:943
    // apr = base_bps + divw(hi1, lo1, kink_norm_bps)
    uncover 3
    divw
    +
    frame_bury 1

current_apr_bps_after_if_else@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:94
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 38 // "max_apr_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 4
    assert // check GlobalState exists
    frame_dig 1
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:952
    // if (maxCap > 0 && apr > maxCap) apr = maxCap
    bz current_apr_bps_after_if_else@13
    frame_dig 1
    dup
    frame_dig 4
    >
    swap
    frame_bury 2
    bz current_apr_bps_after_if_else@13
    frame_dig 4
    frame_bury 2

current_apr_bps_after_if_else@13:
    frame_dig 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:123
    // prev_apr_bps = GlobalState<uint64>()
    bytec 37 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:971
    // this.prev_apr_bps.value = apr
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:972
    // return apr
    frame_bury 0
    retsub

current_apr_bps_else_body@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:945
    // const over: uint64 = U_norm_bps - kink_norm_bps
    frame_dig 0
    uncover 2
    dup
    cover 2
    -
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:946
    // const denom: uint64 = BASIS_POINTS - kink_norm_bps
    uncover 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:947
    // const [hi2, lo2] = mulw(slope2_bps, over)
    frame_dig 6
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:948
    // apr = base_bps + slope1_bps + divw(hi2, lo2, denom)
    uncover 3
    frame_dig 5
    +
    cover 2
    uncover 3
    divw
    +
    frame_bury 1
    b current_apr_bps_after_if_else@10

current_apr_bps_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:919
    // const [hiCap, loCap] = mulw(D, cap_bps)
    frame_dig 7
    frame_dig 9
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:920
    // const capBorrow = divw(hiCap, loCap, BASIS_POINTS)
    divw
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:921
    // if (capBorrow === 0) return 0
    bnz current_apr_bps_after_if_else@5
    intc_0 // 0
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:964
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6

current_apr_bps_after_if_else@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:923
    // const cappedB = B <= capBorrow ? B : capBorrow
    frame_dig 8
    dup
    frame_dig 3
    dup
    cover 2
    <=
    dig 1
    uncover 3
    uncover 2
    select
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:924
    // const [hiN, loN] = mulw(cappedB, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:925
    // return divw(hiN, loN, capBorrow)
    uncover 2
    divw
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:964
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.currentDebtFromSnapshot(rec: bytes) -> uint64, bytes:
currentDebtFromSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1000
    // private currentDebtFromSnapshot(rec: LoanRecord): uint64 {
    proto 1 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1001
    // const p: uint64 = rec.principal.native
    frame_dig -1
    pushint 73 // 73
    extract_uint64
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1002
    // if (p === 0) return 0
    bnz currentDebtFromSnapshot_after_if_else@2
    intc_0 // 0
    frame_dig -1
    uncover 2
    retsub

currentDebtFromSnapshot_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1003
    // const [hi, lo] = mulw(p, this.borrow_index_wad.value)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1004
    // return divw(hi, lo, rec.userIndexWad.native)
    frame_dig -1
    pushint 81 // 81
    extract_uint64
    divw
    frame_dig -1
    uncover 2
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.syncBorrowerSnapshot(borrower: bytes) -> uint64:
syncBorrowerSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1013
    // private syncBorrowerSnapshot(borrower: Account): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1014
    // const rec = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1015
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1018
    // collateralTokenId: rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1019
    // collateralAmount: rec.collateralAmount,
    dig 1
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1021
    // lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    uncover 3
    extract 48 17 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1022
    // principal: new UintN64(liveDebt),
    dig 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1023
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1016-1024
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    //   principal: new UintN64(liveDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // })
    frame_dig -1
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1025
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1026
    // return liveDebt
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueMarket() -> uint64:
accrueMarket:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1035
    // private accrueMarket(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1036
    // const now: uint64 = Global.latestTimestamp
    global LatestTimestamp
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:118
    // last_accrual_ts = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "last_accrual_ts"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1038
    // if (now <= last) return 0
    <=
    bz accrueMarket_after_if_else@2
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1040
    // const deltaT: uint64 = now - last
    frame_dig 4
    frame_dig 5
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:983
    // if (deltaT === 0) return 0
    bnz accrueMarket_after_if_else@9
    intc_0 // 0
    frame_bury 2

accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1044
    // if (simpleWad === 0) {
    frame_dig 2
    bnz accrueMarket_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:118
    // last_accrual_ts = GlobalState<uint64>()
    bytec 26 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1045
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1046
    // return 0
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1052
    // const [hiI, loI] = mulw(oldIndex, simpleWad)
    dup
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 4 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1053
    // const incrIndex: uint64 = divw(hiI, loI, INDEX_SCALE)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1054
    // const newIndex: uint64 = oldIndex + incrIndex
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    bytec 11 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1055
    // this.borrow_index_wad.value = newIndex
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1061
    // let interest: uint64 = 0
    intc_0 // 0
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1062
    // if (totalBefore > 0) {
    bz accrueMarket_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1063
    // const [hiB, loB] = mulw(totalBefore, simpleWad)
    frame_dig 3
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 4 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1064
    // interest = divw(hiB, loB, INDEX_SCALE)
    divw
    frame_bury 1

accrueMarket_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:92
    // protocol_share_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 35 // "protocol_share_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1069
    // const deposBps: uint64 = BASIS_POINTS - protoBps
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1072
    // const [hiD, loD] = mulw(interest, deposBps)
    frame_dig 1
    dup
    uncover 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1073
    // const depositorInterest: uint64 = divw(hiD, loD, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1074
    // const protocolInterest: uint64 = interest - depositorInterest
    dup2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1078
    // this.total_borrows.value = totalBefore + interest
    frame_dig 3
    dig 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1078
    // this.total_borrows.value = totalBefore + interest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1081
    // this.total_deposits.value += depositorInterest
    uncover 2
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    bytec_3 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1081
    // this.total_deposits.value += depositorInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1084
    // this.fee_pool.value += protocolInterest
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    bytec 14 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1084
    // this.fee_pool.value += protocolInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:118
    // last_accrual_ts = GlobalState<uint64>()
    bytec 26 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1087
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1091
    // return interest
    frame_bury 0
    retsub

accrueMarket_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 12 // "last_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 4 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:986
    // const [hRate, lRate] = mulw(INDEX_SCALE, this.last_apr_bps.value)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:987
    // const ratePerYearWad: uint64 = divw(hRate, lRate, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:990
    // const [hSlice, lSlice] = mulw(ratePerYearWad, deltaT)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:14
    // export const SECONDS_PER_YEAR: uint64 = 365 * 24 * 60 * 60
    pushint 31536000 // 31536000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:991
    // const simpleWad: uint64 = divw(hSlice, lSlice, SECONDS_PER_YEAR)
    divw
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1043
    // const simpleWad: uint64 = this.sliceFactorWad(deltaT)
    b accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getLoanRecord(borrowerAddress: bytes) -> bytes:
getLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1099-1100
    // @abimethod({ allowActions: 'NoOp' })
    // public getLoanRecord(borrowerAddress: Account): LoanRecord {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1101
    // return this.loan_record(borrowerAddress).value
    box_get
    assert // Box must have value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayLoanAlgo(paymentTxn: uint64, repaymentAmount: uint64) -> void:
repayLoanAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1114-1115
    // @abimethod({ allowActions: 'NoOp' })
    // public repayLoanAlgo(paymentTxn: gtxn.PaymentTxn, repaymentAmount: uint64): void {
    proto 2 0
    intc_0 // 0
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1117
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1118-1122
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1119
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1118-1122
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    ==
    bz repayLoanAlgo_bool_false@4
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1120
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1118-1122
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    ==
    bz repayLoanAlgo_bool_false@4
    frame_dig -2
    gtxns Amount
    frame_dig -1
    ==
    bz repayLoanAlgo_bool_false@4
    intc_1 // 1

repayLoanAlgo_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1118-1122
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1123
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1124
    // const rec = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1125
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1127
    // const repayUsed: uint64 = repaymentAmount <= liveDebt ? repaymentAmount : liveDebt
    frame_dig -1
    dig 1
    <=
    dig 1
    frame_dig -1
    uncover 2
    select
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1128
    // const refundAmount: uint64 = repaymentAmount - repayUsed
    frame_dig -1
    dig 1
    -
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1129
    // const remainingDebt: uint64 = liveDebt - repayUsed
    swap
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1130
    // const totalBorrowDelta: uint64 = repayUsed <= this.total_borrows.value ? repayUsed : this.total_borrows.value
    <=
    bz repayLoanAlgo_ternary_false@7
    frame_dig 3

repayLoanAlgo_ternary_merge@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1133
    // this.total_borrows.value -= totalBorrowDelta
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1133
    // this.total_borrows.value -= totalBorrowDelta
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1134
    // this.addCash(repaymentAmount)
    frame_dig -1
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1136
    // if (refundAmount > 0) {
    frame_dig 1
    bz repayLoanAlgo_after_if_else@11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1137-1143
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1139
    // receiver: op.Txn.sender,
    txn Sender
    frame_dig 1
    dup
    cover 2
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1137-1142
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1141
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1137-1143
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1144
    // this.removeCash(refundAmount)
    callsub removeCash

repayLoanAlgo_after_if_else@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1147
    // if (remainingDebt === 0) {
    frame_dig 2
    bnz repayLoanAlgo_else_body@14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1148
    // this.loan_record(op.Txn.sender).delete()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1148
    // this.loan_record(op.Txn.sender).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1149
    // this.active_loan_records.value -= 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1149
    // this.active_loan_records.value -= 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1151-1158
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1153
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1154
    // xferAsset: rec.collateralTokenId.native,
    frame_dig 0
    dup
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1155
    // assetAmount: rec.collateralAmount.native,
    swap
    pushint 40 // 40
    extract_uint64
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1151-1157
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1156
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1151-1158
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    retsub

repayLoanAlgo_else_body@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1162
    // borrowerAddress: new Address(op.Txn.sender.bytes),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1163
    // collateralTokenId: rec.collateralTokenId,
    frame_dig 0
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1164
    // collateralAmount: rec.collateralAmount,
    swap
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1167
    // amount: new UintN64(repayUsed),
    frame_dig 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1168
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1166-1170
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1169
    // changeType: new UintN8(2), // repay
    pushbytes 0x02
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1166-1170
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1171
    // principal: new UintN64(remainingDebt),
    frame_dig 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1172
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1161-1173
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1161
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1161-1173
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    retsub

repayLoanAlgo_ternary_false@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    b repayLoanAlgo_ternary_merge@8

repayLoanAlgo_bool_false@4:
    intc_0 // 0
    b repayLoanAlgo_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawPlatformFees(paymentReceiver: bytes) -> void:
withdrawPlatformFees:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182-1183
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawPlatformFees(paymentReceiver: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1184
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1184
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1185
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:155
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1187
    // const payout: uint64 = this.fee_pool.value + this.current_accumulated_commission.value
    +
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1188
    // if (payout > 0) {
    bz withdrawPlatformFees_after_if_else@3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1189-1195
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 0
    dup
    itxn_field Amount
    frame_dig -1
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1189-1194
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1193
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1189-1195
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1197
    // this.removeCash(payout)
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:63
    // fee_pool = GlobalState<uint64>()
    bytec 14 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1198
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:155
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 22 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1199
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put

withdrawPlatformFees_after_if_else@3:
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.buyoutSplitAlgo(buyer: bytes, debtor: bytes, premiumAxferTxn: uint64, repayPayTxn: uint64) -> void:
buyoutSplitAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1214-1220
    // @abimethod({ allowActions: 'NoOp' })
    // public buyoutSplitAlgo(
    //   buyer: Account,
    //   debtor: Account,
    //   premiumAxferTxn: gtxn.AssetTransferTxn, // buyout token (xUSD) PREMIUM
    //   repayPayTxn: gtxn.PaymentTxn, // ALGO DEBT repayment
    // ): void {
    proto 4 0
    pushbytes ""
    dupn 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    frame_dig -3
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1221
    // assert(this.loan_record(debtor).exists, 'NO_LOAN_RECORD')
    box_len
    bury 1
    assert // NO_LOAN_RECORD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1222
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1225
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1227
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1228
    // const collateralAmount: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1229
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1231
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    pop
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1232
    // assert(debtBase > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1235
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collateralTokenId, collateralAmount)
    swap
    uncover 2
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1236
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    swap
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1237
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1238
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1240
    // const [hLTV, lLTV] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1241
    // const ltvBps: uint64 = divw(hLTV, lLTV, collateralUSD)
    dig 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1243
    // assert(ltvBps < this.liq_threshold_bps.value, 'NOT_BUYOUT_ELIGIBLE')
    dig 1
    >
    assert // NOT_BUYOUT_ELIGIBLE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1245
    // const [hR, lR] = mulw(this.liq_threshold_bps.value, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1246
    // const ratio_bps: uint64 = divw(hR, lR, ltvBps)
    uncover 2
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1247
    // const premiumRateBps: uint64 = ratio_bps - BASIS_POINTS
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1249
    // const [hP, lP] = mulw(collateralUSD, premiumRateBps)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1250
    // const premiumUSD: uint64 = divw(hP, lP, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:142
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 20 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1253
    // const buyoutTokenId: uint64 = this.buyout_token_id.value.native
    btoi
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:142
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 20 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1254
    // const buyoutTokenPrice: uint64 = this.getOraclePrice(this.buyout_token_id.value)
    callsub getOraclePrice
    dup
    uncover 2
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    pushint 1000000 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1256
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    mulw
    cover 2
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1257
    // const premiumTokens: uint64 = buyoutTokenPrice === 0 ? 0 : divw(hPT, lPT, buyoutTokenPrice)
    bnz buyoutSplitAlgo_ternary_false@2
    intc_0 // 0
    frame_bury 0

buyoutSplitAlgo_ternary_merge@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1259
    // assert(premiumAxferTxn.sender === op.Txn.sender, 'INVALID_SENDER')
    frame_dig -2
    gtxns Sender
    txn Sender
    ==
    assert // INVALID_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260
    // assert(premiumAxferTxn.assetReceiver === Global.currentApplicationAddress, 'INVALID_RECEIVER')
    frame_dig -2
    gtxns AssetReceiver
    global CurrentApplicationAddress
    ==
    assert // INVALID_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1261
    // assert(premiumAxferTxn.xferAsset === Asset(buyoutTokenId), 'INVALID_XFER_ASSET')
    frame_dig -2
    gtxns XferAsset
    frame_dig 9
    ==
    assert // INVALID_XFER_ASSET
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1262
    // assert(premiumAxferTxn.assetAmount >= premiumTokens, 'INVALID_BUYOUT_AMOUNT')
    frame_dig -2
    gtxns AssetAmount
    dup
    frame_dig 0
    dup
    cover 3
    >=
    assert // INVALID_BUYOUT_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1265
    // const refund: uint64 = paidAmount - premiumTokens
    swap
    -
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1268
    // assert(repayPayTxn.sender === op.Txn.sender, 'BAD_REPAY_SENDER')
    frame_dig -1
    gtxns Sender
    txn Sender
    ==
    assert // BAD_REPAY_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1269
    // assert(repayPayTxn.receiver === Global.currentApplicationAddress, 'BAD_REPAY_RECEIVER')
    frame_dig -1
    gtxns Receiver
    global CurrentApplicationAddress
    ==
    assert // BAD_REPAY_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1270
    // assert(repayPayTxn.amount >= debtBase, 'INSUFFICIENT_REPAY')
    frame_dig -1
    gtxns Amount
    dup
    frame_bury 3
    dup
    frame_dig 8
    dup
    cover 3
    >=
    assert // INSUFFICIENT_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1271
    // const repayRefund: uint64 = repayPayTxn.amount - debtBase
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1274
    // this.loan_record(debtor).delete()
    frame_dig 4
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1275
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1275
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1277-1284
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1280
    // xferAsset: collateralTokenId.native,
    frame_dig 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1229
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1280
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 6
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1277-1283
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1282
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1277-1284
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig 7
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1287
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1288
    // const updatedTotal: uint64 = acVal.totalCollateral.native - collateralAmount
    dup
    pushint 40 // 40
    extract_uint64
    uncover 3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1290
    // assetId: acVal.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1291
    // baseAssetId: acVal.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1292
    // baseAssetDecimals: acVal.baseAssetDecimals,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1293
    // totalCollateral: new UintN64(updatedTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1294
    // marketBaseAssetId: acVal.marketBaseAssetId,
    dig 4
    extract 24 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1295
    // marketBaseAssetDecimals: acVal.marketBaseAssetDecimals,
    dig 5
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1296
    // originatingAppId: acVal.originatingAppId,
    uncover 6
    extract 48 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1289-1297
    // this.accepted_collaterals(acKey).value = new AcceptedCollateral({
    //   assetId: acVal.assetId,
    //   baseAssetId: acVal.baseAssetId,
    //   baseAssetDecimals: acVal.baseAssetDecimals,
    //   totalCollateral: new UintN64(updatedTotal),
    //   marketBaseAssetId: acVal.marketBaseAssetId,
    //   marketBaseAssetDecimals: acVal.marketBaseAssetDecimals,
    //   originatingAppId: acVal.originatingAppId,
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 2
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1299
    // const borrowDelta: uint64 = debtBase <= this.total_borrows.value ? debtBase : this.total_borrows.value
    <=
    bz buyoutSplitAlgo_ternary_false@6
    frame_dig 8

buyoutSplitAlgo_ternary_merge@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1300
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1300
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1301
    // this.addCash(repayPayTxn.amount)
    frame_dig 3
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1341
    // const halfPremium: uint64 = premiumTokens / 2
    frame_dig 0
    dup
    pushint 2 // 2
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1343-1350
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    dig 1
    itxn_field AssetAmount
    frame_dig 9
    dup
    cover 3
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1343-1349
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1348
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1343-1350
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1352-1359
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1356
    // assetAmount: premiumTokens - halfPremium, // cover odd token if any
    uncover 2
    swap
    -
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -3
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1352-1358
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1357
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1352-1359
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1305
    // if (refund > 0) {
    frame_dig 1
    bz buyoutSplitAlgo_after_if_else@12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1306-1313
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 1
    itxn_field AssetAmount
    frame_dig 9
    dup
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1306-1312
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1311
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1306-1313
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1314
    // if (buyoutTokenId === this.base_token_id.value.native) {
    btoi
    ==
    bz buyoutSplitAlgo_after_if_else@12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1315
    // this.removeCash(refund)
    frame_dig 1
    callsub removeCash

buyoutSplitAlgo_after_if_else@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1319
    // if (repayRefund > 0) {
    frame_dig 2
    bz buyoutSplitAlgo_after_if_else@15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1320-1326
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 2
    dup
    itxn_field Amount
    frame_dig -4
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1320-1325
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1324
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1320-1326
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1327
    // this.removeCash(repayRefund)
    callsub removeCash

buyoutSplitAlgo_after_if_else@15:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1330
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1330
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

buyoutSplitAlgo_ternary_false@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    b buyoutSplitAlgo_ternary_merge@7

buyoutSplitAlgo_ternary_false@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1257
    // const premiumTokens: uint64 = buyoutTokenPrice === 0 ? 0 : divw(hPT, lPT, buyoutTokenPrice)
    frame_dig 12
    frame_dig 11
    frame_dig 10
    divw
    frame_bury 0
    b buyoutSplitAlgo_ternary_merge@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.debtUSD(debtBaseUnits: uint64) -> uint64:
debtUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1367
    // private debtUSD(debtBaseUnits: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1368
    // const baseTokenPrice: uint64 = this.getOraclePrice(this.base_token_id.value) // price of market base token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    frame_dig -1
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1369
    // return this.amountToUsd(debtBaseUnits, baseTokenPrice, this.base_token_decimals.value)
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLST() -> uint64:
maxWithdrawableCollateralLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1434-1435
    // @abimethod({ allowActions: 'NoOp' })
    // public maxWithdrawableCollateralLST(): uint64 {
    proto 0 1
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1436
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1380
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1381
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1382
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1384
    // const rec = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1385
    // const collateral = this.getCollateral(rec.collateralTokenId)
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    box_get
    swap
    cover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1386
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1387
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz maxWithdrawableCollateralLST_after_if_else@3
    pushint 40 // 40
    extract_uint64

maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1436
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender)
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1390
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(rec.collateralTokenId, rec.collateralAmount.native)
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    pushint 40 // 40
    extract_uint64
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1393
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 4
    callsub debtUSD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1395
    // const [hReq, lReq] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:83
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1396
    // const requiredCollateralUSD: uint64 = divw(hReq, lReq, this.ltv_bps.value)
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1399
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz maxWithdrawableCollateralLST_after_if_else@5
    intc_0 // 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1436
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender)
    b maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6

maxWithdrawableCollateralLST_after_if_else@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1402
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1406-1409
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateral.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1407
    // appId: collateral.originatingAppId.native,
    frame_dig 3
    pushint 48 // 48
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1406-1409
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateral.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    bytec 17 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    dup
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1408
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1406-1409
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateral.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1410-1413
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: collateral.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 18 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1412
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1410-1413
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: collateral.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1417
    // const basePrice = this.getOraclePrice(ac.baseAssetId)
    dup
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1420
    // const removableUnderlying: uint64 = this.usdToAmount(removableUSD, basePrice, ac.baseAssetDecimals.native)
    swap
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:434
    // assert(oraclePriceMicroUsd > 0, 'BAD_PRICE')
    dig 1
    assert // BAD_PRICE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:435
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:436
    // const [h, l] = mulw(usdMicro, scale)
    uncover 4
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:437
    // return divw(h, l, oraclePriceMicroUsd)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1423
    // const [hL, lL] = mulw(removableUnderlying, circulatingLST)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1424
    // const removableLST: uint64 = divw(hL, lL, totalDeposits)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1436
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender)
    b maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawCollateral(amountLST: uint64, collateralTokenId: uint64) -> void:
withdrawCollateral:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1445-1446
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawCollateral(amountLST: uint64, collateralTokenId: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1447
    // assert(amountLST > 0, 'ZERO_AMOUNT')
    frame_dig -2
    assert // ZERO_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1448
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1449
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1450
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1451
    // this.accrueMarket() // 1) make time current for everyone
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1452
    // const loan = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1454
    // assert(loan.collateralTokenId.native === collateralTokenId, 'WRONG_COLLATERAL')
    dup
    extract 32 8 // on error: Index access is out of bounds
    dig 1
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // WRONG_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1456
    // const acKey = new AcceptedCollateralKey({ assetId: new UintN64(collateralTokenId) })
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1457
    // assert(this.accepted_collaterals(acKey).exists, 'BAD_COLLATERAL')
    dup
    box_len
    bury 1
    assert // BAD_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1458
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    box_get
    bury 1
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1460
    // const maxSafe = this.maxWithdrawableCollateralLST()
    callsub maxWithdrawableCollateralLST
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1461
    // assert(amountLST <= maxSafe, 'EXCEEDS_MAX_SAFE')
    frame_dig -2
    >=
    assert // EXCEEDS_MAX_SAFE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1462
    // assert(amountLST < loan.collateralAmount.native, 'INSUFFICIENT_COLLATERAL')
    dig 2
    pushint 40 // 40
    extract_uint64
    frame_dig -2
    dig 1
    <
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1463
    // const remainLST: uint64 = loan.collateralAmount.native - amountLST
    frame_dig -2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1466-1473
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -2
    itxn_field AssetAmount
    frame_dig -1
    itxn_field XferAsset
    dig 5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1466-1472
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1471
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1466-1473
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1479
    // collateralAmount: new UintN64(remainLST),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1482
    // amount: new UintN64(amountLST),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1483
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1481-1485
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1484
    // changeType: new UintN8(3), // 3 = collateral withdraw
    pushbytes 0x03
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1481-1485
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1486
    // principal: loan.principal, // unchanged
    dig 5
    extract 73 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1487
    // userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    uncover 6
    extract 81 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1476-1488
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: new UintN64(collateralTokenId),
    //   collateralAmount: new UintN64(remainLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(amountLST),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(3), // 3 = collateral withdraw
    //   }),
    //   principal: loan.principal, // unchanged
    //   userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    // })
    uncover 8
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1489
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1492
    // this.reduceCollateralTotal(loan.collateralTokenId, amountLST)
    frame_dig -2
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1495
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1495
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.liquidatePartialAlgo(debtor: bytes, repayPay: uint64, repayBaseAmount: uint64, lstAppId: uint64) -> void:
liquidatePartialAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1580-1586
    // @abimethod({ allowActions: 'NoOp' })
    // public liquidatePartialAlgo(
    //   debtor: Account,
    //   repayPay: gtxn.PaymentTxn, // liquidator pays ALGO
    //   repayBaseAmount: uint64, // requested repay in microALGO (can be >= live debt; excess refunded)
    //   lstAppId: uint64,
    // ): void {
    proto 4 0
    intc_0 // 0
    pushbytes ""
    dupn 20
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1587
    // assert(this.base_token_id.value.native === 0, 'BASE_NOT_ALGO')
    btoi
    !
    assert // BASE_NOT_ALGO
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1588
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:133
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 7 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1589
    // assert(this.loan_record(debtor).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1590
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1592
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1593
    // const collTok: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1594
    // const collLSTBal: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1595
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    cover 3
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1596
    // assert(liveDebt > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1597
    // assert(repayBaseAmount > 0, 'BAD_REPAY')
    frame_dig -2
    assert // BAD_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1599
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collTok, collLSTBal)
    cover 2
    callsub calculateCollateralValueUSD
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1600
    // const debtUSDv: uint64 = this.debtUSD(liveDebt)
    dig 1
    callsub debtUSD
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1601
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1602
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1604
    // const [hLTV, lLTV] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1605
    // const ltvBps: uint64 = divw(hLTV, lLTV, collateralUSD)
    uncover 2
    divw
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1606
    // assert(ltvBps >= this.liq_threshold_bps.value, 'NOT_LIQUIDATABLE')
    dig 1
    <=
    assert // NOT_LIQUIDATABLE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1609
    // assert(repayPay.sender === op.Txn.sender, 'BAD_REPAY_SENDER')
    frame_dig -3
    gtxns Sender
    txn Sender
    ==
    assert // BAD_REPAY_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1610
    // assert(repayPay.receiver === Global.currentApplicationAddress, 'BAD_REPAY_RECEIVER')
    frame_dig -3
    gtxns Receiver
    global CurrentApplicationAddress
    ==
    assert // BAD_REPAY_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1611
    // assert(repayPay.amount >= repayBaseAmount, 'INSUFFICIENT_REPAY')
    frame_dig -3
    gtxns Amount
    dup
    cover 3
    dup
    frame_dig -2
    >=
    assert // INSUFFICIENT_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1614
    // const basePrice = this.getOraclePrice(this.base_token_id.value) // USD
    callsub getOraclePrice
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1615
    // const isFullRepayRequest = repayRequested >= liveDebt
    uncover 2
    >=
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:145
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "liq_bonus_bps"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:86
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "liq_threshold_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:447
    // if (ltvBps <= threshold) return 0
    <=
    bz liquidatePartialAlgo_after_if_else@55
    intc_0 // 0
    frame_bury 3

liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.dynamicLiqBonusBps@63:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1618
    // let repayCandidate: uint64 = repayRequested > liveDebt ? liveDebt : repayRequested
    frame_dig 31
    dup
    frame_dig 27
    dup
    cover 3
    >
    swap
    cover 2
    select
    dup
    frame_bury 13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1622-1624
    // repayCandidate === 0
    //   ? 0
    //   : this.amountToUsd(repayCandidate, basePrice, this.base_token_decimals.value)
    bnz liquidatePartialAlgo_ternary_false@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1623
    // ? 0
    intc_0 // 0
    frame_bury 16

liquidatePartialAlgo_ternary_merge@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1626
    // if (collateralUSD <= debtUSDv && !isFullRepayRequest) {
    frame_dig 28
    frame_dig 29
    <=
    dup
    frame_bury 19
    bz liquidatePartialAlgo_after_if_else@6
    frame_dig 33
    assert // FULL_REPAY_REQUIRED

liquidatePartialAlgo_after_if_else@6:
    frame_dig 3
    frame_bury 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1629
    // if (repayUSDcandidate > 0) {
    frame_dig 16
    bz liquidatePartialAlgo_after_if_else@13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1630
    // if (collateralUSD <= debtUSDv) {
    frame_dig 19
    bz liquidatePartialAlgo_else_body@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1631
    // bonusBps = 0
    intc_0 // 0
    frame_bury 3

liquidatePartialAlgo_after_if_else@12:
    frame_dig 3
    frame_bury 4

liquidatePartialAlgo_after_if_else@13:
    frame_dig 4
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:145
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "liq_bonus_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1639
    // if (bonusBps > this.liq_bonus_bps.value) bonusBps = this.liq_bonus_bps.value
    >
    bz liquidatePartialAlgo_after_if_else@15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:145
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "liq_bonus_bps"
    app_global_get_ex
    swap
    frame_bury 3
    assert // check GlobalState exists

liquidatePartialAlgo_after_if_else@15:
    frame_dig 13
    frame_bury 14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1642
    // if (!isFullRepayRequest && bonusBps < BASIS_POINTS * 10) {
    frame_dig 33
    bnz liquidatePartialAlgo_after_if_else@20
    frame_dig 3
    pushint 100000 // 100000
    <
    frame_dig 13
    frame_bury 14
    bz liquidatePartialAlgo_after_if_else@20
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1643
    // const [hMaxUsd, lMaxUsd] = mulw(collateralUSD, BASIS_POINTS)
    frame_dig 28
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1643
    // const [hMaxUsd, lMaxUsd] = mulw(collateralUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1644
    // const maxRepayUSDForCollateral: uint64 = divw(hMaxUsd, lMaxUsd, BASIS_POINTS + bonusBps)
    frame_dig 3
    +
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:434
    // assert(oraclePriceMicroUsd > 0, 'BAD_PRICE')
    frame_dig 32
    dup
    cover 2
    assert // BAD_PRICE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:435
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:436
    // const [h, l] = mulw(usdMicro, scale)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:437
    // return divw(h, l, oraclePriceMicroUsd)
    uncover 2
    divw
    dup
    frame_bury 7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1650
    // if (repayCandidate > maxRepayBaseForCollateral) repayCandidate = maxRepayBaseForCollateral
    frame_dig 13
    <
    bz liquidatePartialAlgo_after_if_else@19
    frame_dig 7
    frame_bury 13

liquidatePartialAlgo_after_if_else@19:
    frame_dig 13
    frame_bury 14

liquidatePartialAlgo_after_if_else@20:
    frame_dig 14
    dup
    frame_bury 13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    swap
    frame_dig 32
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1655
    // const [hSZ, lSZ] = mulw(repayUSD, BASIS_POINTS + bonusBps)
    frame_dig 3
    +
    dup
    frame_bury 20
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1656
    // const seizeUSD: uint64 = divw(hSZ, lSZ, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig 24
    concat
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1512
    // const underlyingPrice = this.getOraclePrice(this.getCollateral(collateralTokenId).baseAssetId) // USD
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    dig 1
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1516
    // this.getCollateral(collateralTokenId).baseAssetDecimals.native,
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:434
    // assert(oraclePriceMicroUsd > 0, 'BAD_PRICE')
    dig 1
    assert // BAD_PRICE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:435
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:436
    // const [h, l] = mulw(usdMicro, scale)
    uncover 3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:437
    // return divw(h, l, oraclePriceMicroUsd)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    swap
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1520
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 48 // 48
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1523-1526
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1525
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1523-1526
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1527-1530
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 18 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1529
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1527-1530
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1531
    // const [hL, lL] = mulw(seizeUnderlying, circ)
    cover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1532
    // let seizeLST: uint64 = divw(hL, lL, total)
    uncover 2
    divw
    dup
    frame_bury 18
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1534
    // if (seizeLST > availableLST) seizeLST = availableLST
    frame_dig 25
    >
    bz liquidatePartialAlgo_after_if_else@47
    frame_dig 25
    frame_bury 18

liquidatePartialAlgo_after_if_else@47:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1659
    // assert(seizeLST > 0, 'NOTHING_TO_SEIZE')
    frame_dig 18
    dup
    assert // NOTHING_TO_SEIZE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1545
    // if (seizeLST === 0) return 0
    bnz liquidatePartialAlgo_after_if_else@51
    intc_0 // 0
    frame_bury 15

liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayBaseFromSeizedLST@52:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1662
    // if (repaySupported > liveDebt) {
    frame_dig 15
    frame_dig 27
    >
    bz liquidatePartialAlgo_after_if_else@22
    frame_dig 27
    frame_bury 15

liquidatePartialAlgo_after_if_else@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1666
    // if (seizeLST === collLSTBal) {
    frame_dig 18
    frame_dig 25
    ==
    dup
    frame_bury 21
    bz liquidatePartialAlgo_after_if_else@24
    frame_dig 31
    frame_bury 13

liquidatePartialAlgo_after_if_else@24:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1670
    // const proposedRepayUsed: uint64 = repayCandidate <= repaySupported ? repayCandidate : repaySupported
    frame_dig 13
    dup
    frame_dig 15
    dup
    cover 2
    <=
    swap
    cover 2
    select
    frame_bury 10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1672
    // if (!isFullRepayRequest && seizeLST === collLSTBal && proposedRepayUsed < liveDebt) {
    frame_dig 33
    bnz liquidatePartialAlgo_after_if_else@28
    frame_dig 21
    bz liquidatePartialAlgo_after_if_else@28
    frame_dig 10
    frame_dig 27
    <
    !
    assert // FULL_REPAY_REQUIRED

liquidatePartialAlgo_after_if_else@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1676-1680
    // const repayUsed: uint64 = isFullRepayRequest
    //   ? repayRequested <= liveDebt
    //     ? repayRequested
    //     : liveDebt
    //   : proposedRepayUsed
    frame_dig 33
    bz liquidatePartialAlgo_ternary_false@30
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1677
    // ? repayRequested <= liveDebt
    frame_dig 31
    dup
    frame_dig 27
    dup
    cover 2
    <=
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1677-1679
    // ? repayRequested <= liveDebt
    //   ? repayRequested
    //   : liveDebt
    swap
    cover 2
    select
    frame_bury 17

liquidatePartialAlgo_ternary_merge@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1681
    // assert(repayUsed > 0, 'ZERO_REPAY_USED')
    frame_dig 17
    dup
    assert // ZERO_REPAY_USED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1682
    // const refundAmount: uint64 = repayRequested - repayUsed
    frame_dig 31
    dig 1
    -
    dup
    cover 2
    frame_bury 11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1684
    // const remainingLST: uint64 = collLSTBal - seizeLST
    frame_dig 25
    frame_dig 18
    dup
    cover 3
    -
    frame_bury 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1685
    // const newDebtBase: uint64 = liveDebt - repayUsed
    frame_dig 27
    swap
    -
    frame_bury 8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1687-1694
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1689
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1690
    // xferAsset: collTok.native,
    frame_dig 23
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1593
    // const collTok: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1690
    // xferAsset: collTok.native,
    extract_uint64
    dup
    frame_bury 6
    uncover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1687-1693
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1692
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1687-1694
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1696
    // if (refundAmount > 0) {
    bz liquidatePartialAlgo_after_if_else@35
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1697-1703
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1700
    // receiver: op.Txn.sender,
    txn Sender
    itxn_field Receiver
    frame_dig 11
    dup
    itxn_field Amount
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1697-1702
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1701
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1697-1703
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1704
    // this.removeCash(refundAmount)
    callsub removeCash

liquidatePartialAlgo_after_if_else@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1707
    // this.reduceCollateralTotal(collTok, seizeLST)
    frame_dig 24
    frame_dig 18
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1708
    // const borrowDelta: uint64 = repayUsed <= this.total_borrows.value ? repayUsed : this.total_borrows.value
    frame_dig 17
    >=
    bz liquidatePartialAlgo_ternary_false@37
    frame_dig 17

liquidatePartialAlgo_ternary_merge@38:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1709
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1709
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1710
    // this.addCash(repayRequested)
    frame_dig 31
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1712
    // if (newDebtBase === 0) {
    frame_dig 8
    bnz liquidatePartialAlgo_else_body@43
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1713
    // if (remainingLST > 0) {
    frame_dig 12
    bz liquidatePartialAlgo_after_if_else@42
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1714-1721
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 12
    dup
    itxn_field AssetAmount
    frame_dig 6
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1714-1720
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1719
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1714-1721
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1722
    // this.reduceCollateralTotal(collTok, remainingLST)
    frame_dig 24
    swap
    callsub reduceCollateralTotal

liquidatePartialAlgo_after_if_else@42:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1724
    // this.loan_record(debtor).delete()
    frame_dig 22
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1725
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:136
    // active_loan_records = GlobalState<uint64>()
    bytec 10 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1725
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put

liquidatePartialAlgo_after_if_else@44:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:121
    // last_apr_bps = GlobalState<uint64>()
    bytec 12 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

liquidatePartialAlgo_else_body@43:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1728
    // borrowerAddress: rec.borrowerAddress,
    frame_dig 26
    dup
    extract 0 32 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1729
    // collateralTokenId: rec.collateralTokenId,
    swap
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1730
    // collateralAmount: new UintN64(remainingLST),
    frame_dig 12
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1732
    // principal: new UintN64(newDebtBase),
    frame_dig 8
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:115
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1733
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1735
    // amount: new UintN64(repayUsed),
    frame_dig 17
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1736
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1734-1738
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4),
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1737
    // changeType: new UintN8(4),
    pushbytes 0x04
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1734-1738
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4),
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1727-1739
    // const newRec = new LoanRecord({
    //   borrowerAddress: rec.borrowerAddress,
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: new UintN64(remainingLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   principal: new UintN64(newDebtBase),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(4),
    //   }),
    // })
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    swap
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1740
    // this.loan_record(debtor).value = newRec.copy()
    frame_dig 22
    swap
    box_put
    b liquidatePartialAlgo_after_if_else@44

liquidatePartialAlgo_ternary_false@37:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:112
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    b liquidatePartialAlgo_ternary_merge@38

liquidatePartialAlgo_ternary_false@30:
    frame_dig 10
    frame_bury 17
    b liquidatePartialAlgo_ternary_merge@31

liquidatePartialAlgo_after_if_else@51:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    frame_dig 0
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1548
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    dup
    pushint 48 // 48
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1550-1553
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1552
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1550-1553
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1554-1557
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 18 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1556
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1554-1557
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1558
    // const [hUnderlying, lUnderlying] = mulw(seizeLST, total)
    frame_dig 18
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1559
    // const seizedUnderlying: uint64 = divw(hUnderlying, lUnderlying, circ)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1561
    // const underlyingPrice = this.getOraclePrice(collateral.baseAssetId) // USD
    dig 1
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1562
    // const seizeUSDActual: uint64 = this.amountToUsd(seizedUnderlying, underlyingPrice, collateral.baseAssetDecimals.native)
    uncover 2
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    cover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1564
    // const [hRepayUSD, lRepayUSD] = mulw(seizeUSDActual, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1565
    // const repayUSD: uint64 = divw(hRepayUSD, lRepayUSD, BASIS_POINTS + bonusBps)
    frame_dig 20
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:434
    // assert(oraclePriceMicroUsd > 0, 'BAD_PRICE')
    frame_dig 32
    dup
    cover 2
    assert // BAD_PRICE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:435
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:436
    // const [h, l] = mulw(usdMicro, scale)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:437
    // return divw(h, l, oraclePriceMicroUsd)
    uncover 2
    divw
    frame_bury 15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1661
    // let repaySupported: uint64 = this.repayBaseFromSeizedLST(seizeLST, collTok, lstAppId, bonusBps, basePrice)
    b liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayBaseFromSeizedLST@52

liquidatePartialAlgo_else_body@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1633
    // const gapUSD: uint64 = collateralUSD - debtUSDv
    frame_dig 28
    frame_dig 29
    -
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1634
    // const [hCap, lCap] = mulw(gapUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1635
    // const bonusCap: uint64 = divw(hCap, lCap, repayUSDcandidate)
    frame_dig 16
    divw
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1636
    // if (bonusCap < bonusBps) bonusBps = bonusCap
    frame_dig 3
    <
    bz liquidatePartialAlgo_after_if_else@12
    frame_dig 5
    frame_bury 3
    b liquidatePartialAlgo_after_if_else@12

liquidatePartialAlgo_ternary_false@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47
    // base_token_decimals = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "base_token_decimals"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    frame_dig 13
    frame_dig 32
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    frame_bury 16
    b liquidatePartialAlgo_ternary_merge@3

liquidatePartialAlgo_after_if_else@55:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:449
    // const over: uint64 = ltvBps - threshold
    frame_dig 30
    frame_dig 35
    dup
    cover 2
    -
    frame_bury 9
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:450
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    <
    bz liquidatePartialAlgo_ternary_false@57
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:450
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    frame_dig 35
    -

liquidatePartialAlgo_ternary_merge@58:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:452
    // const [h, l] = mulw(over, maxBonus)
    frame_dig 9
    frame_dig 34
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:453
    // let bonus: uint64 = divw(h, l, room)
    uncover 2
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:454
    // if (bonus === 0) bonus = 1
    bnz liquidatePartialAlgo_after_if_else@60
    intc_1 // 1
    frame_bury 2

liquidatePartialAlgo_after_if_else@60:
    frame_dig 2
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:455
    // if (bonus > maxBonus) bonus = maxBonus
    frame_dig 34
    >
    bz liquidatePartialAlgo_after_if_else@62
    frame_dig 34
    frame_bury 1

liquidatePartialAlgo_after_if_else@62:
    frame_dig 1
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1616
    // let bonusBps: uint64 = this.dynamicLiqBonusBps(ltvBps)
    b liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.dynamicLiqBonusBps@63

liquidatePartialAlgo_ternary_false@57:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:450
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    intc_1 // 1
    b liquidatePartialAlgo_ternary_merge@58


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.calculateCollateralValueUSD(collateralTokenId: bytes, collateralAmount: uint64) -> uint64:
calculateCollateralValueUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1780-1781
    // @abimethod({ allowActions: 'NoOp' })
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64): uint64 {
    proto 2 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:130
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 6 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:466
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1783
    // assert(this.collateralExists(collateralTokenId), 'unknown collateral')
    assert // unknown collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1786-1789
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateralInfo.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1787
    // appId: collateralInfo.originatingAppId.native,
    pushint 48 // 48
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1786-1789
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateralInfo.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    bytec 17 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    dup
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1788
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1786-1789
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: collateralInfo.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1791-1794
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: collateralInfo.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 18 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    swap
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1793
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1791-1794
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: collateralInfo.originatingAppId.native,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1797
    // const [hC, lC] = mulw(totalDepositsExternal, collateralAmount)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1798
    // const underlyingCollateral = divw(hC, lC, circulatingExternalLST)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:476
    // return this.accepted_collaterals(key).value.copy()
    swap
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1802
    // const baseTokenId = lstCollateral.baseAssetId
    dup
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1804
    // const baseTokenPrice = this.getOraclePrice(baseTokenId)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1807
    // const collateralUSD = this.amountToUsd(underlyingCollateral, baseTokenPrice, lstCollateral.baseAssetDecimals.native)
    swap
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:425
    // const scale = this.decimalScale(tokenDecimals)
    callsub decimalScale
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:426
    // const [h, l] = mulw(amountAtomic, oraclePriceMicroUsd)
    cover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427
    // return divw(h, l, scale)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1809
    // return collateralUSD
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.pickupAlgoRewards() -> void:
pickupAlgoRewards:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1917-1918
    // @abimethod({ allowActions: 'NoOp' })
    // public pickupAlgoRewards(): void {
    proto 0 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1919
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1919
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    ==
    assert // Only admin can pickup rewards
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:174
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1920
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1922
    // const spendable: uint64 = Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance
    global CurrentApplicationAddress
    acct_params_get AcctBalance
    assert // account funded
    global CurrentApplicationAddress
    acct_params_get AcctMinBalance
    assert // account funded
    -
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1924
    // if (spendable <= this.cash_on_hand.value) {
    <=
    bz pickupAlgoRewards_after_if_else@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1925
    // return // no new consensus payout to harvest
    retsub

pickupAlgoRewards_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1928
    // const rawReward: uint64 = spendable - this.cash_on_hand.value
    frame_dig 1
    swap
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/config.algo.ts:15
    // export const MINIMUM_ADDITIONAL_REWARD: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1929
    // if (rawReward <= MINIMUM_ADDITIONAL_REWARD) {
    <=
    bz pickupAlgoRewards_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1930
    // return // defer tiny rewards
    retsub

pickupAlgoRewards_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1933
    // this.addCash(rawReward)
    frame_dig 0
    dup
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:153
    // commission_percentage = GlobalState<uint64>()
    intc_0 // 0
    bytec 39 // "commission_percentage"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1935
    // const [hi, lo] = mulw(rawReward, this.commission_percentage.value)
    dig 1
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1936
    // const commission: uint64 = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:155
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1938
    // this.current_accumulated_commission.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:155
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 22 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1938
    // this.current_accumulated_commission.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // total_commission_earned = GlobalState<uint64>()
    intc_0 // 0
    bytec 32 // "total_commission_earned"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1939
    // this.total_commission_earned.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // total_commission_earned = GlobalState<uint64>()
    bytec 32 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1939
    // this.total_commission_earned.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1941
    // const netReward: uint64 = rawReward - commission
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // total_additional_rewards = GlobalState<uint64>()
    intc_0 // 0
    bytec 33 // "total_additional_rewards"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1942
    // this.total_additional_rewards.value += netReward
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // total_additional_rewards = GlobalState<uint64>()
    bytec 33 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1942
    // this.total_additional_rewards.value += netReward
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1943
    // this.total_deposits.value += netReward
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    bytec_3 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1943
    // this.total_deposits.value += netReward
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getCirculatingLST() -> uint64:
getCirculatingLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1960
    // return this.circulating_lst.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getTotalDeposits() -> uint64:
getTotalDeposits:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:60
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec_3 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1968
    // return this.total_deposits.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getAcceptedCollateralsCount() -> uint64:
getAcceptedCollateralsCount:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:139
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1976
    // return this.accepted_collaterals_count.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.goOnline(feePayment: uint64, votePK: bytes, selectionPK: bytes, stateProofPK: bytes, voteFirst: uint64, voteLast: uint64, voteKeyDilution: uint64) -> void:
goOnline:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1989-1998
    // @abimethod({ allowActions: 'NoOp' })
    // public goOnline(
    //   feePayment: gtxn.PaymentTxn,
    //   votePK: bytes,
    //   selectionPK: bytes,
    //   stateProofPK: bytes,
    //   voteFirst: uint64,
    //   voteLast: uint64,
    //   voteKeyDilution: uint64,
    // ): void {
    proto 7 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1999
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go online')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1999
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go online')
    ==
    assert // Only admin can go online
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1952
    // return Global.payoutsGoOnlineFee
    global PayoutsGoOnlineFee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2002-2006
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    frame_dig -7
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2002-2006
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    ==
    bz goOnline_bool_false@4
    frame_dig -7
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2004
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2002-2006
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    ==
    bz goOnline_bool_false@4
    frame_dig -7
    gtxns Amount
    frame_dig 0
    ==
    bz goOnline_bool_false@4
    intc_1 // 1

goOnline_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2002-2006
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2007-2017
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -1
    itxn_field VoteKeyDilution
    frame_dig -2
    itxn_field VoteLast
    frame_dig -3
    itxn_field VoteFirst
    frame_dig -4
    itxn_field StateProofPK
    frame_dig -5
    itxn_field SelectionPK
    frame_dig -6
    itxn_field VotePK
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2007-2016
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    pushint 2 // 2
    itxn_field TypeEnum
    frame_dig 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2007-2017
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    //   .submit()
    itxn_submit
    retsub

goOnline_bool_false@4:
    intc_0 // 0
    b goOnline_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.goOffline() -> void:
goOffline:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2025
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go offline')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec 4 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2025
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go offline')
    ==
    assert // Only admin can go offline
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2026
    // itxn.keyRegistration({ fee: 0 }).submit()
    itxn_begin
    pushint 2 // 2
    itxn_field TypeEnum
    intc_0 // 0
    itxn_field Fee
    itxn_submit
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addCash(amount: uint64) -> void:
addCash:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2040
    // private addCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2041
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    bytec 13 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2041
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.removeCash(amount: uint64) -> void:
removeCash:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2049
    // private removeCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2050
    // assert(this.cash_on_hand.value >= amount, 'INSUFFICIENT_CASH')
    frame_dig -1
    >=
    assert // INSUFFICIENT_CASH
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2051
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // cash_on_hand = GlobalState<uint64>()
    bytec 13 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2051
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    swap
    app_global_put
    retsub
