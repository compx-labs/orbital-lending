#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 0 1 1000 4 10000 1000000 1000000000000
    bytecblock "base_token_id" 0x151f7c75 "loan_record" "admin_account" "total_deposits" "active_loan_records" "total_borrows" "circulating_lst" "accepted_collaterals" "last_apr_bps" "borrow_index_wad" "liq_threshold_bps" "lst_token_id" "base_bps" "max_apr_bps" "prev_apr_bps" 0x09ef525f 0xae859f3b "buyout_token_id" 0x00 "ltv_bps" "accepted_collaterals_count" "last_accrual_ts" "fee_pool" "util_cap_bps" "rate_model_type" "kink_norm_bps" "slope1_bps" "slope2_bps" "ema_alpha_bps" "max_apr_step_bps" "util_ema_bps" "params_update_nonce" "origination_fee_bps" "protocol_share_bps" "oracle_app" "borrow_gate_enabled" "power_gamma_q16" "scarcity_K_bps" "last_scaled_down_disbursement" "last_max_borrow" "last_requested_loan" "debug_diff" "params_updated_at"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn NumAppArgs
    bz main_after_if_else@35
    pushbytess 0x3b01665e 0x7a6ddbe9 0x6ca100cd 0x17c33662 0x5efce39a 0x5cac25a9 // method "createApplication(account,uint64)void", method "initApplication(pay,uint64,uint64,uint64,uint64,uint64,application,uint64)void", method "setRateParams(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)void", method "generateLSTToken(pay)void", method "optInToLST(uint64,pay)void", method "configureLSTToken(axfer,uint64)void"
    bytec 16 // method "getCirculatingLST()uint64"
    bytec 17 // method "getTotalDeposits()uint64"
    pushbytess 0x6c6337c0 0xe596ac73 0x4f2c6e55 0x72c5c57b 0xbae4c238 0x3e41a49b 0x15a5b25e 0x8553cffa 0xb4a74766 0xae99f45b 0x3dea8a60 0xbed00024 0xf1f38ba6 0xf0f3aafa 0xd0e69812 0x5f0d6f03 0x836dbb73 0xf16507ce 0xdaa7f7f2 0x3172ca9d 0xef0bd27a // method "getAcceptedCollateralsCount()uint64", method "getOraclePrice(uint64)uint64", method "addNewCollateralType(uint64,uint64,pay)void", method "depositASA(axfer,uint64,pay)void", method "depositAlgo(pay,uint64,pay)void", method "withdrawDeposit(axfer,uint64,uint64,pay)void", method "borrow(axfer,uint64,uint64,uint64,uint64,pay)void", method "accrueLoanInterest(account,account)void", method "current_apr_bps()uint64", method "getLoanRecord(account)(address,uint64,uint64,(uint64,uint8,uint64),uint64,uint64,uint64)", method "repayLoanASA(axfer,uint64)void", method "repayLoanAlgo(pay,uint64)void", method "buyoutSplitASA(account,account,axfer,axfer,uint64)void", method "buyoutSplitAlgo(account,account,axfer,axfer,uint64)void", method "maxWithdrawableCollateralLST(uint64)uint64", method "withdrawCollateral(uint64,uint64,uint64)void", method "liquidateASA(account,axfer)void", method "liquidateAlgo(account,pay)void", method "getLoanStatus(account)(uint64,uint64,uint64,uint64,uint64,bool,bool)", method "gas()void", method "calculateCollateralValueUSD(uint64,uint64,uint64)uint64"
    txna ApplicationArgs 0
    match main_createApplication_route@3 main_initApplication_route@4 main_setRateParams_route@5 main_generateLSTToken_route@6 main_optInToLST_route@7 main_configureLSTToken_route@8 main_getCirculatingLST_route@9 main_getTotalDeposits_route@10 main_getAcceptedCollateralsCount_route@11 main_getOraclePrice_route@12 main_addNewCollateralType_route@13 main_depositASA_route@14 main_depositAlgo_route@15 main_withdrawDeposit_route@16 main_borrow_route@17 main_accrueLoanInterest_route@18 main_current_apr_bps_route@19 main_getLoanRecord_route@20 main_repayLoanASA_route@21 main_repayLoanAlgo_route@22 main_buyoutSplitASA_route@23 main_buyoutSplitAlgo_route@24 main_maxWithdrawableCollateralLST_route@25 main_withdrawCollateral_route@26 main_liquidateASA_route@27 main_liquidateAlgo_route@28 main_getLoanStatus_route@29 main_gas_route@30 main_calculateCollateralValueUSD_route@31

main_after_if_else@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    intc_0 // 0
    return

main_calculateCollateralValueUSD_route@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1818
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1818
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    callsub calculateCollateralValueUSD
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_gas_route@30:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1800
    // gas(): void {}
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    intc_1 // 1
    return

main_getLoanStatus_route@29:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764
    // @abimethod({ allowActions: 'NoOp' })
    callsub getLoanStatus
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    uncover 6
    itob
    bytec 19 // 0x00
    intc_0 // 0
    uncover 8
    setbit
    bytec 19 // 0x00
    intc_0 // 0
    uncover 8
    setbit
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    intc_0 // 0
    getbit
    pushint 321 // 321
    swap
    setbit
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_liquidateAlgo_route@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1715
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1715
    // @abimethod({ allowActions: 'NoOp' })
    callsub liquidateAlgo
    intc_1 // 1
    return

main_liquidateASA_route@27:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1662
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1662
    // @abimethod({ allowActions: 'NoOp' })
    callsub liquidateASA
    intc_1 // 1
    return

main_withdrawCollateral_route@26:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1608
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1608
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawCollateral
    intc_1 // 1
    return

main_maxWithdrawableCollateralLST_route@25:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1501
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1501
    // @abimethod({ allowActions: 'NoOp' })
    callsub maxWithdrawableCollateralLST
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_buyoutSplitAlgo_route@24:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1371
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1371
    // @abimethod({ allowActions: 'NoOp' })
    callsub buyoutSplitAlgo
    intc_1 // 1
    return

main_buyoutSplitASA_route@23:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260
    // @abimethod({ allowActions: 'NoOp' })
    callsub buyoutSplitASA
    intc_1 // 1
    return

main_repayLoanAlgo_route@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1179
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1179
    // @abimethod({ allowActions: 'NoOp' })
    callsub repayLoanAlgo
    intc_1 // 1
    return

main_repayLoanASA_route@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1086
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1086
    // @abimethod({ allowActions: 'NoOp' })
    callsub repayLoanASA
    intc_1 // 1
    return

main_getLoanRecord_route@20:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1073
    // getLoanRecord(borrowerAddress: Account): LoanRecord {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1073
    // getLoanRecord(borrowerAddress: Account): LoanRecord {
    callsub getLoanRecord
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_current_apr_bps_route@19:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:878
    // public current_apr_bps(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub current_apr_bps
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_accrueLoanInterest_route@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:827
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:827
    // @abimethod({ allowActions: 'NoOp' })
    callsub accrueLoanInterest
    intc_1 // 1
    return

main_borrow_route@17:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:734
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:734
    // @abimethod({ allowActions: 'NoOp' })
    callsub borrow
    intc_1 // 1
    return

main_withdrawDeposit_route@16:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:679
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:679
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawDeposit
    intc_1 // 1
    return

main_depositAlgo_route@15:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:637
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:637
    // @abimethod({ allowActions: 'NoOp' })
    callsub depositAlgo
    intc_1 // 1
    return

main_depositASA_route@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:591
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:591
    // @abimethod({ allowActions: 'NoOp' })
    callsub depositASA
    intc_1 // 1
    return

main_addNewCollateralType_route@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:514
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:514
    // @abimethod({ allowActions: 'NoOp' })
    callsub addNewCollateralType
    intc_1 // 1
    return

main_getOraclePrice_route@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:456
    // getOraclePrice(tokenId: UintN64): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:456
    // getOraclePrice(tokenId: UintN64): uint64 {
    callsub getOraclePrice
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getAcceptedCollateralsCount_route@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:446
    // getAcceptedCollateralsCount(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getAcceptedCollateralsCount
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getTotalDeposits_route@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:438
    // getTotalDeposits(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getTotalDeposits
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getCirculatingLST_route@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:430
    // getCirculatingLST(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getCirculatingLST
    itob
    bytec_1 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_configureLSTToken_route@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:415
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:415
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    callsub configureLSTToken
    intc_1 // 1
    return

main_optInToLST_route@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:390
    // public optInToLST(lstAssetId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:390
    // public optInToLST(lstAssetId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    callsub optInToLST
    intc_1 // 1
    return

main_generateLSTToken_route@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:358
    // public generateLSTToken(mbrTxn: gtxn.PaymentTxn): void {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:358
    // public generateLSTToken(mbrTxn: gtxn.PaymentTxn): void {
    callsub generateLSTToken
    intc_1 // 1
    return

main_setRateParams_route@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:301-314
    // public setRateParams(
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   borrow_gate_enabled: uint64, // or uint8
    //   ema_alpha_bps: uint64,
    //   max_apr_step_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   power_gamma_q16: uint64,
    //   scarcity_K_bps: uint64,
    // ) {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txna ApplicationArgs 9
    btoi
    txna ApplicationArgs 10
    btoi
    txna ApplicationArgs 11
    btoi
    txna ApplicationArgs 12
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:301-314
    // public setRateParams(
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   borrow_gate_enabled: uint64, // or uint8
    //   ema_alpha_bps: uint64,
    //   max_apr_step_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   power_gamma_q16: uint64,
    //   scarcity_K_bps: uint64,
    // ) {
    callsub setRateParams
    intc_1 // 1
    return

main_initApplication_route@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:216
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    txnas Applications
    txna ApplicationArgs 7
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:216
    // @abimethod({ allowActions: 'NoOp' })
    callsub initApplication
    intc_1 // 1
    return

main_createApplication_route@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:199
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    !
    assert // can only call when creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:47-48
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:199
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    callsub createApplication
    intc_1 // 1
    return


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.createApplication(admin: bytes, baseTokenId: uint64) -> void:
createApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:199-200
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    // public createApplication(admin: Account, baseTokenId: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    bytec_3 // "admin_account"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:201
    // this.admin_account.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:202
    // this.base_token_id.value = new UintN64(baseTokenId)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    bytec_0 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:202
    // this.base_token_id.value = new UintN64(baseTokenId)
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.initApplication(mbrTxn: uint64, ltv_bps: uint64, liq_threshold_bps: uint64, origination_fee_bps: uint64, protocol_share_bps: uint64, borrow_gate_enabled: uint64, oracle_app_id: uint64, buyout_token_id: uint64) -> void:
initApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:216-226
    // @abimethod({ allowActions: 'NoOp' })
    // public initApplication(
    //   mbrTxn: gtxn.PaymentTxn,
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   origination_fee_bps: uint64,
    //   protocol_share_bps: uint64,
    //   borrow_gate_enabled: uint64,
    //   oracle_app_id: Application,
    //   buyout_token_id: uint64,
    // ): void {
    proto 8 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:227
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:227
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229-232
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_CREATE_APP,
    // })
    frame_dig -8
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229-232
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_CREATE_APP,
    // })
    ==
    bz initApplication_bool_false@3
    frame_dig -8
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:3
    // export const MBR_CREATE_APP: uint64 = 400_000
    pushint 400000 // 400000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229-232
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_CREATE_APP,
    // })
    ==
    bz initApplication_bool_false@3
    intc_1 // 1

initApplication_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229-232
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_CREATE_APP,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    bytec 20 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:234
    // this.ltv_bps.value = ltv_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 11 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:235
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:93
    // origination_fee_bps = GlobalState<uint64>()
    bytec 33 // "origination_fee_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:236
    // this.origination_fee_bps.value = origination_fee_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:169
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 21 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:237
    // this.accepted_collaterals_count.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // fee_pool = GlobalState<uint64>()
    bytec 23 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:238
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:239
    // this.circulating_lst.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:240
    // this.total_deposits.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:241
    // this.active_loan_records.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:96
    // protocol_share_bps = GlobalState<uint64>()
    bytec 34 // "protocol_share_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:242
    // this.protocol_share_bps.value = protocol_share_bps
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // oracle_app = GlobalState<Application>()
    bytec 35 // "oracle_app"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:243
    // this.oracle_app.value = oracle_app_id
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:117
    // borrow_gate_enabled = GlobalState<uint64>()
    bytec 36 // "borrow_gate_enabled"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:244
    // this.borrow_gate_enabled.value = borrow_gate_enabled
    frame_dig -3
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    bytec 12 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:245
    // this.lst_token_id.value = new UintN64(99)
    pushbytes 0x0000000000000063
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    bytec 13 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:246
    // this.base_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:102
    // util_cap_bps = GlobalState<uint64>()
    bytec 24 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:247
    // this.util_cap_bps.value = 8000 // 80% utilization cap
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:248
    // this.total_borrows.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:132
    // rate_model_type = GlobalState<uint64>()
    bytec 25 // "rate_model_type"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:249
    // this.rate_model_type.value = 0 // Default to kinked model
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:105
    // kink_norm_bps = GlobalState<uint64>()
    bytec 26 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:250
    // this.kink_norm_bps.value = 5000 // 50% kink point
    pushint 5000 // 5000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:108
    // slope1_bps = GlobalState<uint64>()
    bytec 27 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:251
    // this.slope1_bps.value = 1000 // 10% slope to kink
    intc_2 // 1000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:111
    // slope2_bps = GlobalState<uint64>()
    bytec 28 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:252
    // this.slope2_bps.value = 2000 // 20% slope after kink
    pushint 2000 // 2000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    bytec 14 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:253
    // this.max_apr_bps.value = 6000 // 60% APR Cap by Default
    pushint 6000 // 6000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:120
    // ema_alpha_bps = GlobalState<uint64>()
    bytec 29 // "ema_alpha_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:254
    // this.ema_alpha_bps.value = 0 // No EMA smoothing by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:123
    // max_apr_step_bps = GlobalState<uint64>()
    bytec 30 // "max_apr_step_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:255
    // this.max_apr_step_bps.value = 0 // No max APR step by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    bytec 15 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:256
    // this.prev_apr_bps.value = 50 // Same as base_bps by default
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:129
    // util_ema_bps = GlobalState<uint64>()
    bytec 31 // "util_ema_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:257
    // this.util_ema_bps.value = 0 // No utilization EMA by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:135
    // power_gamma_q16 = GlobalState<uint64>()
    bytec 37 // "power_gamma_q16"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:258
    // this.power_gamma_q16.value = 0 // No power curve by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:138
    // scarcity_K_bps = GlobalState<uint64>()
    bytec 38 // "scarcity_K_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:259
    // this.scarcity_K_bps.value = 0 // No scarcity parameter by default
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:179
    // last_scaled_down_disbursement = GlobalState<uint64>()
    bytec 39 // "last_scaled_down_disbursement"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:260
    // this.last_scaled_down_disbursement.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:182
    // last_max_borrow = GlobalState<uint64>()
    bytec 40 // "last_max_borrow"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:261
    // this.last_max_borrow.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:185
    // last_requested_loan = GlobalState<uint64>()
    bytec 41 // "last_requested_loan"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:262
    // this.last_requested_loan.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188
    // debug_diff = GlobalState<uint64>()
    bytec 42 // "debug_diff"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:263
    // this.debug_diff.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:190
    // params_updated_at = GlobalState<uint64>() // last params change timestamp (ledger seconds)
    bytec 43 // "params_updated_at"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:264
    // this.params_updated_at.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:191
    // params_update_nonce = GlobalState<uint64>() // monotonic counter
    bytec 32 // "params_update_nonce"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:265
    // this.params_update_nonce.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    bytec 10 // "borrow_index_wad"
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 6 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:266
    // this.borrow_index_wad.value = INDEX_SCALE
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // last_accrual_ts = GlobalState<uint64>()
    bytec 22 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:267
    // this.last_accrual_ts.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:268
    // this.last_apr_bps.value = this.base_bps.value
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:269
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // buyout_token_id = GlobalState<UintN64>()
    bytec 18 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:269
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:153
    // total_borrows_principal = GlobalState<uint64>()
    pushbytes "total_borrows_principal"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:271
    // this.total_borrows_principal.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:273
    // if (this.base_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:274-281
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:276
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:277
    // xferAsset: this.base_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:278
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:274-280
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:274-281
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@7:
    retsub

initApplication_bool_false@3:
    intc_0 // 0
    b initApplication_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setRateParams(base_bps: uint64, util_cap_bps: uint64, kink_norm_bps: uint64, slope1_bps: uint64, slope2_bps: uint64, max_apr_bps: uint64, borrow_gate_enabled: uint64, ema_alpha_bps: uint64, max_apr_step_bps: uint64, rate_model_type: uint64, power_gamma_q16: uint64, scarcity_K_bps: uint64) -> void:
setRateParams:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:301-314
    // public setRateParams(
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   borrow_gate_enabled: uint64, // or uint8
    //   ema_alpha_bps: uint64,
    //   max_apr_step_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   power_gamma_q16: uint64,
    //   scarcity_K_bps: uint64,
    // ) {
    proto 12 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:315
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:315
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:318
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    frame_dig -11
    bz setRateParams_bool_false@3
    frame_dig -11
    intc 4 // 10000
    <=
    bz setRateParams_bool_false@3
    intc_1 // 1

setRateParams_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:318
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    assert // BAD_UTIL_CAP
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:319
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    frame_dig -10
    bz setRateParams_bool_false@7
    frame_dig -10
    intc 4 // 10000
    <
    bz setRateParams_bool_false@7
    intc_1 // 1

setRateParams_bool_merge@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:319
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    assert // BAD_KINK
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:321
    // if (max_apr_bps > 0) {
    frame_dig -7
    bz setRateParams_after_if_else@14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:322
    // assert(max_apr_bps >= base_bps, 'BAD_MAX_APR')
    frame_dig -7
    frame_dig -12
    >=
    assert // BAD_MAX_APR

setRateParams_after_if_else@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:324
    // assert(ema_alpha_bps <= 10_000, 'BAD_EMA_ALPHA')
    frame_dig -5
    intc 4 // 10000
    <=
    assert // BAD_EMA_ALPHA
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:326
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    frame_dig -3
    bz setRateParams_bool_true@16
    frame_dig -3
    pushint 255 // 255
    ==
    bz setRateParams_bool_false@17

setRateParams_bool_true@16:
    intc_1 // 1

setRateParams_bool_merge@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:326
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    assert // UNSUPPORTED_MODEL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    bytec 13 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:329
    // this.base_bps.value = base_bps
    frame_dig -12
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:102
    // util_cap_bps = GlobalState<uint64>()
    bytec 24 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:330
    // this.util_cap_bps.value = util_cap_bps
    frame_dig -11
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:105
    // kink_norm_bps = GlobalState<uint64>()
    bytec 26 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:331
    // this.kink_norm_bps.value = kink_norm_bps
    frame_dig -10
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:108
    // slope1_bps = GlobalState<uint64>()
    bytec 27 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:332
    // this.slope1_bps.value = slope1_bps
    frame_dig -9
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:111
    // slope2_bps = GlobalState<uint64>()
    bytec 28 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // this.slope2_bps.value = slope2_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    bytec 14 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:334
    // this.max_apr_bps.value = max_apr_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:117
    // borrow_gate_enabled = GlobalState<uint64>()
    bytec 36 // "borrow_gate_enabled"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:335
    // this.borrow_gate_enabled.value = borrow_gate_enabled
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:120
    // ema_alpha_bps = GlobalState<uint64>()
    bytec 29 // "ema_alpha_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:336
    // this.ema_alpha_bps.value = ema_alpha_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:123
    // max_apr_step_bps = GlobalState<uint64>()
    bytec 30 // "max_apr_step_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:337
    // this.max_apr_step_bps.value = max_apr_step_bps
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:132
    // rate_model_type = GlobalState<uint64>()
    bytec 25 // "rate_model_type"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:338
    // this.rate_model_type.value = rate_model_type
    frame_dig -3
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:135
    // power_gamma_q16 = GlobalState<uint64>()
    bytec 37 // "power_gamma_q16"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:339
    // this.power_gamma_q16.value = power_gamma_q16
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:138
    // scarcity_K_bps = GlobalState<uint64>()
    bytec 38 // "scarcity_K_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:340
    // this.scarcity_K_bps.value = scarcity_K_bps
    frame_dig -1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:191
    // params_update_nonce = GlobalState<uint64>() // monotonic counter
    intc_0 // 0
    bytec 32 // "params_update_nonce"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:342
    // this.params_update_nonce.value += 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:191
    // params_update_nonce = GlobalState<uint64>() // monotonic counter
    bytec 32 // "params_update_nonce"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:342
    // this.params_update_nonce.value += 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:190
    // params_updated_at = GlobalState<uint64>() // last params change timestamp (ledger seconds)
    bytec 43 // "params_updated_at"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:343
    // this.params_updated_at.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:346
    // if (this.max_apr_bps.value > 0 && this.prev_apr_bps.value > this.max_apr_bps.value) {
    bz setRateParams_after_if_else@21
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "prev_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:346
    // if (this.max_apr_bps.value > 0 && this.prev_apr_bps.value > this.max_apr_bps.value) {
    >
    bz setRateParams_after_if_else@21
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "max_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    bytec 15 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:347
    // this.prev_apr_bps.value = this.max_apr_bps.value
    swap
    app_global_put

setRateParams_after_if_else@21:
    retsub

setRateParams_bool_false@17:
    intc_0 // 0
    b setRateParams_bool_merge@18

setRateParams_bool_false@7:
    intc_0 // 0
    b setRateParams_bool_merge@8

setRateParams_bool_false@3:
    intc_0 // 0
    b setRateParams_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.generateLSTToken(mbrTxn: uint64) -> void:
generateLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:358
    // public generateLSTToken(mbrTxn: gtxn.PaymentTxn): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:359
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:359
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360-363
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_INIT_APP,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360-363
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_INIT_APP,
    // })
    ==
    bz generateLSTToken_bool_false@3
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:4
    // export const MBR_INIT_APP: uint64 = 102_000
    pushint 102000 // 102000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360-363
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_INIT_APP,
    // })
    ==
    bz generateLSTToken_bool_false@3
    intc_1 // 1

generateLSTToken_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360-363
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_INIT_APP,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:367
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:368-379
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:370
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:371
    // total: baseToken.total,
    dig 1
    asset_params_get AssetTotal
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:372
    // decimals: baseToken.decimals,
    dig 2
    asset_params_get AssetDecimals
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:374
    // manager: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:375
    // unitName: 'c' + String(baseToken.unitName),
    dig 4
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:376
    // assetName: 'c' + String(baseToken.unitName),
    uncover 5
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    itxn_field ConfigAssetName
    itxn_field ConfigAssetUnitName
    itxn_field ConfigAssetManager
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:373
    // defaultFrozen: false,
    intc_0 // 0
    itxn_field ConfigAssetDefaultFrozen
    itxn_field ConfigAssetDecimals
    itxn_field ConfigAssetTotal
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:368-378
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    pushint 3 // 3
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:368-379
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    itxn CreatedAssetID
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:380
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    bytec 12 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:380
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    swap
    app_global_put
    retsub

generateLSTToken_bool_false@3:
    intc_0 // 0
    b generateLSTToken_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.optInToLST(lstAssetId: uint64, mbrTxn: uint64) -> void:
optInToLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:390
    // public optInToLST(lstAssetId: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:391
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:391
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392-395
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_OPT_IN_LST,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392-395
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_OPT_IN_LST,
    // })
    ==
    bz optInToLST_bool_false@3
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:5
    // export const MBR_OPT_IN_LST: uint64 = 2_000
    pushint 2000 // 2000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392-395
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_OPT_IN_LST,
    // })
    ==
    bz optInToLST_bool_false@3
    intc_1 // 1

optInToLST_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392-395
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_OPT_IN_LST,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:396
    // this.lst_token_id.value = new UintN64(lstAssetId)
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    bytec 12 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:396
    // this.lst_token_id.value = new UintN64(lstAssetId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:399-406
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:401
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:403
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:399-405
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:399-406
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub

optInToLST_bool_false@3:
    intc_0 // 0
    b optInToLST_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.configureLSTToken(axferTxn: uint64, circulating_lst: uint64) -> void:
configureLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:415
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:416
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:416
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 12 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:417
    // assert(this.lst_token_id.value.native === axferTxn.xferAsset.id, 'LST token not set')
    btoi
    frame_dig -2
    gtxns XferAsset
    ==
    assert // LST token not set
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:419-422
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:419-422
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:421
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:419-422
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    intc_1 // 1

configureLSTToken_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:419-422
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:423
    // this.circulating_lst.value = circulating_lst
    frame_dig -1
    app_global_put
    retsub

configureLSTToken_bool_false@3:
    intc_0 // 0
    b configureLSTToken_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getCirculatingLST() -> uint64:
getCirculatingLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:431
    // return this.circulating_lst.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getTotalDeposits() -> uint64:
getTotalDeposits:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:439
    // return this.total_deposits.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getAcceptedCollateralsCount() -> uint64:
getAcceptedCollateralsCount:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:169
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:447
    // return this.accepted_collaterals_count.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getOraclePrice(tokenId: bytes) -> uint64:
getOraclePrice:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:456
    // getOraclePrice(tokenId: UintN64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 35 // "oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:458
    // const address = oracle.address
    dup
    app_params_get AppAddress
    bury 1
    assert // application exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:461-465
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    pushbytes 0xac13e004 // method "getTokenPrice(uint64)(uint64,uint64,uint64)"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:461-465
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    pushint 12 // 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:467
    // return result.price.native
    extract_uint64
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.updateCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
updateCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:480
    // private updateCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:482
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:484
    // const newTotal: uint64 = collateral.totalCollateral.native + amount
    dup
    pushint 24 // 24
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:486
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:487
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:488
    // marketBaseAssetId: collateral.marketBaseAssetId,
    uncover 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:489
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:485-490
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    // }).copy()
    uncover 3
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.reduceCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
reduceCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:493
    // private reduceCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:495
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:497
    // assert(collateral.totalCollateral.native >= amount, 'INSUFFICIENT_COLLATERAL')
    dup
    pushint 24 // 24
    extract_uint64
    dup
    frame_dig -1
    >=
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:498
    // const newTotal: uint64 = collateral.totalCollateral.native - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:500
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:501
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:502
    // marketBaseAssetId: collateral.marketBaseAssetId,
    uncover 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:503
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:499-504
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    // }).copy()
    uncover 3
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addNewCollateralType(collateralTokenId: bytes, collateralBaseTokenId: bytes, mbrTxn: uint64) -> void:
addNewCollateralType:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:514-515
    // @abimethod({ allowActions: 'NoOp' })
    // addNewCollateralType(collateralTokenId: UintN64, collateralBaseTokenId: UintN64, mbrTxn: gtxn.PaymentTxn): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:516
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:517
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:517
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:518
    // assert(collateralTokenId.native !== baseToken.id)
    frame_dig -3
    btoi
    dup
    uncover 2
    !=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig -3
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:519
    // assert(!this.collateralExists(collateralTokenId))
    !
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:520-523
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_COLLATERAL,
    // })
    frame_dig -1
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:520-523
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_COLLATERAL,
    // })
    ==
    bz addNewCollateralType_bool_false@3
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:6
    // export const MBR_COLLATERAL: uint64 = 101_000
    pushint 101000 // 101000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:520-523
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_COLLATERAL,
    // })
    ==
    bz addNewCollateralType_bool_false@3
    intc_1 // 1

addNewCollateralType_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:520-523
    // assertMatch(mbrTxn, {
    //   sender: this.admin_account.value,
    //   amount: MBR_COLLATERAL,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525-530
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    // })
    frame_dig -3
    frame_dig -2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:529
    // totalCollateral: new UintN64(0),
    pushbytes 0x0000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525-530
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    // })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:532
    // this.accepted_collaterals(key).value = newAcceptedCollateral.copy()
    frame_dig 1
    dup
    uncover 2
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:169
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 21 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:533
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:169
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 21 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:533
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:534-542
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:536
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:537
    // assetReceiver: Global.currentApplicationAddress,
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:539
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    frame_dig 0
    itxn_field XferAsset
    itxn_field AssetReceiver
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:534-541
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:534-542
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:544
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    retsub

addNewCollateralType_bool_false@3:
    intc_0 // 0
    b addNewCollateralType_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.calculateLSTDue(amount: uint64) -> uint64:
calculateLSTDue:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:547
    // private calculateLSTDue(amount: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:548
    // const [highBits1, lowBits1] = mulw(this.circulating_lst.value, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:550
    // const lstRatio = divw(highBits1, lowBits1, this.total_deposits.value)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:552
    // const [highBits2, lowBits2] = mulw(lstRatio, amount)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:553
    // return divw(highBits2, lowBits2, BASIS_POINTS)
    divw
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.depositASA(assetTransferTxn: uint64, amount: uint64, mbrTxn: uint64) -> void:
depositASA:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:591-592
    // @abimethod({ allowActions: 'NoOp' })
    // depositASA(assetTransferTxn: gtxn.AssetTransferTxn, amount: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:593
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:594-598
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:595
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:594-598
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    ==
    bz depositASA_bool_false@4
    frame_dig -3
    gtxns XferAsset
    frame_dig 0
    ==
    bz depositASA_bool_false@4
    frame_dig -3
    gtxns AssetAmount
    frame_dig -2
    ==
    bz depositASA_bool_false@4
    intc_1 // 1

depositASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:594-598
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:599-601
    // assertMatch(mbrTxn, {
    //   amount: STANDARD_TXN_FEE,
    // })
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:599-601
    // assertMatch(mbrTxn, {
    //   amount: STANDARD_TXN_FEE,
    // })
    ==
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:603
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:610
    // if (this.total_deposits.value === 0) {
    bnz depositASA_else_body@7
    frame_dig -2

depositASA_after_if_else@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:615-622
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:617
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 12 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:618
    // xferAsset: this.lst_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:615-621
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:615-622
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:624
    // this.circulating_lst.value += lstDue
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:624
    // this.circulating_lst.value += lstDue
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:625
    // this.total_deposits.value += amount
    frame_dig -2
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:625
    // this.total_deposits.value += amount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:626
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:626
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

depositASA_else_body@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:613
    // lstDue = this.calculateLSTDue(amount)
    frame_dig -2
    callsub calculateLSTDue
    b depositASA_after_if_else@8

depositASA_bool_false@4:
    intc_0 // 0
    b depositASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.depositAlgo(depositTxn: uint64, amount: uint64, mbrTxn: uint64) -> void:
depositAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:637-638
    // @abimethod({ allowActions: 'NoOp' })
    // depositAlgo(depositTxn: gtxn.PaymentTxn, amount: uint64, mbrTxn: gtxn.PaymentTxn): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:640-643
    // assertMatch(depositTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    frame_dig -3
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:641
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:640-643
    // assertMatch(depositTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    ==
    bz depositAlgo_bool_false@3
    frame_dig -3
    gtxns Amount
    frame_dig -2
    ==
    bz depositAlgo_bool_false@3
    intc_1 // 1

depositAlgo_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:640-643
    // assertMatch(depositTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:644-646
    // assertMatch(mbrTxn, {
    //   amount: STANDARD_TXN_FEE,
    // })
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:644-646
    // assertMatch(mbrTxn, {
    //   amount: STANDARD_TXN_FEE,
    // })
    ==
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:648
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:651
    // if (this.total_deposits.value === 0) {
    bnz depositAlgo_else_body@6
    frame_dig -2

depositAlgo_after_if_else@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:656-663
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:658
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 12 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:659
    // xferAsset: this.lst_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:656-662
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:656-663
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:665
    // this.circulating_lst.value += lstDue
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:665
    // this.circulating_lst.value += lstDue
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666
    // this.total_deposits.value += amount
    frame_dig -2
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666
    // this.total_deposits.value += amount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:667
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:667
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

depositAlgo_else_body@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:654
    // lstDue = this.calculateLSTDue(amount)
    frame_dig -2
    callsub calculateLSTDue
    b depositAlgo_after_if_else@7

depositAlgo_bool_false@3:
    intc_0 // 0
    b depositAlgo_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawDeposit(assetTransferTxn: uint64, amount: uint64, lstAppId: uint64, mbrTxn: uint64) -> void:
withdrawDeposit:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:679-685
    // @abimethod({ allowActions: 'NoOp' })
    // withdrawDeposit(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   amount: uint64,
    //   lstAppId: uint64,
    //   mbrTxn: gtxn.PaymentTxn,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:57
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 12 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:686
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:687-691
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    frame_dig -4
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:688
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:687-691
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@4
    frame_dig -4
    gtxns XferAsset
    frame_dig 0
    ==
    bz withdrawDeposit_bool_false@4
    frame_dig -4
    gtxns AssetAmount
    frame_dig -3
    ==
    bz withdrawDeposit_bool_false@4
    intc_1 // 1

withdrawDeposit_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:687-691
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:693-695
    // assertMatch(mbrTxn, {
    //   amount: 3000,
    // })
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:694
    // amount: 3000,
    pushint 3000 // 3000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:693-695
    // assertMatch(mbrTxn, {
    //   amount: 3000,
    // })
    ==
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:697
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:701
    // if (lstAppId === Global.currentApplicationId.id) {
    frame_dig -2
    global CurrentApplicationID
    ==
    bz withdrawDeposit_else_body@7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:579
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:580
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw

withdrawDeposit_after_if_else@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:707
    // assert(op.AssetHolding.assetBalance(Global.currentApplicationAddress, this.base_token_id.value.native)[0] >= asaDue)
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:707
    // assert(op.AssetHolding.assetBalance(Global.currentApplicationAddress, this.base_token_id.value.native)[0] >= asaDue)
    btoi
    asset_holding_get AssetBalance
    pop
    dig 1
    >=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:708-715
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:710
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:711
    // xferAsset: this.base_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:708-714
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:708-715
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: asaDue,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:717
    // this.circulating_lst.value -= amount // LST burned
    frame_dig -3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:717
    // this.circulating_lst.value -= amount // LST burned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:718
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:718
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:719
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:719
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

withdrawDeposit_else_body@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:559-562
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 16 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -2
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:559-562
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:563-566
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -2
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:563-566
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:569
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:570
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw
    b withdrawDeposit_after_if_else@8

withdrawDeposit_bool_false@4:
    intc_0 // 0
    b withdrawDeposit_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.borrow(assetTransferTxn: uint64, requestedLoanAmount: uint64, collateralAmount: uint64, lstApp: uint64, collateralTokenId: bytes, mbrTxn: uint64) -> void:
borrow:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:734-742
    // @abimethod({ allowActions: 'NoOp' })
    // borrow(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   requestedLoanAmount: uint64,
    //   collateralAmount: uint64,
    //   lstApp: uint64,
    //   collateralTokenId: UintN64,
    //   mbrTxn: gtxn.PaymentTxn,
    // ): void {
    proto 6 0
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:744
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:744
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    box_len
    dup
    uncover 2
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:745
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:747
    // if (hasLoan) {
    bz borrow_else_body@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:748
    // const existingCollateral = this.getLoanRecord(op.Txn.sender).collateralAmount
    txn Sender
    callsub getLoanRecord
    pushint 40 // 40
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:749
    // collateralToUse = existingCollateral.native
    extract_uint64
    frame_bury 0

borrow_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1808
    // assertMatch(mbrTxn, { amount: VALIDATE_BORROW_FEE })
    frame_dig -1
    gtxns Amount
    // smart_contracts/orbital_lending/config.algo.ts:8
    // export const VALIDATE_BORROW_FEE: uint64 = 4_000
    pushint 4000 // 4000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1808
    // assertMatch(mbrTxn, { amount: VALIDATE_BORROW_FEE })
    ==
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1810-1813
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    // })
    frame_dig -6
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1811
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1810-1813
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    // })
    ==
    bz borrow_bool_false@21
    frame_dig -6
    gtxns AssetAmount
    frame_dig -4
    ==
    bz borrow_bool_false@21
    intc_1 // 1

borrow_bool_merge@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1810-1813
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1815
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:754
    // const collateralUSD = this.calculateCollateralValueUSD(collateralTokenId, collateralToUse, lstApp)
    frame_dig -2
    frame_dig 0
    frame_dig -3
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 20 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:755
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    *
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:755
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:182
    // last_max_borrow = GlobalState<uint64>()
    bytec 40 // "last_max_borrow"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:756
    // this.last_max_borrow.value = maxBorrowUSD
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:757
    // const baseTokenOraclePrice: uint64 = this.getOraclePrice(this.base_token_id.value)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1849
    // const [rH, rL] = mulw(requestedLoanAmount, baseTokenOraclePrice)
    frame_dig -5
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1850
    // const requestedLoanUSD = divw(rH, rL, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:185
    // last_requested_loan = GlobalState<uint64>()
    bytec 41 // "last_requested_loan"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1853
    // this.last_requested_loan.value = requestedLoanUSD
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1854
    // this.debug_diff.value = maxBorrowUSD - requestedLoanUSD
    dup2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188
    // debug_diff = GlobalState<uint64>()
    bytec 42 // "debug_diff"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1854
    // this.debug_diff.value = maxBorrowUSD - requestedLoanUSD
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1856
    // assert(requestedLoanUSD <= maxBorrowUSD, 'exceeds LTV limit')
    >=
    assert // exceeds LTV limit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:93
    // origination_fee_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 33 // "origination_fee_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1862
    // const fee: uint64 = (requestedAmount * this.origination_fee_bps.value) / BASIS_POINTS
    frame_dig -5
    *
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1862
    // const fee: uint64 = (requestedAmount * this.origination_fee_bps.value) / BASIS_POINTS
    /
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1863
    // const disbursement: uint64 = requestedAmount - fee
    frame_dig -5
    dig 1
    -
    dup
    cover 2
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1865
    // this.fee_pool.value += fee
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:70
    // fee_pool = GlobalState<uint64>()
    bytec 23 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1865
    // this.fee_pool.value += fee
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:179
    // last_scaled_down_disbursement = GlobalState<uint64>()
    bytec 39 // "last_scaled_down_disbursement"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1866
    // this.last_scaled_down_disbursement.value = disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:761
    // if (hasLoan) {
    frame_dig 3
    bz borrow_else_body@5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:763
    // op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1880
    // const existingLoan = this.getLoanRecord(borrower)
    dup
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1882
    // const liveDebt: uint64 = this.syncBorrowerSnapshot(borrower)
    dig 1
    callsub syncBorrowerSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1890
    // const newDebt: uint64 = liveDebt + disbursement
    frame_dig 1
    dup
    cover 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1895
    // collateralTokenId: existingLoan.collateralTokenId,
    dig 1
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1896
    // collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    uncover 2
    pushint 40 // 40
    extract_uint64
    frame_dig -4
    +
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1899
    // amount: new UintN64(disbursement),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1900
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1898-1902
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1901
    // changeType: new UintN8(0), // borrow
    bytec 19 // 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1898-1902
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1903
    // principal: new UintN64(newDebt),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1904
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1893-1905
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1893-1905
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1908
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -2
    frame_dig -4
    callsub updateCollateralTotal

borrow_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:776
    // this.disburseFunds(op.Txn.sender, disbursement)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1911
    // if (this.base_token_id.value.native === 0) {
    btoi
    bnz borrow_else_body@10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1912-1918
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 1
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1912-1917
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1912-1918
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

borrow_after_if_else@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:777
    // this.total_borrows.value = this.total_borrows.value + disbursement
    frame_dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:777
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:778
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:778
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:780
    // this.payPlatformFees(this.base_token_id.value.native, fee)
    btoi
    frame_dig 2
    callsub payPlatformFees
    retsub

borrow_else_body@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1920-1927
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1923
    // xferAsset: this.base_token_id.value.native,
    btoi
    frame_dig 1
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1920-1926
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1920-1927
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    b borrow_after_if_else@12

borrow_else_body@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:772
    // this.mintLoanRecord(disbursement, collateralTokenId, op.Txn.sender, collateralAmount)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:794
    // collateralAmount: new UintN64(collateralAmount),
    frame_dig -4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:797
    // amount: new UintN64(disbursement),
    frame_dig 1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:798
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:796-800
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    dig 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:799
    // changeType: new UintN8(0), // borrow
    bytec 19 // 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:796-800
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:802
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:791-803
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 5
    frame_dig -2
    concat
    uncover 5
    concat
    uncover 2
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:791-803
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:805
    // this.active_loan_records.value = this.active_loan_records.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:805
    // this.active_loan_records.value = this.active_loan_records.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:773
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -2
    frame_dig -4
    callsub updateCollateralTotal
    b borrow_after_if_else@6

borrow_bool_false@21:
    intc_0 // 0
    b borrow_bool_merge@22

borrow_else_body@2:
    frame_dig -4
    frame_bury 0
    b borrow_after_if_else@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueLoanInterest(debtor: bytes, templateReserveAddress: bytes) -> void:
accrueLoanInterest:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:827-828
    // @abimethod({ allowActions: 'NoOp' })
    // accrueLoanInterest(debtor: Account, templateReserveAddress: Account): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:829
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:830
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:832
    // this.syncBorrowerSnapshot(debtor)
    frame_dig -2
    callsub syncBorrowerSnapshot
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:834
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:834
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.current_apr_bps() -> uint64:
current_apr_bps:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:878
    // public current_apr_bps(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    swap
    dup
    uncover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:102
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "util_cap_bps"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:842
    // if (D === 0) return 0
    bnz current_apr_bps_after_if_else@29
    intc_0 // 0
    frame_bury 0

current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@32:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:120
    // ema_alpha_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "ema_alpha_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:885
    // if (alpha === 0) {
    bnz current_apr_bps_else_body@2
    frame_dig 0
    frame_bury 1

current_apr_bps_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:132
    // rate_model_type = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "rate_model_type"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:897
    // let apr = this.rate_model_type.value === 0 ? this.apr_bps_kinked(U_used) : this.base_bps.value // Fixed APR fallback
    bnz current_apr_bps_ternary_false@5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:105
    // kink_norm_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "kink_norm_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:108
    // slope1_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 27 // "slope1_bps"
    app_global_get_ex
    swap
    frame_bury 10
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:111
    // slope2_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 28 // "slope2_bps"
    app_global_get_ex
    swap
    frame_bury 11
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:862
    // if (U_norm_bps <= kink_norm_bps) {
    frame_dig 1
    >=
    bz current_apr_bps_else_body@21
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:863
    // const [hi1, lo1] = mulw(slope1_bps, U_norm_bps)
    frame_dig 10
    frame_dig 1
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:864
    // apr = base_bps + divw(hi1, lo1, kink_norm_bps)
    uncover 3
    divw
    +
    frame_bury 3

current_apr_bps_after_if_else@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:114
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "max_apr_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 8
    assert // check GlobalState exists
    frame_dig 3
    frame_bury 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:873
    // if (maxCap > 0 && apr > maxCap) apr = maxCap
    bz current_apr_bps_after_if_else@25
    frame_dig 3
    dup
    frame_dig 8
    >
    swap
    frame_bury 4
    bz current_apr_bps_after_if_else@25
    frame_dig 8
    frame_bury 4

current_apr_bps_after_if_else@25:
    frame_dig 4
    frame_bury 3

current_apr_bps_ternary_merge@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:123
    // max_apr_step_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 30 // "max_apr_step_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 12
    assert // check GlobalState exists
    frame_dig 3
    frame_bury 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:901
    // if (stepMax > 0) {
    bz current_apr_bps_after_if_else@18
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "prev_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:902
    // const prevApr: uint64 = this.prev_apr_bps.value === 0 ? this.base_bps.value : this.prev_apr_bps.value
    bnz current_apr_bps_ternary_false@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    frame_bury 9

current_apr_bps_ternary_merge@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:903
    // const lo: uint64 = prevApr > stepMax ? prevApr - stepMax : 0
    frame_dig 9
    frame_dig 12
    >
    bz current_apr_bps_ternary_false@12
    frame_dig 9
    frame_dig 12
    -
    frame_bury 7

current_apr_bps_ternary_merge@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:904
    // const hi: uint64 = prevApr + stepMax
    frame_dig 9
    frame_dig 12
    +
    frame_bury 6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:905
    // if (apr < lo) apr = lo
    frame_dig 3
    frame_dig 7
    <
    bz current_apr_bps_after_if_else@15
    frame_dig 7
    frame_bury 3

current_apr_bps_after_if_else@15:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:906
    // if (apr > hi) apr = hi
    frame_dig 3
    frame_dig 6
    >
    bz current_apr_bps_after_if_else@17
    frame_dig 6
    frame_bury 3

current_apr_bps_after_if_else@17:
    frame_dig 3
    frame_bury 4

current_apr_bps_after_if_else@18:
    frame_dig 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    bytec 15 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:909
    // this.prev_apr_bps.value = apr
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:910
    // return apr
    frame_bury 0
    retsub

current_apr_bps_ternary_false@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:903
    // const lo: uint64 = prevApr > stepMax ? prevApr - stepMax : 0
    intc_0 // 0
    frame_bury 7
    b current_apr_bps_ternary_merge@13

current_apr_bps_ternary_false@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:126
    // prev_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "prev_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    frame_bury 9
    b current_apr_bps_ternary_merge@10

current_apr_bps_else_body@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:866
    // const over: uint64 = U_norm_bps - kink_norm_bps
    frame_dig 1
    uncover 2
    dup
    cover 2
    -
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:867
    // const denom: uint64 = BASIS_POINTS - kink_norm_bps
    uncover 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:868
    // const [hi2, lo2] = mulw(slope2_bps, over)
    frame_dig 11
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:869
    // apr = base_bps + slope1_bps + divw(hi2, lo2, denom)
    uncover 3
    frame_dig 10
    +
    cover 2
    uncover 3
    divw
    +
    frame_bury 3
    b current_apr_bps_after_if_else@22

current_apr_bps_ternary_false@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:99
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    frame_bury 3
    b current_apr_bps_ternary_merge@6

current_apr_bps_else_body@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:129
    // util_ema_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 31 // "util_ema_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:889
    // const oneMinus: uint64 = BASIS_POINTS - alpha
    frame_dig 2
    dup
    cover 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:890
    // const [hiA, loA] = mulw(alpha, U_raw)
    swap
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:891
    // const [hiB, loB] = mulw(oneMinus, prevU)
    uncover 2
    uncover 3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:892
    // U_used = divw(hiA, loA, BASIS_POINTS) + divw(hiB, loB, BASIS_POINTS)
    uncover 3
    uncover 3
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:892
    // U_used = divw(hiA, loA, BASIS_POINTS) + divw(hiB, loB, BASIS_POINTS)
    divw
    cover 2
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:892
    // U_used = divw(hiA, loA, BASIS_POINTS) + divw(hiB, loB, BASIS_POINTS)
    divw
    +
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:129
    // util_ema_bps = GlobalState<uint64>()
    bytec 31 // "util_ema_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:893
    // this.util_ema_bps.value = U_used
    swap
    app_global_put
    b current_apr_bps_after_if_else@3

current_apr_bps_after_if_else@29:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:845
    // const [hiCap, loCap] = mulw(D, cap_bps)
    frame_dig 13
    frame_dig 15
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:846
    // const capBorrow = divw(hiCap, loCap, BASIS_POINTS)
    divw
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:847
    // if (capBorrow === 0) return 0
    bnz current_apr_bps_after_if_else@31
    intc_0 // 0
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:880
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@32

current_apr_bps_after_if_else@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:849
    // const cappedB = B <= capBorrow ? B : capBorrow
    frame_dig 14
    dup
    frame_dig 5
    dup
    cover 2
    <=
    dig 1
    uncover 3
    uncover 2
    select
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:850
    // const [hiN, loN] = mulw(cappedB, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:851
    // return divw(hiN, loN, capBorrow)
    uncover 2
    divw
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:880
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@32


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.currentDebtFromSnapshot(rec: bytes) -> uint64, bytes:
currentDebtFromSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:929
    // private currentDebtFromSnapshot(rec: LoanRecord): uint64 {
    proto 1 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:930
    // const p: uint64 = rec.principal.native
    frame_dig -1
    pushint 73 // 73
    extract_uint64
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:931
    // if (p === 0) return 0
    bnz currentDebtFromSnapshot_after_if_else@2
    intc_0 // 0
    frame_dig -1
    uncover 2
    retsub

currentDebtFromSnapshot_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:932
    // const [hi, lo] = mulw(p, this.borrow_index_wad.value)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:933
    // return divw(hi, lo, rec.userIndexWad.native)
    frame_dig -1
    pushint 81 // 81
    extract_uint64
    divw
    frame_dig -1
    uncover 2
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.syncBorrowerSnapshot(borrower: bytes) -> uint64:
syncBorrowerSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:937
    // private syncBorrowerSnapshot(borrower: Account): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:938
    // const rec = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:939
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:942
    // collateralTokenId: rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:943
    // collateralAmount: rec.collateralAmount,
    dig 1
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:945
    // lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    uncover 3
    extract 48 17 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:946
    // principal: new UintN64(liveDebt),
    dig 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:947
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:940-948
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    //   principal: new UintN64(liveDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // })
    frame_dig -1
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:949
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:950
    // return liveDebt
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueMarket() -> uint64:
accrueMarket:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:955
    // private accrueMarket(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:956
    // const now: uint64 = Global.latestTimestamp
    global LatestTimestamp
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // last_accrual_ts = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "last_accrual_ts"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:958
    // if (now <= last) return 0
    <=
    bz accrueMarket_after_if_else@2
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:960
    // const deltaT: uint64 = now - last
    frame_dig 4
    frame_dig 5
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:916
    // if (deltaT === 0) return 0
    bnz accrueMarket_after_if_else@9
    intc_0 // 0
    frame_bury 2

accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:964
    // if (simpleWad === 0) {
    frame_dig 2
    bnz accrueMarket_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // last_accrual_ts = GlobalState<uint64>()
    bytec 22 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:965
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:966
    // return 0
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:972
    // const [hiI, loI] = mulw(oldIndex, simpleWad)
    dup
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 6 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:973
    // const incrIndex: uint64 = divw(hiI, loI, INDEX_SCALE)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:974
    // const newIndex: uint64 = oldIndex + incrIndex
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    bytec 10 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:975
    // this.borrow_index_wad.value = newIndex
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:981
    // let interest: uint64 = 0
    intc_0 // 0
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:982
    // if (totalBefore > 0) {
    bz accrueMarket_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:983
    // const [hiB, loB] = mulw(totalBefore, simpleWad)
    frame_dig 3
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 6 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:984
    // interest = divw(hiB, loB, INDEX_SCALE)
    divw
    frame_bury 1

accrueMarket_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:96
    // protocol_share_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 34 // "protocol_share_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:989
    // const deposBps: uint64 = BASIS_POINTS - protoBps
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:992
    // const [hiD, loD] = mulw(interest, deposBps)
    frame_dig 1
    dup
    uncover 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:993
    // const depositorInterest: uint64 = divw(hiD, loD, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:994
    // const protocolInterest: uint64 = interest - depositorInterest
    dup2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:998
    // this.total_borrows.value = totalBefore + interest
    frame_dig 3
    dig 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:998
    // this.total_borrows.value = totalBefore + interest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1001
    // this.total_deposits.value += depositorInterest
    uncover 2
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1001
    // this.total_deposits.value += depositorInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1004
    // this.payPlatformFees(this.base_token_id.value.native, protocolInterest)
    btoi
    swap
    callsub payPlatformFees
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:147
    // last_accrual_ts = GlobalState<uint64>()
    bytec 22 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1007
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1011
    // return interest
    frame_bury 0
    retsub

accrueMarket_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 9 // "last_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:919
    // const [h1, l1] = mulw(this.last_apr_bps.value, deltaT)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:16
    // export const SECONDS_PER_YEAR: uint64 = 365 * 24 * 60 * 60
    pushint 31536000 // 31536000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:921
    // const tmp2: uint64 = divw(h1, l1, SECONDS_PER_YEAR)
    divw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 6 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:924
    // const [h2, l2] = mulw(INDEX_SCALE, tmp2)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:925
    // const simpleWad: uint64 = divw(h2, l2, BASIS_POINTS)
    divw
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:963
    // const simpleWad: uint64 = this.sliceFactorWad(deltaT)
    b accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getLoanRecord(borrowerAddress: bytes) -> bytes:
getLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1073
    // getLoanRecord(borrowerAddress: Account): LoanRecord {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1074
    // return this.loan_record(borrowerAddress).value
    box_get
    assert // Box must have value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayLoanASA(assetTransferTxn: uint64, repaymentAmount: uint64) -> void:
repayLoanASA:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1086-1087
    // @abimethod({ allowActions: 'NoOp' })
    // repayLoanASA(assetTransferTxn: gtxn.AssetTransferTxn, repaymentAmount: uint64): void {
    proto 2 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1088
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1089-1093
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1090
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1089-1093
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    ==
    bz repayLoanASA_bool_false@4
    frame_dig -2
    gtxns XferAsset
    frame_dig 1
    ==
    bz repayLoanASA_bool_false@4
    frame_dig -2
    gtxns AssetAmount
    frame_dig -1
    ==
    bz repayLoanASA_bool_false@4
    intc_1 // 1

repayLoanASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1089-1093
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: baseToken,
    //   assetAmount: repaymentAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1094
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1095
    // const loanRecord = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1097
    // const rec = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1098
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1100
    // assert(repaymentAmount <= liveDebt)
    frame_dig -1
    dig 1
    <=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1102
    // const remainingDebt: uint64 = liveDebt - repaymentAmount
    frame_dig -1
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1105
    // this.total_borrows.value -= repaymentAmount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1105
    // this.total_borrows.value -= repaymentAmount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1107
    // if (remainingDebt === 0) {
    bnz repayLoanASA_else_body@8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1108
    // this.loan_record(op.Txn.sender).delete()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1108
    // this.loan_record(op.Txn.sender).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1109
    // this.active_loan_records.value -= 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1109
    // this.active_loan_records.value -= 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1111-1118
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1113
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1114
    // xferAsset: rec.collateralTokenId.native,
    swap
    dup
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1115
    // assetAmount: rec.collateralAmount.native,
    swap
    pushint 40 // 40
    extract_uint64
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1111-1117
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1111-1118
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub

repayLoanASA_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1122
    // borrowerAddress: new Address(op.Txn.sender.bytes),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1123
    // collateralTokenId: rec.collateralTokenId,
    swap
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1124
    // collateralAmount: rec.collateralAmount,
    swap
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1127
    // amount: new UintN64(repaymentAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1128
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1126-1130
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1129
    // changeType: new UintN8(2), // repay
    pushbytes 0x02
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1126-1130
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1131
    // principal: new UintN64(remainingDebt),
    frame_dig 0
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1132
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1121-1133
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1121
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1121-1133
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    retsub

repayLoanASA_bool_false@4:
    intc_0 // 0
    b repayLoanASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayLoanAlgo(paymentTxn: uint64, repaymentAmount: uint64) -> void:
repayLoanAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1179-1180
    // @abimethod({ allowActions: 'NoOp' })
    // repayLoanAlgo(paymentTxn: gtxn.PaymentTxn, repaymentAmount: uint64): void {
    proto 2 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182-1185
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1183
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182-1185
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    ==
    bz repayLoanAlgo_bool_false@3
    frame_dig -2
    gtxns Amount
    frame_dig -1
    ==
    bz repayLoanAlgo_bool_false@3
    intc_1 // 1

repayLoanAlgo_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1182-1185
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1186
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1187
    // const loanRecord = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1188
    // const rec = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1189
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1191
    // assert(repaymentAmount <= liveDebt)
    frame_dig -1
    dig 1
    <=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1193
    // const remainingDebt: uint64 = liveDebt - repaymentAmount
    frame_dig -1
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1196
    // this.total_borrows.value -= repaymentAmount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1196
    // this.total_borrows.value -= repaymentAmount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1198
    // if (remainingDebt === 0) {
    bnz repayLoanAlgo_else_body@7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1199
    // this.loan_record(op.Txn.sender).delete()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1199
    // this.loan_record(op.Txn.sender).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1200
    // this.active_loan_records.value -= 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1200
    // this.active_loan_records.value -= 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1202-1209
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1204
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1205
    // xferAsset: rec.collateralTokenId.native,
    swap
    dup
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1206
    // assetAmount: rec.collateralAmount.native,
    swap
    pushint 40 // 40
    extract_uint64
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1202-1208
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1202-1209
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub

repayLoanAlgo_else_body@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1213
    // borrowerAddress: new Address(op.Txn.sender.bytes),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1214
    // collateralTokenId: rec.collateralTokenId,
    swap
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1215
    // collateralAmount: rec.collateralAmount,
    swap
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1218
    // amount: new UintN64(repaymentAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1219
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1217-1221
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1220
    // changeType: new UintN8(2), // repay
    pushbytes 0x02
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1217-1221
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repaymentAmount),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1222
    // principal: new UintN64(remainingDebt),
    frame_dig 0
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:144
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1223
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1212-1224
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1212
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1212-1224
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repaymentAmount),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    retsub

repayLoanAlgo_bool_false@3:
    intc_0 // 0
    b repayLoanAlgo_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.payPlatformFees(assetId: uint64, amount: uint64) -> void:
payPlatformFees:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1228
    // private payPlatformFees(assetId: uint64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1229
    // if (amount > 0) {
    frame_dig -1
    bz payPlatformFees_after_if_else@7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1230
    // if (assetId === 0) {
    frame_dig -2
    bnz payPlatformFees_else_body@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1231-1237
    // itxn
    //   .payment({
    //     receiver: this.admin_account.value,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    frame_dig -1
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1231-1236
    // itxn
    //   .payment({
    //     receiver: this.admin_account.value,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1231-1237
    // itxn
    //   .payment({
    //     receiver: this.admin_account.value,
    //     amount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit

payPlatformFees_after_if_else@7:
    retsub

payPlatformFees_else_body@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1239-1246
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: assetId,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    frame_dig -1
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1239-1245
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: assetId,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1239-1246
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: assetId,
    //     assetAmount: amount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.buyoutSplitASA(buyer: bytes, debtor: bytes, premiumAxferTxn: uint64, repayAxferTxn: uint64, lstAppId: uint64) -> void:
buyoutSplitASA:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260-1268
    // @abimethod({ allowActions: 'NoOp' })
    // public buyoutSplitASA(
    //   // base token is an ASA
    //   buyer: Account,
    //   debtor: Account,
    //   premiumAxferTxn: gtxn.AssetTransferTxn, // buyout token payment (xUSD)
    //   repayAxferTxn: gtxn.AssetTransferTxn, // base token repayment
    //   lstAppId: uint64, // the LST app backing the collateral
    // ): void {
    proto 5 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1269
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1271
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1273
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1274
    // const collateralAmount: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1275
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1277
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    pop
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1278
    // assert(debtBase > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1281
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collateralTokenId, collateralAmount, lstAppId)
    swap
    uncover 2
    frame_dig -1
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1282
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    swap
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1286
    // assert(debtUSDv > 0)
    dup
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1287
    // const [hCR, lCR] = mulw(collateralUSD, BASIS_POINTS)
    dig 1
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1287
    // const [hCR, lCR] = mulw(collateralUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1288
    // const CR_bps: uint64 = divw(hCR, lCR, debtUSDv)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1289
    // assert(CR_bps > this.liq_threshold_bps.value, 'loan is not eligible for buyout')
    dig 1
    <
    assert // loan is not eligible for buyout
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1293
    // const [hR, lR] = mulw(CR_bps, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1294
    // const ratio_bps: uint64 = divw(hR, lR, this.liq_threshold_bps.value) // > 10_000
    divw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1295
    // const premiumRateBps: uint64 = ratio_bps - BASIS_POINTS
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1298
    // const [hBP, lBP] = mulw(collateralUSD, premiumRateBps)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1299
    // const premiumUSD: uint64 = divw(hBP, lBP, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 18 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1303
    // const buyoutTokenId: uint64 = this.buyout_token_id.value.native
    btoi
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 18 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1304
    // const buyoutTokenPrice: uint64 = this.getOraclePrice(this.buyout_token_id.value) // µUSD per token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1308
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    swap
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1308
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1309
    // const premiumTokens: uint64 = divw(hPT, lPT, buyoutTokenPrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1312-1317
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    frame_dig -3
    gtxns Sender
    frame_dig -5
    ==
    bz buyoutSplitASA_bool_false@5
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1314
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1312-1317
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    ==
    bz buyoutSplitASA_bool_false@5
    frame_dig -3
    gtxns XferAsset
    frame_dig 6
    ==
    bz buyoutSplitASA_bool_false@5
    frame_dig -3
    gtxns AssetAmount
    frame_dig 7
    ==
    bz buyoutSplitASA_bool_false@5
    intc_1 // 1

buyoutSplitASA_bool_merge@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1312-1317
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1320
    // const baseAssetId = this.base_token_id.value.native
    btoi
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1321-1326
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt in base units
    // })
    frame_dig -2
    gtxns Sender
    frame_dig -5
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1323
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1321-1326
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt in base units
    // })
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -2
    gtxns XferAsset
    frame_dig 0
    ==
    bz buyoutSplitASA_bool_false@11
    frame_dig -2
    gtxns AssetAmount
    frame_dig 5
    ==
    bz buyoutSplitASA_bool_false@11
    intc_1 // 1

buyoutSplitASA_bool_merge@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1321-1326
    // assertMatch(repayAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(baseAssetId),
    //   assetAmount: debtBase, // full live debt in base units
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1329
    // this.loan_record(debtor).delete()
    frame_dig 1
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1330
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1330
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1333-1340
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1336
    // xferAsset: collateralTokenId.native,
    frame_dig 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1275
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1336
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 3
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1333-1339
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1333-1340
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig 4
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1344
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1345
    // const updatedTotal: uint64 = acVal.totalCollateral.native - collateralAmount
    dup
    pushint 24 // 24
    extract_uint64
    uncover 3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1347
    // assetId: acVal.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1348
    // baseAssetId: acVal.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1349
    // totalCollateral: new UintN64(updatedTotal),
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1350
    // marketBaseAssetId: acVal.marketBaseAssetId,
    uncover 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1346-1351
    // this.accepted_collaterals(acKey).value = new AcceptedCollateral({
    //   assetId: acVal.assetId,
    //   baseAssetId: acVal.baseAssetId,
    //   totalCollateral: new UintN64(updatedTotal),
    //   marketBaseAssetId: acVal.marketBaseAssetId,
    // }).copy()
    uncover 3
    uncover 3
    concat
    swap
    concat
    swap
    concat
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1355
    // this.total_borrows.value = this.total_borrows.value - debtBase
    frame_dig 5
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1355
    // this.total_borrows.value = this.total_borrows.value - debtBase
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1357
    // this.splitPremium(premiumTokens, buyoutTokenId, debtor)
    frame_dig 7
    frame_dig 6
    frame_dig -4
    callsub splitPremium
    retsub

buyoutSplitASA_bool_false@11:
    intc_0 // 0
    b buyoutSplitASA_bool_merge@12

buyoutSplitASA_bool_false@5:
    intc_0 // 0
    b buyoutSplitASA_bool_merge@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.buyoutSplitAlgo(buyer: bytes, debtor: bytes, premiumAxferTxn: uint64, repayPayTxn: uint64, lstAppId: uint64) -> void:
buyoutSplitAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1371-1379
    // @abimethod({ allowActions: 'NoOp' })
    // public buyoutSplitAlgo(
    //   // base token is an ASA
    //   buyer: Account,
    //   debtor: Account,
    //   premiumAxferTxn: gtxn.AssetTransferTxn, // buyout token payment (xUSD)
    //   repayPayTxn: gtxn.AssetTransferTxn, // base ALGO token repayment
    //   lstAppId: uint64, // the LST app backing the collateral
    // ): void {
    proto 5 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1380
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1383
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1385
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1386
    // const collateralAmount: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1387
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1389
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    pop
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1390
    // assert(debtBase > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1393
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collateralTokenId, collateralAmount, lstAppId)
    swap
    uncover 2
    frame_dig -1
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1394
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    swap
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1398
    // assert(debtUSDv > 0)
    dup
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1399
    // const [hCR, lCR] = mulw(collateralUSD, BASIS_POINTS)
    dig 1
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1399
    // const [hCR, lCR] = mulw(collateralUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1400
    // const CR_bps: uint64 = divw(hCR, lCR, debtUSDv)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1401
    // assert(CR_bps > this.liq_threshold_bps.value, 'loan is not eligible for buyout')
    dig 1
    <
    assert // loan is not eligible for buyout
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1405
    // const [hR, lR] = mulw(CR_bps, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1406
    // const ratio_bps: uint64 = divw(hR, lR, this.liq_threshold_bps.value) // > 10_000
    divw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1407
    // const premiumRateBps: uint64 = ratio_bps - BASIS_POINTS
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1410
    // const [hBP, lBP] = mulw(collateralUSD, premiumRateBps)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1411
    // const premiumUSD: uint64 = divw(hBP, lBP, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 18 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1415
    // const buyoutTokenId: uint64 = this.buyout_token_id.value.native
    btoi
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 18 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1416
    // const buyoutTokenPrice: uint64 = this.getOraclePrice(this.buyout_token_id.value) // µUSD per token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1420
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    swap
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1420
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1421
    // const premiumTokens: uint64 = divw(hPT, lPT, buyoutTokenPrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1424-1429
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    frame_dig -3
    gtxns Sender
    frame_dig -5
    ==
    bz buyoutSplitAlgo_bool_false@5
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1426
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1424-1429
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    ==
    bz buyoutSplitAlgo_bool_false@5
    frame_dig -3
    gtxns XferAsset
    frame_dig 5
    ==
    bz buyoutSplitAlgo_bool_false@5
    frame_dig -3
    gtxns AssetAmount
    frame_dig 6
    ==
    bz buyoutSplitAlgo_bool_false@5
    intc_1 // 1

buyoutSplitAlgo_bool_merge@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1424-1429
    // assertMatch(premiumAxferTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(buyoutTokenId),
    //   assetAmount: premiumTokens,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1433-1437
    // assertMatch(repayPayTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: debtBase, // full live debt in base units
    // })
    frame_dig -2
    gtxns Sender
    frame_dig -5
    ==
    bz buyoutSplitAlgo_bool_false@10
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1435
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1433-1437
    // assertMatch(repayPayTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: debtBase, // full live debt in base units
    // })
    ==
    bz buyoutSplitAlgo_bool_false@10
    frame_dig -2
    gtxns AssetAmount
    frame_dig 4
    ==
    bz buyoutSplitAlgo_bool_false@10
    intc_1 // 1

buyoutSplitAlgo_bool_merge@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1433-1437
    // assertMatch(repayPayTxn, {
    //   sender: buyer,
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: debtBase, // full live debt in base units
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1440
    // this.loan_record(debtor).delete()
    frame_dig 0
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1441
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1441
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1444-1451
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1447
    // xferAsset: collateralTokenId.native,
    frame_dig 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1387
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1447
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 2
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1444-1450
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1444-1451
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig 3
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1455
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1456
    // const updatedTotal: uint64 = acVal.totalCollateral.native - collateralAmount
    dup
    pushint 24 // 24
    extract_uint64
    uncover 3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1458
    // assetId: acVal.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1459
    // baseAssetId: acVal.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1460
    // totalCollateral: new UintN64(updatedTotal),
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1461
    // marketBaseAssetId: acVal.marketBaseAssetId,
    uncover 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1457-1462
    // this.accepted_collaterals(acKey).value = new AcceptedCollateral({
    //   assetId: acVal.assetId,
    //   baseAssetId: acVal.baseAssetId,
    //   totalCollateral: new UintN64(updatedTotal),
    //   marketBaseAssetId: acVal.marketBaseAssetId,
    // }).copy()
    uncover 3
    uncover 3
    concat
    swap
    concat
    swap
    concat
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec 6 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1466
    // this.total_borrows.value = this.total_borrows.value - debtBase
    frame_dig 4
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:141
    // total_borrows = GlobalState<uint64>()
    bytec 6 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1466
    // this.total_borrows.value = this.total_borrows.value - debtBase
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1469
    // this.splitPremium(premiumTokens, buyoutTokenId, debtor)
    frame_dig 6
    frame_dig 5
    frame_dig -4
    callsub splitPremium
    retsub

buyoutSplitAlgo_bool_false@10:
    intc_0 // 0
    b buyoutSplitAlgo_bool_merge@11

buyoutSplitAlgo_bool_false@5:
    intc_0 // 0
    b buyoutSplitAlgo_bool_merge@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.splitPremium(premiumTokens: uint64, buyoutTokenId: uint64, debtor: bytes) -> void:
splitPremium:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1472
    // private splitPremium(premiumTokens: uint64, buyoutTokenId: uint64, debtor: Account) {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1474
    // const halfPremium: uint64 = premiumTokens / 2
    frame_dig -3
    pushint 2 // 2
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1476-1483
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    dig 1
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1476-1482
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1476-1483
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1485-1492
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1489
    // assetAmount: premiumTokens - halfPremium, // cover odd token if any
    frame_dig -3
    swap
    -
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    frame_dig -1
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1485-1491
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1485-1492
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.debtUSD(debtBaseUnits: uint64) -> uint64:
debtUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1495
    // private debtUSD(debtBaseUnits: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1496
    // const baseTokenPrice: uint64 = this.getOraclePrice(this.base_token_id.value) // price of market base token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1497
    // const [h, l] = mulw(debtBaseUnits, baseTokenPrice)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1498
    // return divw(h, l, USD_MICRO_UNITS) // micro-USD
    divw
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLST(lstAppId: uint64) -> uint64:
maxWithdrawableCollateralLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1501-1502
    // @abimethod({ allowActions: 'NoOp' })
    // public maxWithdrawableCollateralLST(lstAppId: uint64): uint64 {
    proto 1 1
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1503
    // assert(this.loan_record(op.Txn.sender).exists, 'NO_LOAN')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1503
    // assert(this.loan_record(op.Txn.sender).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1504
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1506
    // const rec = this.loan_record(op.Txn.sender).value.copy()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1506
    // const rec = this.loan_record(op.Txn.sender).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1507
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1508
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz maxWithdrawableCollateralLST_after_if_else@2
    pushint 40 // 40
    extract_uint64
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1512
    // rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1513
    // rec.collateralAmount.native,
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1511-1515
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(
    //   rec.collateralTokenId,
    //   rec.collateralAmount.native,
    //   lstAppId,
    // )
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1518
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 3
    callsub debtUSD
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1520
    // const [hReq, lReq] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 20 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1521
    // const requiredCollateralUSD: uint64 = divw(hReq, lReq, this.ltv_bps.value)
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1524
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz maxWithdrawableCollateralLST_after_if_else@4
    intc_0 // 0
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1527
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1531-1534
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 16 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1531-1534
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1535-1538
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1535-1538
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:477
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1542
    // const basePrice = this.getOraclePrice(ac.baseAssetId)
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1545
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    uncover 3
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1545
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1546
    // const removableUnderlying: uint64 = divw(hU, lU, basePrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1549
    // const [hL, lL] = mulw(removableUnderlying, circulatingLST)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1550
    // const removableLST: uint64 = divw(hL, lL, totalDeposits)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1552
    // return removableLST
    frame_bury 0
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64) -> void:
withdrawCollateral:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1608-1609
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64): void {
    proto 3 0
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1610
    // assert(amountLST > 0, 'ZERO_AMOUNT')
    frame_dig -3
    assert // ZERO_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1611
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1611
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1612
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1613
    // this.accrueMarket() // 1) make time current for everyone
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1614
    // const loan = this.loan_record(borrower).value.copy()
    dup
    box_get
    swap
    cover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1556
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1557
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1559
    // const rec = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1560
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1561
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz withdrawCollateral_after_if_else@4
    pushint 40 // 40
    extract_uint64

withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1617
    // assert(amountLST <= maxSafe, 'EXCEEDS_LIMITS')
    frame_dig -3
    >=
    assert // EXCEEDS_LIMITS
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1618
    // assert(amountLST < loan.collateralAmount.native, 'INSUFFICIENT_COLLATERAL')
    frame_dig 5
    dup
    pushint 40 // 40
    extract_uint64
    frame_dig -3
    dig 1
    <
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1619
    // const remainLST: uint64 = loan.collateralAmount.native - amountLST
    frame_dig -3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1622-1629
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -3
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    frame_dig 3
    dup
    cover 2
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1622-1628
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1622-1629
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1634
    // collateralTokenId: new UintN64(collateralTokenId),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1635
    // collateralAmount: new UintN64(remainLST),
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1638
    // amount: new UintN64(amountLST),
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1639
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1637-1641
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1640
    // changeType: new UintN8(3), // 3 = collateral withdraw
    pushbytes 0x03
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1637-1641
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1642
    // principal: loan.principal, // unchanged
    dig 5
    extract 73 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1643
    // userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    dig 6
    extract 81 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1632-1644
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: new UintN64(collateralTokenId),
    //   collateralAmount: new UintN64(remainLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(amountLST),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(3), // 3 = collateral withdraw
    //   }),
    //   principal: loan.principal, // unchanged
    //   userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    // })
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1645
    // this.loan_record(borrower).value = newRec.copy()
    frame_dig 4
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1648
    // this.reduceCollateralTotal(loan.collateralTokenId, amountLST)
    extract 32 8 // on error: Index access is out of bounds
    frame_dig -3
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1651
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1651
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

withdrawCollateral_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1565
    // rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1566
    // rec.collateralAmount.native,
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1564-1568
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(
    //   rec.collateralTokenId,
    //   rec.collateralAmount.native,
    //   lstAppId,
    // )
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1571
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 6
    callsub debtUSD
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1573
    // const [hReq, lReq] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 20 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1574
    // const requiredCollateralUSD: uint64 = divw(hReq, lReq, this.ltv_bps.value)
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1577
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz withdrawCollateral_after_if_else@6
    intc_0 // 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1616
    // const maxSafe = this.maxWithdrawableCollateralLSTLocal(borrower, lstAppId)
    b withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7

withdrawCollateral_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1580
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1584-1587
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 16 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1584-1587
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1588-1591
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1588-1591
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:477
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1595
    // const basePrice = this.getOraclePrice(ac.baseAssetId)
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1598
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    uncover 3
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1598
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1599
    // const removableUnderlying: uint64 = divw(hU, lU, basePrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1602
    // const [hL, lL] = mulw(removableUnderlying, circulatingLST)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1603
    // const removableLST: uint64 = divw(hL, lL, totalDeposits)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1616
    // const maxSafe = this.maxWithdrawableCollateralLSTLocal(borrower, lstAppId)
    b withdrawCollateral_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLSTLocal@7


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.liquidateASA(debtor: bytes, axferTxn: uint64) -> void:
liquidateASA:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1662-1663
    // @abimethod({ allowActions: 'NoOp' })
    // liquidateASA(debtor: Account, axferTxn: gtxn.AssetTransferTxn): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -2
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1664
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1665
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1666
    // const record = this.loan_record(debtor).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1667
    // const collateralAmount = record.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1668
    // const debtAmount: uint64 = this.currentDebtFromSnapshot(record)
    callsub currentDebtFromSnapshot
    dup
    cover 2
    cover 3
    dup
    cover 3
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1669
    // const collateralTokenId = record.collateralTokenId
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:477
    // return this.accepted_collaterals(key).value.copy()
    box_get
    bury 1
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1672
    // const oraclePrice = this.getOraclePrice(collateralTokenId)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1673
    // const [h, l] = mulw(collateralAmount, oraclePrice)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1674
    // const collateralUSD = divw(h, l, 1)
    intc_1 // 1
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1676
    // const CR: uint64 = collateralUSD / debtAmount
    swap
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1677
    // assert(CR <= this.liq_threshold_bps.value, 'loan is not liquidatable')
    <=
    assert // loan is not liquidatable
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1680-1684
    // assertMatch(axferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    //   assetAmount: debtAmount,
    // })
    frame_dig -1
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1681
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1680-1684
    // assertMatch(axferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    //   assetAmount: debtAmount,
    // })
    ==
    bz liquidateASA_bool_false@4
    frame_dig -1
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1682
    // xferAsset: Asset(this.base_token_id.value.native),
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1680-1684
    // assertMatch(axferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    //   assetAmount: debtAmount,
    // })
    ==
    bz liquidateASA_bool_false@4
    frame_dig -1
    gtxns AssetAmount
    frame_dig 3
    ==
    bz liquidateASA_bool_false@4
    intc_1 // 1

liquidateASA_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1680-1684
    // assertMatch(axferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.base_token_id.value.native),
    //   assetAmount: debtAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1689
    // this.loan_record(debtor).delete()
    frame_dig 0
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1690
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1690
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1693-1700
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1695
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1696
    // xferAsset: collateralTokenId.native,
    frame_dig 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1669
    // const collateralTokenId = record.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1696
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 1
    dup
    cover 3
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1693-1699
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1693-1700
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1703
    // this.reduceCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig 4
    swap
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1704
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1704
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

liquidateASA_bool_false@4:
    intc_0 // 0
    b liquidateASA_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.liquidateAlgo(debtor: bytes, paymentTxn: uint64) -> void:
liquidateAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1715-1716
    // @abimethod({ allowActions: 'NoOp' })
    // liquidateAlgo(debtor: Account, paymentTxn: gtxn.PaymentTxn): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -2
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1717
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1718
    // const _interestSlice = this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1719
    // const record = this.loan_record(debtor).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1720
    // const collateralAmount = record.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1721
    // const debtAmount: uint64 = this.currentDebtFromSnapshot(record)
    callsub currentDebtFromSnapshot
    dup
    cover 2
    cover 3
    dup
    cover 3
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1722
    // const collateralTokenId = record.collateralTokenId
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:477
    // return this.accepted_collaterals(key).value.copy()
    box_get
    bury 1
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1725
    // const oraclePrice = this.getOraclePrice(collateralTokenId)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1726
    // const [h, l] = mulw(collateralAmount, oraclePrice)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1727
    // const collateralUSD = divw(h, l, 1)
    intc_1 // 1
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1729
    // const CR: uint64 = collateralUSD / debtAmount
    swap
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1730
    // assert(CR <= this.liq_threshold_bps.value, 'loan is not liquidatable')
    <=
    assert // loan is not liquidatable
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1733-1736
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: debtAmount,
    // })
    frame_dig -1
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1734
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1733-1736
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: debtAmount,
    // })
    ==
    bz liquidateAlgo_bool_false@3
    frame_dig -1
    gtxns Amount
    frame_dig 3
    ==
    bz liquidateAlgo_bool_false@3
    intc_1 // 1

liquidateAlgo_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1733-1736
    // assertMatch(paymentTxn, {
    //   receiver: Global.currentApplicationAddress,
    //   amount: debtAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1739
    // this.loan_record(debtor).delete()
    frame_dig 0
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 5 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1740
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:166
    // active_loan_records = GlobalState<uint64>()
    bytec 5 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1740
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743-1750
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1745
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1746
    // xferAsset: collateralTokenId.native,
    frame_dig 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1722
    // const collateralTokenId = record.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1746
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 1
    dup
    cover 3
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743-1749
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743-1750
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: STANDARD_TXN_FEE,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1753
    // this.reduceCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig 4
    swap
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1754
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:150
    // last_apr_bps = GlobalState<uint64>()
    bytec 9 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1754
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

liquidateAlgo_bool_false@3:
    intc_0 // 0
    b liquidateAlgo_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getLoanStatus(borrower: bytes) -> uint64, uint64, uint64, uint64, uint64, uint64, uint64:
getLoanStatus:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1764-1773
    // @abimethod({ allowActions: 'NoOp' })
    // getLoanStatus(borrower: Account): {
    //   outstandingDebt: uint64
    //   collateralValueUSD: uint64
    //   collateralAmount: uint64
    //   collateralRatioBps: uint64
    //   liquidationThresholdBps: uint64
    //   eligibleForLiquidation: boolean
    //   eligibleForBuyout: boolean
    // } {
    proto 1 7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec_2 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1774
    // assert(this.loan_record(borrower).exists, 'Loan record does not exist')
    dup
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1775
    // const record = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1776
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1777
    // const debt: uint64 = this.currentDebtFromSnapshot(record)
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1778
    // const collateralAmount: uint64 = record.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 11 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1781
    // const oraclePrice = this.getOraclePrice(record.collateralTokenId)
    uncover 2
    extract 32 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1782
    // const [hi, lo] = mulw(collateralAmount, oraclePrice)
    dig 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1783
    // const collateralValueUSD = divw(hi, lo, 1)
    intc_1 // 1
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1785
    // const CR: uint64 = (collateralValueUSD * BASIS_POINTS) / debt
    dup
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const BASIS_POINTS: uint64 = 10_000
    intc 4 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1785
    // const CR: uint64 = (collateralValueUSD * BASIS_POINTS) / debt
    *
    dig 4
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1786
    // const eligibleForLiquidation = CR < liqBps
    dup
    dig 3
    <
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1787
    // const eligibleForBuyout = CR > liqBps
    dig 1
    dig 4
    >
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1789-1797
    // return {
    //   outstandingDebt: debt,
    //   collateralValueUSD: collateralValueUSD,
    //   collateralAmount: collateralAmount,
    //   collateralRatioBps: CR,
    //   liquidationThresholdBps: liqBps,
    //   eligibleForLiquidation,
    //   eligibleForBuyout,
    // }
    uncover 6
    uncover 4
    uncover 6
    uncover 5
    uncover 6
    uncover 6
    uncover 6
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.calculateCollateralValueUSD(collateralTokenId: bytes, collateralAmount: uint64, lstApp: uint64) -> uint64:
calculateCollateralValueUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1818
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    proto 3 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1820-1823
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 16 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1820-1823
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1825-1828
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_begin
    bytec 17 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    intc_2 // 1000
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1825-1828
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: STANDARD_TXN_FEE,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_1 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1831
    // const [hC, lC] = mulw(totalDepositsExternal, collateralAmount)
    frame_dig -2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1832
    // const underlyingCollateral = divw(hC, lC, circulatingExternalLST)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:160
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 8 // "accepted_collaterals"
    frame_dig -3
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:477
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1836
    // const baseTokenId = lstCollateral.baseAssetId
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1838
    // const baseTokenPrice = this.getOraclePrice(baseTokenId)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1841
    // const [hU, lU] = mulw(underlyingCollateral, baseTokenPrice)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 5 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1842
    // const collateralUSD = divw(hU, lU, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1844
    // return collateralUSD
    retsub
