#pragma version 11
#pragma typetrack false

// @algorandfoundation/algorand-typescript/arc4/index.d.ts::Contract.approvalProgram() -> uint64:
main:
    intcblock 0 1 10000 4 1000000 1000000000000 69000000000000 1000000000000000
    bytecblock "base_token_id" "total_borrows" 0x151f7c75 "admin_account" "total_deposits" "contract_state" "loan_record" "circulating_lst" "active_loan_records" "lst_token_id" "borrow_index_wad" "accepted_collaterals" "migration_admin" "last_apr_bps" "cash_on_hand" "fee_pool" "accepted_collaterals_count" "buyout_token_id" "liq_bonus_bps" "current_accumulated_commission" 0x09ef525f 0xae859f3b "liq_threshold_bps" "total_commission_earned" "total_additional_rewards" "ltv_bps" "base_bps" "util_cap_bps" "last_accrual_ts" "commission_percentage" "flux_oracle_app" 0x0000000000000000 "kink_norm_bps" "slope1_bps" "slope2_bps" "deposit_record" "origination_fee_bps" "protocol_share_bps" "oracle_app" "prev_apr_bps" "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn NumAppArgs
    bz main_after_if_else@41
    pushbytess 0x3b01665e 0x6c29350a 0xcffce757 0x34b8343e 0xca7a1795 0x13d67149 0xfc5da0d0 0x5cac25a9 0x8dbd47f8 0xacbb7514 0xc250efa4 0x50c57985 0x7f52a7fe 0xc0799344 0xb5e7b73d 0xe9c33c1e 0xb4a74766 0xae99f45b 0xbed00024 0xe4164cb7 0xb0d6e8eb 0xd0e69812 0x5f0d6f03 0x70d451f7 0x3172ca9d 0xef0bd27a 0x71757509 0xd3606d49 0xdeb99998 0x4d658379 // method "createApplication(account,uint64)void", method "initApplication(uint64,uint64,uint64,uint64,application,uint64,uint64,application)void", method "setRateParams(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)void", method "setContractState(uint64)void", method "setMigrationAdmin(account)void", method "generateLSTToken()void", method "optInToLST(uint64)void", method "configureLSTToken(axfer,uint64)void", method "removeCollateralType(uint64)void", method "addNewCollateralType(uint64,uint64,uint64)void", method "depositAlgo(pay,uint64)void", method "withdrawDeposit(axfer,uint64,uint64)void", method "borrow(axfer,uint64,uint64,uint64,uint64)void", method "addLoanRecordExternal(uint64,uint64,account,uint64)void", method "addDepositRecordExternal(account,uint64,uint64)void", method "accrueLoanInterest(account)void", method "current_apr_bps()uint64", method "getLoanRecord(account)(address,uint64,uint64,(uint64,uint8,uint64),uint64,uint64,uint64)", method "repayLoanAlgo(pay,uint64)void", method "withdrawPlatformFees(account)void", method "buyoutSplitAlgo(account,account,axfer,pay,uint64)void", method "maxWithdrawableCollateralLST(uint64)uint64", method "withdrawCollateral(uint64,uint64,uint64)void", method "liquidatePartialAlgo(account,pay,uint64,uint64)void", method "gas()void", method "calculateCollateralValueUSD(uint64,uint64,uint64)uint64", method "pickupAlgoRewards()void", method "migrateCollateralTokenId(uint64)void", method "migrateContract()(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64)", method "acceptMigrationAlgoContract(axfer,pay,(uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64,uint64),account)void"
    bytec 20 // method "getCirculatingLST()uint64"
    bytec 21 // method "getTotalDeposits()uint64"
    pushbytess 0x6c6337c0 0x400e14fb 0x51ef3b21 // method "getAcceptedCollateralsCount()uint64", method "goOnline(pay,byte[],byte[],byte[],uint64,uint64,uint64)void", method "goOffline()void"
    txna ApplicationArgs 0
    match main_createApplication_route@3 main_initApplication_route@4 main_setRateParams_route@5 main_setContractState_route@6 main_setMigrationAdmin_route@7 main_generateLSTToken_route@8 main_optInToLST_route@9 main_configureLSTToken_route@10 main_removeCollateralType_route@11 main_addNewCollateralType_route@12 main_depositAlgo_route@13 main_withdrawDeposit_route@14 main_borrow_route@15 main_addLoanRecordExternal_route@16 main_addDepositRecordExternal_route@17 main_accrueLoanInterest_route@18 main_current_apr_bps_route@19 main_getLoanRecord_route@20 main_repayLoanAlgo_route@21 main_withdrawPlatformFees_route@22 main_buyoutSplitAlgo_route@23 main_maxWithdrawableCollateralLST_route@24 main_withdrawCollateral_route@25 main_liquidatePartialAlgo_route@26 main_gas_route@27 main_calculateCollateralValueUSD_route@28 main_pickupAlgoRewards_route@29 main_migrateCollateralTokenId_route@30 main_migrateContract_route@31 main_acceptMigrationAlgoContract_route@32 main_getCirculatingLST_route@33 main_getTotalDeposits_route@34 main_getAcceptedCollateralsCount_route@35 main_goOnline_route@36 main_goOffline_route@37

main_after_if_else@41:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    intc_0 // 0
    return

main_goOffline_route@37:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2165
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub goOffline
    intc_1 // 1
    return

main_goOnline_route@36:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2131
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    extract 2 0
    txna ApplicationArgs 2
    extract 2 0
    txna ApplicationArgs 3
    extract 2 0
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2131
    // @abimethod({ allowActions: 'NoOp' })
    callsub goOnline
    intc_1 // 1
    return

main_getAcceptedCollateralsCount_route@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2117
    // getAcceptedCollateralsCount(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getAcceptedCollateralsCount
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getTotalDeposits_route@34:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2109
    // getTotalDeposits(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getTotalDeposits
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_getCirculatingLST_route@33:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2101
    // getCirculatingLST(): uint64 {
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub getCirculatingLST
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_acceptMigrationAlgoContract_route@32:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2049
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2049
    // @abimethod({ allowActions: 'NoOp' })
    callsub acceptMigrationAlgoContract
    intc_1 // 1
    return

main_migrateContract_route@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1972
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub migrateContract
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_migrateCollateralTokenId_route@30:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1952
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1952
    // @abimethod({ allowActions: 'NoOp' })
    callsub migrateCollateralTokenId
    intc_1 // 1
    return

main_pickupAlgoRewards_route@29:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1923
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub pickupAlgoRewards
    intc_1 // 1
    return

main_calculateCollateralValueUSD_route@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1783
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1783
    // @abimethod({ allowActions: 'NoOp' })
    callsub calculateCollateralValueUSD
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_gas_route@27:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1752
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    intc_1 // 1
    return

main_liquidatePartialAlgo_route@26:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1586
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1586
    // @abimethod({ allowActions: 'NoOp' })
    callsub liquidatePartialAlgo
    intc_1 // 1
    return

main_withdrawCollateral_route@25:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1451
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1451
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawCollateral
    intc_1 // 1
    return

main_maxWithdrawableCollateralLST_route@24:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1440
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1440
    // @abimethod({ allowActions: 'NoOp' })
    callsub maxWithdrawableCollateralLST
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_buyoutSplitAlgo_route@23:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1216
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txnas Accounts
    txn GroupIndex
    pushint 2 // 2
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1216
    // @abimethod({ allowActions: 'NoOp' })
    callsub buyoutSplitAlgo
    intc_1 // 1
    return

main_withdrawPlatformFees_route@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1184
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1184
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawPlatformFees
    intc_1 // 1
    return

main_repayLoanAlgo_route@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1116
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1116
    // @abimethod({ allowActions: 'NoOp' })
    callsub repayLoanAlgo
    intc_1 // 1
    return

main_getLoanRecord_route@20:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1101
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1101
    // @abimethod({ allowActions: 'NoOp' })
    callsub getLoanRecord
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_current_apr_bps_route@19:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:963
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub current_apr_bps
    itob
    bytec_2 // 0x151f7c75
    swap
    concat
    log
    intc_1 // 1
    return

main_accrueLoanInterest_route@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:898
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:898
    // @abimethod({ allowActions: 'NoOp' })
    callsub accrueLoanInterest
    intc_1 // 1
    return

main_addDepositRecordExternal_route@17:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:885
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:885
    // @abimethod({ allowActions: 'NoOp' })
    callsub addDepositRecordExternal
    intc_1 // 1
    return

main_addLoanRecordExternal_route@16:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:871
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    txna ApplicationArgs 3
    btoi
    txnas Accounts
    txna ApplicationArgs 4
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:871
    // @abimethod({ allowActions: 'NoOp' })
    callsub addLoanRecordExternal
    intc_1 // 1
    return

main_borrow_route@15:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:785
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:785
    // @abimethod({ allowActions: 'NoOp' })
    callsub borrow
    intc_1 // 1
    return

main_withdrawDeposit_route@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:694
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:694
    // @abimethod({ allowActions: 'NoOp' })
    callsub withdrawDeposit
    intc_1 // 1
    return

main_depositAlgo_route@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:629
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_1 // pay
    ==
    assert // transaction type is pay
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:629
    // @abimethod({ allowActions: 'NoOp' })
    callsub depositAlgo
    intc_1 // 1
    return

main_addNewCollateralType_route@12:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:535
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    txna ApplicationArgs 2
    txna ApplicationArgs 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:535
    // @abimethod({ allowActions: 'NoOp' })
    callsub addNewCollateralType
    intc_1 // 1
    return

main_removeCollateralType_route@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:515
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:515
    // @abimethod({ allowActions: 'NoOp' })
    callsub removeCollateralType
    intc_1 // 1
    return

main_configureLSTToken_route@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:404
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txn GroupIndex
    intc_1 // 1
    -
    dup
    gtxns TypeEnum
    intc_3 // axfer
    ==
    assert // transaction type is axfer
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:404
    // @abimethod({ allowActions: 'NoOp' })
    callsub configureLSTToken
    intc_1 // 1
    return

main_optInToLST_route@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:382
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:382
    // @abimethod({ allowActions: 'NoOp' })
    callsub optInToLST
    intc_1 // 1
    return

main_generateLSTToken_route@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:353
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    callsub generateLSTToken
    intc_1 // 1
    return

main_setMigrationAdmin_route@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:342
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:342
    // @abimethod({ allowActions: 'NoOp' })
    callsub setMigrationAdmin
    intc_1 // 1
    return

main_setContractState_route@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:331
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:331
    // @abimethod({ allowActions: 'NoOp' })
    callsub setContractState
    intc_1 // 1
    return

main_setRateParams_route@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:294
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txna ApplicationArgs 9
    btoi
    txna ApplicationArgs 10
    btoi
    txna ApplicationArgs 11
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:294
    // @abimethod({ allowActions: 'NoOp' })
    callsub setRateParams
    intc_1 // 1
    return

main_initApplication_route@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:208
    // @abimethod({ allowActions: 'NoOp' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    assert // can only call when not creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txna ApplicationArgs 2
    btoi
    txna ApplicationArgs 3
    btoi
    txna ApplicationArgs 4
    btoi
    txna ApplicationArgs 5
    btoi
    txnas Applications
    txna ApplicationArgs 6
    btoi
    txna ApplicationArgs 7
    btoi
    txna ApplicationArgs 8
    btoi
    txnas Applications
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:208
    // @abimethod({ allowActions: 'NoOp' })
    callsub initApplication
    intc_1 // 1
    return

main_createApplication_route@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    txn OnCompletion
    !
    assert // OnCompletion is not NoOp
    txn ApplicationID
    !
    assert // can only call when creating
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:44-45
    // @contract({ name: 'orbital-lending', avmVersion: 11 })
    // export class OrbitalLending extends Contract {
    txna ApplicationArgs 1
    btoi
    txnas Accounts
    txna ApplicationArgs 2
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    callsub createApplication
    intc_1 // 1
    return


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.createApplication(admin: bytes, baseTokenId: uint64) -> void:
createApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:188-189
    // @abimethod({ allowActions: 'NoOp', onCreate: 'require' })
    // public createApplication(admin: Account, baseTokenId: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    bytec_3 // "admin_account"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:190
    // this.admin_account.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:191
    // this.base_token_id.value = new UintN64(baseTokenId)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    bytec_0 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:191
    // this.base_token_id.value = new UintN64(baseTokenId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    bytec 12 // "migration_admin"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:192
    // this.migration_admin.value = admin
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 5 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:193
    // this.contract_state.value = new UintN64(0) // inactive
    bytec 31 // 0x0000000000000000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:180
    // contract_version = GlobalState<UintN64>() // contract version number
    pushbytess "contract_version" 0x0000000000000837 // "contract_version", 0x0000000000000837
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:194
    // this.contract_version.value = new UintN64(CONTRACT_VERSION)
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.initApplication(ltv_bps: uint64, liq_threshold_bps: uint64, origination_fee_bps: uint64, protocol_share_bps: uint64, oracle_app_id: uint64, buyout_token_id: uint64, additional_rewards_commission_percentage: uint64, flux_oracle_app_id: uint64) -> void:
initApplication:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:208-218
    // @abimethod({ allowActions: 'NoOp' })
    // public initApplication(
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   origination_fee_bps: uint64,
    //   protocol_share_bps: uint64,
    //   oracle_app_id: Application,
    //   buyout_token_id: uint64,
    //   additional_rewards_commission_percentage: uint64,
    //   flux_oracle_app_id: Application,
    // ): void {
    proto 8 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:219
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:219
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:221
    // assert(additional_rewards_commission_percentage <= 100, 'COMMISSION_TOO_HIGH')
    frame_dig -2
    pushint 100 // 100
    <=
    assert // COMMISSION_TOO_HIGH
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    bytec 25 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:223
    // this.ltv_bps.value = ltv_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 22 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:224
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:93
    // origination_fee_bps = GlobalState<uint64>()
    bytec 36 // "origination_fee_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:225
    // this.origination_fee_bps.value = origination_fee_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:226
    // this.accepted_collaterals_count.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    bytec 15 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:227
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:228
    // this.circulating_lst.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:229
    // this.total_deposits.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:230
    // this.active_loan_records.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:96
    // protocol_share_bps = GlobalState<uint64>()
    bytec 37 // "protocol_share_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:231
    // this.protocol_share_bps.value = protocol_share_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // oracle_app = GlobalState<Application>()
    bytec 38 // "oracle_app"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:232
    // this.oracle_app.value = oracle_app_id
    frame_dig -4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    bytec 9 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:233
    // this.lst_token_id.value = new UintN64(99)
    pushbytes 0x0000000000000063
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:101
    // base_bps = GlobalState<uint64>()
    bytec 26 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:234
    // this.base_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:127
    // prev_apr_bps = GlobalState<uint64>()
    bytec 39 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:235
    // this.prev_apr_bps.value = 50
    pushint 50 // 50
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:98
    // max_apr_bps = GlobalState<uint64>()
    bytec 40 // "max_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:236
    // this.max_apr_bps.value = 8000 // 80% APR Cap by Default
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:104
    // util_cap_bps = GlobalState<uint64>()
    bytec 27 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:237
    // this.util_cap_bps.value = 8000 // 80% utilization cap
    pushint 8000 // 8000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:238
    // this.total_borrows.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:107
    // kink_norm_bps = GlobalState<uint64>()
    bytec 32 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:239
    // this.kink_norm_bps.value = 5000 // 50% kink point
    pushint 5000 // 5000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:110
    // slope1_bps = GlobalState<uint64>()
    bytec 33 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:240
    // this.slope1_bps.value = 1000 // 10% slope to kink
    pushint 1000 // 1000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:113
    // slope2_bps = GlobalState<uint64>()
    bytec 34 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:241
    // this.slope2_bps.value = 2000 // 20% slope after kink
    pushint 2000 // 2000
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    bytec 10 // "borrow_index_wad"
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:242
    // this.borrow_index_wad.value = INDEX_SCALE
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:122
    // last_accrual_ts = GlobalState<uint64>()
    bytec 28 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:243
    // this.last_accrual_ts.value = Global.latestTimestamp
    global LatestTimestamp
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:101
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:244
    // this.last_apr_bps.value = this.base_bps.value
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:245
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    bytec 17 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:245
    // this.buyout_token_id.value = new UintN64(buyout_token_id)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 18 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:246
    // this.liq_bonus_bps.value = 800
    pushint 800 // 800
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // total_commission_earned = GlobalState<uint64>()
    bytec 23 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:247
    // this.total_commission_earned.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 19 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:248
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // commission_percentage = GlobalState<uint64>()
    bytec 29 // "commission_percentage"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:249
    // this.commission_percentage.value = additional_rewards_commission_percentage
    frame_dig -2
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    bytec 14 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:250
    // this.cash_on_hand.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // total_additional_rewards = GlobalState<uint64>()
    bytec 24 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:251
    // this.total_additional_rewards.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // flux_oracle_app = GlobalState<Application>()
    bytec 30 // "flux_oracle_app"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:252
    // this.flux_oracle_app.value = flux_oracle_app_id
    frame_dig -1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:254
    // if (this.base_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:255-262
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:257
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:258
    // xferAsset: this.base_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:259
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:255-261
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:260
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:255-262
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:264
    // if (this.buyout_token_id.value.native !== 0) {
    btoi
    bz initApplication_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:265-272
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:267
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:268
    // xferAsset: this.buyout_token_id.value.native,
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:269
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:265-271
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:270
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:265-272
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: this.buyout_token_id.value.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

initApplication_after_if_else@6:
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setRateParams(ltv_bps: uint64, liq_threshold_bps: uint64, base_bps: uint64, util_cap_bps: uint64, kink_norm_bps: uint64, slope1_bps: uint64, slope2_bps: uint64, max_apr_bps: uint64, ema_alpha_bps: uint64, rate_model_type: uint64, liq_bonus_bps: uint64) -> void:
setRateParams:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:294-307
    // @abimethod({ allowActions: 'NoOp' })
    // public setRateParams(
    //   ltv_bps: uint64,
    //   liq_threshold_bps: uint64,
    //   base_bps: uint64,
    //   util_cap_bps: uint64,
    //   kink_norm_bps: uint64,
    //   slope1_bps: uint64,
    //   slope2_bps: uint64,
    //   max_apr_bps: uint64,
    //   ema_alpha_bps: uint64,
    //   rate_model_type: uint64, // or uint8
    //   liq_bonus_bps: uint64,
    // ) {
    proto 11 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:308
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:308
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:311
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    frame_dig -8
    bz setRateParams_bool_false@3
    frame_dig -8
    intc_2 // 10000
    <=
    bz setRateParams_bool_false@3
    intc_1 // 1

setRateParams_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:311
    // assert(util_cap_bps >= 1 && util_cap_bps <= 10_000, 'BAD_UTIL_CAP')
    assert // BAD_UTIL_CAP
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:312
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    frame_dig -7
    bz setRateParams_bool_false@7
    frame_dig -7
    intc_2 // 10000
    <
    bz setRateParams_bool_false@7
    intc_1 // 1

setRateParams_bool_merge@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:312
    // assert(kink_norm_bps >= 1 && kink_norm_bps < 10_000, 'BAD_KINK')
    assert // BAD_KINK
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:314
    // if (max_apr_bps > 0) {
    frame_dig -4
    bz setRateParams_after_if_else@14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:315
    // assert(max_apr_bps >= base_bps, 'BAD_MAX_APR')
    frame_dig -4
    frame_dig -9
    >=
    assert // BAD_MAX_APR

setRateParams_after_if_else@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:317
    // assert(ema_alpha_bps <= 10_000, 'BAD_EMA_ALPHA')
    frame_dig -3
    intc_2 // 10000
    <=
    assert // BAD_EMA_ALPHA
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:320
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    frame_dig -2
    bz setRateParams_bool_true@16
    frame_dig -2
    pushint 255 // 255
    ==
    bz setRateParams_bool_false@17

setRateParams_bool_true@16:
    intc_1 // 1

setRateParams_bool_merge@18:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:320
    // assert(rate_model_type === 0 /* kinked */ || rate_model_type === 255 /* fixed */, 'UNSUPPORTED_MODEL')
    assert // UNSUPPORTED_MODEL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:101
    // base_bps = GlobalState<uint64>()
    bytec 26 // "base_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:321
    // this.base_bps.value = base_bps
    frame_dig -9
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    bytec 22 // "liq_threshold_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:322
    // this.liq_threshold_bps.value = liq_threshold_bps
    frame_dig -10
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    bytec 25 // "ltv_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:323
    // this.ltv_bps.value = ltv_bps
    frame_dig -11
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:104
    // util_cap_bps = GlobalState<uint64>()
    bytec 27 // "util_cap_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:324
    // this.util_cap_bps.value = util_cap_bps
    frame_dig -8
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:107
    // kink_norm_bps = GlobalState<uint64>()
    bytec 32 // "kink_norm_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:325
    // this.kink_norm_bps.value = kink_norm_bps
    frame_dig -7
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:110
    // slope1_bps = GlobalState<uint64>()
    bytec 33 // "slope1_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:326
    // this.slope1_bps.value = slope1_bps
    frame_dig -6
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:113
    // slope2_bps = GlobalState<uint64>()
    bytec 34 // "slope2_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:327
    // this.slope2_bps.value = slope2_bps
    frame_dig -5
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 18 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:328
    // this.liq_bonus_bps.value = liq_bonus_bps
    frame_dig -1
    app_global_put
    retsub

setRateParams_bool_false@17:
    intc_0 // 0
    b setRateParams_bool_merge@18

setRateParams_bool_false@7:
    intc_0 // 0
    b setRateParams_bool_merge@8

setRateParams_bool_false@3:
    intc_0 // 0
    b setRateParams_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setContractState(state: uint64) -> void:
setContractState:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:331-332
    // @abimethod({ allowActions: 'NoOp' })
    // public setContractState(state: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    ==
    bnz setContractState_bool_true@2
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    ==
    bz setContractState_bool_false@3

setContractState_bool_true@2:
    intc_1 // 1

setContractState_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:333
    // assert(op.Txn.sender === this.admin_account.value || op.Txn.sender === this.migration_admin.value, 'UNAUTHORIZED')
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:334
    // assert(state <= 2, 'INVALID_STATE') // 0=inactive,1=active,2=migrating
    frame_dig -1
    pushint 2 // 2
    <=
    assert // INVALID_STATE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:335
    // this.contract_state.value = new UintN64(state)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 5 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:335
    // this.contract_state.value = new UintN64(state)
    swap
    app_global_put
    retsub

setContractState_bool_false@3:
    intc_0 // 0
    b setContractState_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.setMigrationAdmin(migrationAdmin: bytes) -> void:
setMigrationAdmin:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:342-343
    // @abimethod({ allowActions: 'NoOp' })
    // public setMigrationAdmin(migrationAdmin: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:344
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:344
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    bytec 12 // "migration_admin"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:345
    // this.migration_admin.value = migrationAdmin
    frame_dig -1
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.generateLSTToken() -> void:
generateLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:355
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:355
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:360
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:361-372
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:363
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:364
    // total: baseToken.total,
    dig 1
    asset_params_get AssetTotal
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:365
    // decimals: baseToken.decimals,
    dig 2
    asset_params_get AssetDecimals
    assert // asset exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:367
    // manager: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:368
    // unitName: 'c' + String(baseToken.unitName),
    dig 4
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:369
    // assetName: 'c' + String(baseToken.unitName),
    uncover 5
    asset_params_get AssetUnitName
    assert // asset exists
    pushbytes "c"
    swap
    concat
    itxn_field ConfigAssetName
    itxn_field ConfigAssetUnitName
    itxn_field ConfigAssetManager
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:366
    // defaultFrozen: false,
    intc_0 // 0
    itxn_field ConfigAssetDefaultFrozen
    itxn_field ConfigAssetDecimals
    itxn_field ConfigAssetTotal
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:361-371
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    pushint 3 // 3
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:370
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:361-372
    // const result = itxn
    //   .assetConfig({
    //     sender: Global.currentApplicationAddress,
    //     total: baseToken.total,
    //     decimals: baseToken.decimals,
    //     defaultFrozen: false,
    //     manager: Global.currentApplicationAddress,
    //     unitName: 'c' + String(baseToken.unitName),
    //     assetName: 'c' + String(baseToken.unitName),
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    itxn CreatedAssetID
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:373
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    bytec 9 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:373
    // this.lst_token_id.value = new UintN64(result.createdAsset.id)
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.optInToLST(lstAssetId: uint64) -> void:
optInToLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:382-383
    // @abimethod({ allowActions: 'NoOp' })
    // public optInToLST(lstAssetId: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:384
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:384
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:385
    // this.lst_token_id.value = new UintN64(lstAssetId)
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    bytec 9 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:385
    // this.lst_token_id.value = new UintN64(lstAssetId)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:388-395
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:390
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:392
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    frame_dig -1
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:388-394
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:393
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:388-395
    // itxn
    //   .assetTransfer({
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: lstAssetId,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.configureLSTToken(axferTxn: uint64, circulating_lst: uint64) -> void:
configureLSTToken:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:404-405
    // @abimethod({ allowActions: 'NoOp' })
    // public configureLSTToken(axferTxn: gtxn.AssetTransferTxn, circulating_lst: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:406
    // assert(op.Txn.sender === this.admin_account.value)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:406
    // assert(op.Txn.sender === this.admin_account.value)
    ==
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:407
    // assert(this.lst_token_id.value.native === axferTxn.xferAsset.id, 'LST token not set')
    btoi
    frame_dig -2
    gtxns XferAsset
    ==
    assert // LST token not set
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:409-412
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:409-412
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    frame_dig -2
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:411
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:409-412
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    ==
    bz configureLSTToken_bool_false@3
    intc_1 // 1

configureLSTToken_bool_merge@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:409-412
    // assertMatch(axferTxn, {
    //   sender: this.admin_account.value,
    //   assetReceiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:413
    // this.circulating_lst.value = circulating_lst
    frame_dig -1
    app_global_put
    retsub

configureLSTToken_bool_false@3:
    intc_0 // 0
    b configureLSTToken_bool_merge@4


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getOraclePrice(tokenId: bytes) -> uint64:
getOraclePrice:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:422
    // private getOraclePrice(tokenId: UintN64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:77
    // oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 38 // "oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:424
    // const address = oracle.address
    dup
    app_params_get AppAddress
    bury 1
    assert // application exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427-431
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: 0,
    // }).returnValue
    itxn_begin
    pushbytes 0xac13e004 // method "getTokenPrice(uint64)(uint64,uint64,uint64)"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationArgs
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:430
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:427-431
    // const result = abiCall(PriceOracleStub.prototype.getTokenPrice, {
    //   appId: contractAppId,
    //   args: [tokenId],
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    pushint 12 // 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:433
    // return result.price.native
    extract_uint64
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.updateCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
updateCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:480
    // private updateCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:482
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:484
    // const newTotal: uint64 = collateral.totalCollateral.native + amount
    dup
    pushint 24 // 24
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:486
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:487
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:488
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:489
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:490
    // originatingAppId: collateral.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:485-491
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.reduceCollateralTotal(collateralTokenId: bytes, amount: uint64) -> void:
reduceCollateralTotal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:500
    // private reduceCollateralTotal(collateralTokenId: UintN64, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:502
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:504
    // assert(collateral.totalCollateral.native >= amount, 'INSUFFICIENT_COLLATERAL')
    dup
    pushint 24 // 24
    extract_uint64
    dup
    frame_dig -1
    >=
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:505
    // const newTotal: uint64 = collateral.totalCollateral.native - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:507
    // assetId: collateral.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:508
    // baseAssetId: collateral.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:509
    // marketBaseAssetId: collateral.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:510
    // totalCollateral: new UintN64(newTotal),
    uncover 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:511
    // originatingAppId: collateral.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:506-512
    // this.accepted_collaterals(key).value = new AcceptedCollateral({
    //   assetId: collateral.assetId,
    //   baseAssetId: collateral.baseAssetId,
    //   marketBaseAssetId: collateral.marketBaseAssetId,
    //   totalCollateral: new UintN64(newTotal),
    //   originatingAppId: collateral.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.removeCollateralType(collateralTokenId: bytes) -> void:
removeCollateralType:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:515-516
    // @abimethod({ allowActions: 'NoOp' })
    // public removeCollateralType(collateralTokenId: UintN64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:517
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:517
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:462
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:518
    // assert(this.collateralExists(collateralTokenId), 'COLLATERAL_NOT_FOUND')
    assert // COLLATERAL_NOT_FOUND
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:521
    // const collateral = this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:522
    // assert(collateral.totalCollateral.native === 0, 'COLLATERAL_IN_USE')
    pushint 24 // 24
    extract_uint64
    !
    assert // COLLATERAL_IN_USE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:524
    // this.accepted_collaterals(key).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:525
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value - 1
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addNewCollateralType(collateralTokenId: bytes, collateralBaseTokenId: bytes, originatingAppId: bytes) -> void:
addNewCollateralType:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:535-540
    // @abimethod({ allowActions: 'NoOp' })
    // public addNewCollateralType(
    //   collateralTokenId: UintN64,
    //   collateralBaseTokenId: UintN64,
    //   originatingAppId: UintN64,
    // ): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:541
    // const baseToken = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:542
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:542
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:543
    // assert(collateralTokenId.native !== baseToken.id, 'CANNOT_USE_BASE_AS_COLLATERAL')
    frame_dig -3
    btoi
    dup
    uncover 2
    !=
    assert // CANNOT_USE_BASE_AS_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -3
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:462
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:544
    // assert(!this.collateralExists(collateralTokenId), 'COLLATERAL_ALREADY_EXISTS')
    !
    assert // COLLATERAL_ALREADY_EXISTS
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:546-552
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    frame_dig -3
    frame_dig -2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:550
    // totalCollateral: new UintN64(0),
    bytec 31 // 0x0000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:546-552
    // const newAcceptedCollateral: AcceptedCollateral = new AcceptedCollateral({
    //   assetId: collateralTokenId,
    //   baseAssetId: collateralBaseTokenId,
    //   marketBaseAssetId: this.base_token_id.value,
    //   totalCollateral: new UintN64(0),
    //   originatingAppId: originatingAppId,
    // })
    concat
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:554
    // this.accepted_collaterals(key).value = newAcceptedCollateral.copy()
    dig 1
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:555
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:555
    // this.accepted_collaterals_count.value = this.accepted_collaterals_count.value + 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:556-564
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:558
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:559
    // assetReceiver: Global.currentApplicationAddress,
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:561
    // assetAmount: 0,
    intc_0 // 0
    itxn_field AssetAmount
    uncover 3
    itxn_field XferAsset
    itxn_field AssetReceiver
    itxn_field Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:556-563
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:562
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:556-564
    // itxn
    //   .assetTransfer({
    //     sender: Global.currentApplicationAddress,
    //     assetReceiver: Global.currentApplicationAddress,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: 0,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:462
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:566
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.depositAlgo(depositTxn: uint64, amount: uint64) -> void:
depositAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:629-630
    // @abimethod({ allowActions: 'NoOp' })
    // public depositAlgo(depositTxn: gtxn.PaymentTxn, amount: uint64): void {
    proto 2 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:632
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:20
    // export const MAXIMUM_ALGO_DEPOSITS: uint64 = 69_000_000_000_000 // 69,000,000 ALGO
    intc 6 // 69000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:634
    // assert(this.total_deposits.value <= MAXIMUM_ALGO_DEPOSITS, 'DEPOSIT_CAP_INVALID')
    <=
    assert // DEPOSIT_CAP_INVALID
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:20
    // export const MAXIMUM_ALGO_DEPOSITS: uint64 = 69_000_000_000_000 // 69,000,000 ALGO
    intc 6 // 69000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:635
    // const remainingCapacity: uint64 = MAXIMUM_ALGO_DEPOSITS - this.total_deposits.value
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:636
    // assert(amount <= remainingCapacity, 'DEPOSIT_LIMIT_EXCEEDED')
    frame_dig -1
    >=
    assert // DEPOSIT_LIMIT_EXCEEDED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:638-642
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:639
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:638-642
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    ==
    bz depositAlgo_bool_false@4
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:640
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:638-642
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    ==
    bz depositAlgo_bool_false@4
    frame_dig -2
    gtxns Amount
    frame_dig -1
    ==
    bz depositAlgo_bool_false@4
    intc_1 // 1

depositAlgo_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:638-642
    // assertMatch(depositTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:643
    // this.addCash(amount)
    frame_dig -1
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:645
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:648
    // if (this.total_deposits.value === 0) {
    bnz depositAlgo_else_body@7
    frame_dig -1

depositAlgo_after_if_else@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:653-660
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:655
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:656
    // xferAsset: this.lst_token_id.value.native,
    btoi
    dig 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:653-659
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:658
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:653-660
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:662
    // this.circulating_lst.value += lstDue
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:662
    // this.circulating_lst.value += lstDue
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:663
    // this.total_deposits.value += amount
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:663
    // this.total_deposits.value += amount
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:664
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:664
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:667
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:668
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:666-669
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:151
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 35 // "deposit_record"
    swap
    concat
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:670
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz depositAlgo_else_body@11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:671
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:672
    // const newAmount: uint64 = existingRecord.depositAmount.native + amount
    dup
    intc_0 // 0
    extract_uint64
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:674
    // assetId: existingRecord.assetId,
    swap
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:675
    // depositAmount: new UintN64(newAmount),
    swap
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:673-676
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositAlgo_else_body@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:679
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:680
    // depositAmount: new UintN64(amount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:678-681
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   depositAmount: new UintN64(amount),
    // }).copy()
    swap
    concat
    box_put
    retsub

depositAlgo_else_body@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const EXCHANGE_PRECISION: uint64 = 1_000_000_000_000_000
    intc 7 // 1000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:575
    // const [highBits1, lowBits1] = mulw(this.circulating_lst.value, EXCHANGE_PRECISION)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:577
    // const lstRatio = divw(highBits1, lowBits1, this.total_deposits.value)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:579
    // const [highBits2, lowBits2] = mulw(lstRatio, amount)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:10
    // export const EXCHANGE_PRECISION: uint64 = 1_000_000_000_000_000
    intc 7 // 1000000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:580
    // return divw(highBits2, lowBits2, EXCHANGE_PRECISION)
    divw
    b depositAlgo_after_if_else@8

depositAlgo_bool_false@4:
    intc_0 // 0
    b depositAlgo_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawDeposit(assetTransferTxn: uint64, amount: uint64, lstAppId: uint64) -> void:
withdrawDeposit:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:694-695
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawDeposit(assetTransferTxn: gtxn.AssetTransferTxn, amount: uint64, lstAppId: uint64): void {
    proto 3 0
    intc_0 // 0
    dup
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:696
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:697
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:698-703
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    frame_dig -3
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:699
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:698-703
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -3
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:700
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:698-703
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -3
    gtxns XferAsset
    frame_dig 5
    ==
    bz withdrawDeposit_bool_false@5
    frame_dig -3
    gtxns AssetAmount
    frame_dig -2
    ==
    bz withdrawDeposit_bool_false@5
    intc_1 // 1

withdrawDeposit_bool_merge@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:698-703
    // assertMatch(assetTransferTxn, {
    //   sender: op.Txn.sender,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: lstAsset,
    //   assetAmount: amount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:705
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:709
    // if (lstAppId === Global.currentApplicationId.id) {
    frame_dig -1
    global CurrentApplicationID
    ==
    bz withdrawDeposit_else_body@8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:617
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:618
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw
    frame_bury 2

withdrawDeposit_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:714
    // this.removeCash(asaDue)
    frame_dig 2
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:716
    // assert(Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance >= asaDue)
    global CurrentApplicationAddress
    acct_params_get AcctBalance
    assert // account funded
    global CurrentApplicationAddress
    acct_params_get AcctMinBalance
    assert // account funded
    -
    dig 1
    >=
    assert
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:718-724
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:720
    // receiver: op.Txn.sender,
    txn Sender
    dig 1
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:718-723
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:722
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:718-724
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: asaDue,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726
    // this.circulating_lst.value -= amount // LST burned
    frame_dig -2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:726
    // this.circulating_lst.value -= amount // LST burned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:727
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:727
    // this.total_deposits.value -= asaDue // ASA returned
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:728
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:728
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:731
    // assetId: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:732
    // userAddress: new Address(op.Txn.sender),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:730-733
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(this.base_token_id.value.native),
    //   userAddress: new Address(op.Txn.sender),
    // })
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:151
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 35 // "deposit_record"
    swap
    concat
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:734
    // if (this.deposit_record(depositKey).exists) {
    box_len
    bury 1
    bz withdrawDeposit_after_if_else@18
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:735
    // const existingRecord = this.deposit_record(depositKey).value.copy()
    frame_dig 1
    box_get
    swap
    dup
    cover 2
    frame_bury 0
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:737
    // asaDue > existingRecord.depositAmount.native ? 0 : existingRecord.depositAmount.native - asaDue
    intc_0 // 0
    extract_uint64
    dup
    frame_bury 4
    frame_dig 2
    <
    bz withdrawDeposit_ternary_false@13
    intc_0 // 0
    frame_bury 3

withdrawDeposit_ternary_merge@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:739
    // if (newAmount === 0) {
    frame_dig 3
    bnz withdrawDeposit_else_body@16
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:740
    // this.deposit_record(depositKey).delete()
    frame_dig 1
    box_del
    pop

withdrawDeposit_after_if_else@18:
    retsub

withdrawDeposit_else_body@16:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:743
    // assetId: existingRecord.assetId,
    frame_dig 0
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:744
    // depositAmount: new UintN64(newAmount),
    frame_dig 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:742-745
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: existingRecord.assetId,
    //   depositAmount: new UintN64(newAmount),
    // }).copy()
    swap
    concat
    frame_dig 1
    swap
    box_put
    retsub

withdrawDeposit_ternary_false@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:737
    // asaDue > existingRecord.depositAmount.native ? 0 : existingRecord.depositAmount.native - asaDue
    frame_dig 4
    frame_dig 2
    -
    frame_bury 3
    b withdrawDeposit_ternary_merge@14

withdrawDeposit_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:592-595
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:594
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:592-595
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:596-599
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 21 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:598
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:596-599
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:602
    // const [hi, lo] = mulw(totalDepositsExternal, amount)
    frame_dig -2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:603
    // return divw(hi, lo, circulatingExternalLST)
    uncover 2
    divw
    frame_bury 2
    b withdrawDeposit_after_if_else@9

withdrawDeposit_bool_false@5:
    intc_0 // 0
    b withdrawDeposit_bool_merge@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.borrow(assetTransferTxn: uint64, requestedLoanAmount: uint64, collateralAmount: uint64, lstApp: uint64, collateralTokenId: bytes) -> void:
borrow:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:785-792
    // @abimethod({ allowActions: 'NoOp' })
    // public borrow(
    //   assetTransferTxn: gtxn.AssetTransferTxn,
    //   requestedLoanAmount: uint64,
    //   collateralAmount: uint64,
    //   lstApp: uint64,
    //   collateralTokenId: UintN64,
    // ): void {
    proto 5 0
    intc_0 // 0
    pushbytes ""
    dupn 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:793
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:795
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:795
    // const hasLoan = this.loan_record(op.Txn.sender).exists
    box_len
    dup
    uncover 2
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:796
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:798
    // if (hasLoan) {
    bz borrow_else_body@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:799
    // const existingCollateral = this.getLoanRecord(op.Txn.sender).collateralAmount
    txn Sender
    callsub getLoanRecord
    pushint 40 // 40
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:800
    // collateralToUse = existingCollateral.native + collateralAmount
    extract_uint64
    frame_dig -3
    +
    frame_bury 1

borrow_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1767-1771
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    frame_dig -5
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1768
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1767-1771
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@34
    frame_dig -5
    gtxns AssetAmount
    frame_dig -3
    ==
    bz borrow_bool_false@34
    frame_dig -5
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1770
    // xferAsset: Asset(collateralTokenId.native),
    frame_dig -1
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1767-1771
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    ==
    bz borrow_bool_false@34
    intc_1 // 1

borrow_bool_merge@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1767-1771
    // assertMatch(assetTransferTxn, {
    //   assetReceiver: Global.currentApplicationAddress,
    //   assetAmount: collateralAmount,
    //   xferAsset: Asset(collateralTokenId.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:462
    // return this.accepted_collaterals(key).exists
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1773
    // assert(this.collateralExists(collateralTokenId), 'unsupported collateral')
    assert // unsupported collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:805
    // const collateralUSD = this.calculateCollateralValueUSD(collateralTokenId, collateralToUse, lstApp)
    frame_dig -1
    frame_dig 1
    frame_dig -2
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:806
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    *
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:806
    // const maxBorrowUSD: uint64 = (collateralUSD * this.ltv_bps.value) / BASIS_POINTS
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:807
    // const baseTokenOraclePrice: uint64 = this.getOraclePrice(this.base_token_id.value)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1826
    // const [rH, rL] = mulw(requestedLoanAmount, baseTokenOraclePrice)
    frame_dig -4
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1827
    // const requestedLoanUSD = divw(rH, rL, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1829
    // assert(requestedLoanUSD <= maxBorrowUSD, 'exceeds LTV limit')
    >=
    assert // exceeds LTV limit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:104
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 27 // "util_cap_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1841
    // const [h, l] = mulw(this.total_deposits.value, this.util_cap_bps.value)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1842
    // return divw(h, l, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1831
    // assert(this.total_borrows.value + requestedLoanAmount <= capBorrow, 'UTIL_CAP_EXCEEDED')
    frame_dig -4
    +
    >=
    assert // UTIL_CAP_EXCEEDED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:811
    // let userTier: UintN64 = new UintN64(0)
    bytec 31 // 0x0000000000000000
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 30 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:812
    // if (this.flux_oracle_app.value.id !== 0) {
    bz borrow_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:813-820
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 30 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:816
    // sender: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:80
    // flux_oracle_app = GlobalState<Application>()
    intc_0 // 0
    bytec 30 // "flux_oracle_app"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:819
    // accounts: [op.Txn.sender],
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:815
    // args: [new Address(op.Txn.sender)],
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:813-820
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    pushbytes 0xd4d7aa5c // method "getUserTier(address)uint64"
    itxn_field ApplicationArgs
    itxn_field ApplicationArgs
    itxn_field Accounts
    itxn_field Applications
    itxn_field Sender
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:817
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:813-820
    // userTier = abiCall(FluxGateStub.prototype.getUserTier, {
    //   appId: this.flux_oracle_app.value.id,
    //   args: [new Address(op.Txn.sender)],
    //   sender: Global.currentApplicationAddress,
    //   fee: 0,
    //   apps: [this.flux_oracle_app.value],
    //   accounts: [op.Txn.sender],
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    frame_bury 0
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix

borrow_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:822
    // const calculatedFee = this.computeFees(requestedLoanAmount, userTier.native)
    frame_dig 0
    btoi
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:93
    // origination_fee_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 36 // "origination_fee_bps"
    app_global_get_ex
    swap
    frame_bury 4
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:754
    // if (userTier === 1) {
    intc_1 // 1
    ==
    bz borrow_else_body@17
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:755
    // const [hi, lo] = mulw(initialFee, 90)
    frame_dig 4
    pushint 90 // 90
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:756
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3

borrow_after_if_else@26:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:768
    // const [feeHi, feeLo] = mulw(depositAmount, effectiveFeeBps)
    frame_dig -4
    frame_dig 3
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:769
    // const fee: uint64 = divw(feeHi, feeLo, 10_000)
    intc_2 // 10000
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1852
    // const disbursement: uint64 = requestedAmount - calculatedFee
    frame_dig -4
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1854
    // this.fee_pool.value += calculatedFee
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    bytec 15 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1854
    // this.fee_pool.value += calculatedFee
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:826
    // if (hasLoan) {
    frame_dig 6
    bz borrow_else_body@8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:827
    // this.processLoanTopUp(op.Txn.sender, collateralAmount, disbursement, baseTokenOraclePrice, collateralTokenId)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1874
    // const existingLoan = this.getLoanRecord(borrower)
    dup
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1876
    // const liveDebt: uint64 = this.syncBorrowerSnapshot(borrower)
    dig 1
    callsub syncBorrowerSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1884
    // const newDebt: uint64 = liveDebt + disbursement
    frame_dig 2
    dup
    cover 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1889
    // collateralTokenId: existingLoan.collateralTokenId,
    dig 1
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1890
    // collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    uncover 2
    pushint 40 // 40
    extract_uint64
    frame_dig -3
    +
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1893
    // amount: new UintN64(disbursement),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1894
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1892-1896
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1895
    // changeType: new UintN8(0), // borrow
    pushbytes 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1892-1896
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1897
    // principal: new UintN64(newDebt),
    uncover 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1898
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1887-1899
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    dig 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1887-1899
    // this.loan_record(borrower).value = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: existingLoan.collateralTokenId,
    //   collateralAmount: new UintN64(existingLoan.collateralAmount.native + collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(newDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1902
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -1
    frame_dig -3
    callsub updateCollateralTotal

borrow_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:833
    // this.disburseFunds(op.Txn.sender, disbursement)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1910-1916
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 2
    dup
    cover 2
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1910-1915
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1914
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1910-1916
    // itxn
    //   .payment({
    //     receiver: borrower,
    //     amount: amount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:834
    // this.removeCash(disbursement)
    dup
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:835
    // this.total_borrows.value = this.total_borrows.value + disbursement
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:835
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:836
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:836
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

borrow_else_body@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:829
    // this.mintLoanRecord(disbursement, collateralTokenId, op.Txn.sender, collateralAmount)
    txn Sender
    frame_dig 2
    frame_dig -1
    uncover 2
    frame_dig -3
    callsub mintLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:830
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -1
    frame_dig -3
    callsub updateCollateralTotal
    b borrow_after_if_else@9

borrow_else_body@17:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:757
    // } else if (userTier === 2) {
    frame_dig 5
    pushint 2 // 2
    ==
    bz borrow_else_body@19
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:758
    // const [hi, lo] = mulw(initialFee, 75)
    frame_dig 4
    pushint 75 // 75
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:759
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_else_body@19:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:760
    // } else if (userTier === 3) {
    frame_dig 5
    pushint 3 // 3
    ==
    bz borrow_else_body@21
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:761
    // const [hi, lo] = mulw(initialFee, 50)
    frame_dig 4
    pushint 50 // 50
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:762
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_else_body@21:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:763
    // } else if (userTier >= 4) {
    frame_dig 5
    intc_3 // 4
    >=
    frame_dig 4
    frame_bury 3
    bz borrow_after_if_else@26
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:764
    // const [hi, lo] = mulw(initialFee, 25)
    frame_dig 4
    pushint 25 // 25
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:765
    // effectiveFeeBps = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    frame_bury 3
    b borrow_after_if_else@26

borrow_bool_false@34:
    intc_0 // 0
    b borrow_bool_merge@35

borrow_else_body@2:
    frame_dig -3
    frame_bury 1
    b borrow_after_if_else@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.mintLoanRecord(disbursement: uint64, collateralTokenId: bytes, borrowerAddress: bytes, collateralAmount: uint64) -> void:
mintLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:846-851
    // private mintLoanRecord(
    //   disbursement: uint64,
    //   collateralTokenId: UintN64,
    //   borrowerAddress: Account,
    //   collateralAmount: uint64,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:857
    // collateralAmount: new UintN64(collateralAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:860
    // amount: new UintN64(disbursement),
    frame_dig -4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:861
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:859-863
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    dig 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:862
    // changeType: new UintN8(0), // borrow
    pushbytes 0x00
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:859-863
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(disbursement),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(0), // borrow
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:865
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:854-866
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    frame_dig -2
    frame_dig -3
    concat
    uncover 5
    concat
    uncover 2
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:854-866
    // this.loan_record(borrowerAddress).value = new LoanRecord({
    //   borrowerAddress: new Address(borrowerAddress.bytes),
    //   collateralTokenId,
    //   collateralAmount: new UintN64(collateralAmount),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(disbursement),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(0), // borrow
    //   }),
    //   principal: new UintN64(disbursement),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:868
    // this.active_loan_records.value = this.active_loan_records.value + 1
    intc_1 // 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:868
    // this.active_loan_records.value = this.active_loan_records.value + 1
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addLoanRecordExternal(disbursement: uint64, collateralTokenId: bytes, borrowerAddress: bytes, collateralAmount: uint64) -> void:
addLoanRecordExternal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:871-877
    // @abimethod({ allowActions: 'NoOp' })
    // public addLoanRecordExternal(
    //   disbursement: uint64,
    //   collateralTokenId: UintN64,
    //   borrowerAddress: Account,
    //   collateralAmount: uint64,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:878
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:878
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:879
    // this.mintLoanRecord(disbursement, collateralTokenId, borrowerAddress, collateralAmount)
    frame_dig -4
    frame_dig -3
    frame_dig -2
    frame_dig -1
    callsub mintLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:880
    // this.updateCollateralTotal(collateralTokenId, collateralAmount)
    frame_dig -3
    frame_dig -1
    callsub updateCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:881
    // this.total_borrows.value = this.total_borrows.value + disbursement
    frame_dig -4
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:881
    // this.total_borrows.value = this.total_borrows.value + disbursement
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:882
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:882
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addDepositRecordExternal(userAddress: bytes, assetId: uint64, depositAmount: uint64) -> void:
addDepositRecordExternal:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:885-886
    // @abimethod({ allowActions: 'NoOp' })
    // public addDepositRecordExternal(userAddress: Account, assetId: uint64, depositAmount: uint64): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:887
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:887
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:889
    // assetId: new UintN64(assetId),
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:888-891
    // const depositKey = new DepositRecordKey({
    //   assetId: new UintN64(assetId),
    //   userAddress: new Address(userAddress),
    // }).copy()
    frame_dig -3
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:894
    // depositAmount: new UintN64(depositAmount),
    frame_dig -1
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:892-895
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(assetId),
    //   depositAmount: new UintN64(depositAmount),
    // }).copy()
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:151
    // deposit_record = BoxMap<DepositRecordKey, DepositRecord>({ keyPrefix: 'deposit_record' })
    bytec 35 // "deposit_record"
    uncover 2
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:892-895
    // this.deposit_record(depositKey).value = new DepositRecord({
    //   assetId: new UintN64(assetId),
    //   depositAmount: new UintN64(depositAmount),
    // }).copy()
    swap
    box_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueLoanInterest(debtor: bytes) -> void:
accrueLoanInterest:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:898-899
    // @abimethod({ allowActions: 'NoOp' })
    // public accrueLoanInterest(debtor: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:900
    // assert(this.loan_record(debtor).exists, 'Loan record does not exist')
    box_len
    bury 1
    assert // Loan record does not exist
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:901
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:902
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:904
    // this.syncBorrowerSnapshot(debtor)
    frame_dig -1
    callsub syncBorrowerSnapshot
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:906
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:906
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.current_apr_bps() -> uint64:
current_apr_bps:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:963-964
    // @abimethod({ allowActions: 'NoOp' })
    // public current_apr_bps(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    swap
    dup
    uncover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:104
    // util_cap_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 27 // "util_cap_bps"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:918
    // if (D === 0) return 0
    bnz current_apr_bps_after_if_else@3
    intc_0 // 0
    frame_bury 0

current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:101
    // base_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 26 // "base_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:107
    // kink_norm_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 32 // "kink_norm_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:110
    // slope1_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 33 // "slope1_bps"
    app_global_get_ex
    swap
    frame_bury 5
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:113
    // slope2_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 34 // "slope2_bps"
    app_global_get_ex
    swap
    frame_bury 6
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:943
    // if (U_norm_bps <= kink_norm_bps) {
    frame_dig 0
    >=
    bz current_apr_bps_else_body@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:944
    // const [hi1, lo1] = mulw(slope1_bps, U_norm_bps)
    frame_dig 5
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:945
    // apr = base_bps + divw(hi1, lo1, kink_norm_bps)
    uncover 3
    divw
    +
    frame_bury 1

current_apr_bps_after_if_else@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:98
    // max_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 40 // "max_apr_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 4
    assert // check GlobalState exists
    frame_dig 1
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:954
    // if (maxCap > 0 && apr > maxCap) apr = maxCap
    bz current_apr_bps_after_if_else@13
    frame_dig 1
    dup
    frame_dig 4
    >
    swap
    frame_bury 2
    bz current_apr_bps_after_if_else@13
    frame_dig 4
    frame_bury 2

current_apr_bps_after_if_else@13:
    frame_dig 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:127
    // prev_apr_bps = GlobalState<uint64>()
    bytec 39 // "prev_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:973
    // this.prev_apr_bps.value = apr
    dig 1
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:974
    // return apr
    frame_bury 0
    retsub

current_apr_bps_else_body@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:947
    // const over: uint64 = U_norm_bps - kink_norm_bps
    frame_dig 0
    uncover 2
    dup
    cover 2
    -
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:948
    // const denom: uint64 = BASIS_POINTS - kink_norm_bps
    uncover 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:949
    // const [hi2, lo2] = mulw(slope2_bps, over)
    frame_dig 6
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:950
    // apr = base_bps + slope1_bps + divw(hi2, lo2, denom)
    uncover 3
    frame_dig 5
    +
    cover 2
    uncover 3
    divw
    +
    frame_bury 1
    b current_apr_bps_after_if_else@10

current_apr_bps_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:921
    // const [hiCap, loCap] = mulw(D, cap_bps)
    frame_dig 7
    frame_dig 9
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:922
    // const capBorrow = divw(hiCap, loCap, BASIS_POINTS)
    divw
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:923
    // if (capBorrow === 0) return 0
    bnz current_apr_bps_after_if_else@5
    intc_0 // 0
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:966
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6

current_apr_bps_after_if_else@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:925
    // const cappedB = B <= capBorrow ? B : capBorrow
    frame_dig 8
    dup
    frame_dig 3
    dup
    cover 2
    <=
    dig 1
    uncover 3
    uncover 2
    select
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:926
    // const [hiN, loN] = mulw(cappedB, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:927
    // return divw(hiN, loN, capBorrow)
    uncover 2
    divw
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:966
    // const U_raw: uint64 = this.util_norm_bps()
    b current_apr_bps_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.util_norm_bps@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.currentDebtFromSnapshot(rec: bytes) -> uint64, bytes:
currentDebtFromSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1002
    // private currentDebtFromSnapshot(rec: LoanRecord): uint64 {
    proto 1 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1003
    // const p: uint64 = rec.principal.native
    frame_dig -1
    pushint 73 // 73
    extract_uint64
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1004
    // if (p === 0) return 0
    bnz currentDebtFromSnapshot_after_if_else@2
    intc_0 // 0
    frame_dig -1
    uncover 2
    retsub

currentDebtFromSnapshot_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1005
    // const [hi, lo] = mulw(p, this.borrow_index_wad.value)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1006
    // return divw(hi, lo, rec.userIndexWad.native)
    frame_dig -1
    pushint 81 // 81
    extract_uint64
    divw
    frame_dig -1
    uncover 2
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.syncBorrowerSnapshot(borrower: bytes) -> uint64:
syncBorrowerSnapshot:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1015
    // private syncBorrowerSnapshot(borrower: Account): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1016
    // const rec = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1017
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1020
    // collateralTokenId: rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1021
    // collateralAmount: rec.collateralAmount,
    dig 1
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1023
    // lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    uncover 3
    extract 48 17 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1024
    // principal: new UintN64(liveDebt),
    dig 4
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1025
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1018-1026
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: rec.lastDebtChange.copy(), // keep your audit trail
    //   principal: new UintN64(liveDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // })
    frame_dig -1
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1027
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1028
    // return liveDebt
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.accrueMarket() -> uint64:
accrueMarket:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1037
    // private accrueMarket(): uint64 {
    proto 0 1
    pushbytes ""
    dupn 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1038
    // const now: uint64 = Global.latestTimestamp
    global LatestTimestamp
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:122
    // last_accrual_ts = GlobalState<uint64>()
    intc_0 // 0
    bytec 28 // "last_accrual_ts"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1040
    // if (now <= last) return 0
    <=
    bz accrueMarket_after_if_else@2
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1042
    // const deltaT: uint64 = now - last
    frame_dig 4
    frame_dig 5
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:985
    // if (deltaT === 0) return 0
    bnz accrueMarket_after_if_else@9
    intc_0 // 0
    frame_bury 2

accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1046
    // if (simpleWad === 0) {
    frame_dig 2
    bnz accrueMarket_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:122
    // last_accrual_ts = GlobalState<uint64>()
    bytec 28 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1047
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1048
    // return 0
    intc_0 // 0
    frame_bury 0
    retsub

accrueMarket_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1054
    // const [hiI, loI] = mulw(oldIndex, simpleWad)
    dup
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1055
    // const incrIndex: uint64 = divw(hiI, loI, INDEX_SCALE)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1056
    // const newIndex: uint64 = oldIndex + incrIndex
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    bytec 10 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1057
    // this.borrow_index_wad.value = newIndex
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    swap
    dup
    cover 2
    frame_bury 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1063
    // let interest: uint64 = 0
    intc_0 // 0
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1064
    // if (totalBefore > 0) {
    bz accrueMarket_after_if_else@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1065
    // const [hiB, loB] = mulw(totalBefore, simpleWad)
    frame_dig 3
    frame_dig 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1066
    // interest = divw(hiB, loB, INDEX_SCALE)
    divw
    frame_bury 1

accrueMarket_after_if_else@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:96
    // protocol_share_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 37 // "protocol_share_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1071
    // const deposBps: uint64 = BASIS_POINTS - protoBps
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1074
    // const [hiD, loD] = mulw(interest, deposBps)
    frame_dig 1
    dup
    uncover 2
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1075
    // const depositorInterest: uint64 = divw(hiD, loD, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1076
    // const protocolInterest: uint64 = interest - depositorInterest
    dup2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1080
    // this.total_borrows.value = totalBefore + interest
    frame_dig 3
    dig 3
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1080
    // this.total_borrows.value = totalBefore + interest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1083
    // this.total_deposits.value += depositorInterest
    uncover 2
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1083
    // this.total_deposits.value += depositorInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1086
    // this.fee_pool.value += protocolInterest
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    bytec 15 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1086
    // this.fee_pool.value += protocolInterest
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:122
    // last_accrual_ts = GlobalState<uint64>()
    bytec 28 // "last_accrual_ts"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1089
    // this.last_accrual_ts.value = now
    frame_dig 4
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1093
    // return interest
    frame_bury 0
    retsub

accrueMarket_after_if_else@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 13 // "last_apr_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:12
    // export const INDEX_SCALE: uint64 = 1_000_000_000_000 // 1e12
    intc 5 // 1000000000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:988
    // const [hRate, lRate] = mulw(INDEX_SCALE, this.last_apr_bps.value)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:989
    // const ratePerYearWad: uint64 = divw(hRate, lRate, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:992
    // const [hSlice, lSlice] = mulw(ratePerYearWad, deltaT)
    frame_dig 0
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:14
    // export const SECONDS_PER_YEAR: uint64 = 365 * 24 * 60 * 60
    pushint 31536000 // 31536000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:993
    // const simpleWad: uint64 = divw(hSlice, lSlice, SECONDS_PER_YEAR)
    divw
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1045
    // const simpleWad: uint64 = this.sliceFactorWad(deltaT)
    b accrueMarket_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.sliceFactorWad@10


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getLoanRecord(borrowerAddress: bytes) -> bytes:
getLoanRecord:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1101-1102
    // @abimethod({ allowActions: 'NoOp' })
    // public getLoanRecord(borrowerAddress: Account): LoanRecord {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1103
    // return this.loan_record(borrowerAddress).value
    box_get
    assert // Box must have value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayLoanAlgo(paymentTxn: uint64, repaymentAmount: uint64) -> void:
repayLoanAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1116-1117
    // @abimethod({ allowActions: 'NoOp' })
    // public repayLoanAlgo(paymentTxn: gtxn.PaymentTxn, repaymentAmount: uint64): void {
    proto 2 0
    intc_0 // 0
    pushbytes ""
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    bury 1
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1119
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1120-1124
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    frame_dig -2
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1121
    // sender: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1120-1124
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    ==
    bz repayLoanAlgo_bool_false@4
    frame_dig -2
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1122
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1120-1124
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    ==
    bz repayLoanAlgo_bool_false@4
    frame_dig -2
    gtxns Amount
    frame_dig -1
    ==
    bz repayLoanAlgo_bool_false@4
    intc_1 // 1

repayLoanAlgo_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1120-1124
    // assertMatch(paymentTxn, {
    //   sender: op.Txn.sender,
    //   receiver: Global.currentApplicationAddress,
    //   amount: repaymentAmount,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1125
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1126
    // const rec = this.getLoanRecord(op.Txn.sender)
    txn Sender
    callsub getLoanRecord
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1127
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1129
    // const repayUsed: uint64 = repaymentAmount <= liveDebt ? repaymentAmount : liveDebt
    frame_dig -1
    dig 1
    <=
    dig 1
    frame_dig -1
    uncover 2
    select
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1130
    // const refundAmount: uint64 = repaymentAmount - repayUsed
    frame_dig -1
    dig 1
    -
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1131
    // const remainingDebt: uint64 = liveDebt - repayUsed
    swap
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1132
    // const totalBorrowDelta: uint64 = repayUsed <= this.total_borrows.value ? repayUsed : this.total_borrows.value
    <=
    bz repayLoanAlgo_ternary_false@7
    frame_dig 3

repayLoanAlgo_ternary_merge@8:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1135
    // this.total_borrows.value -= totalBorrowDelta
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1135
    // this.total_borrows.value -= totalBorrowDelta
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1136
    // this.addCash(repaymentAmount)
    frame_dig -1
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1138
    // if (refundAmount > 0) {
    frame_dig 1
    bz repayLoanAlgo_after_if_else@11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1139-1145
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1141
    // receiver: op.Txn.sender,
    txn Sender
    frame_dig 1
    dup
    cover 2
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1139-1144
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1143
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1139-1145
    // itxn
    //   .payment({
    //     receiver: op.Txn.sender,
    //     amount: refundAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1146
    // this.removeCash(refundAmount)
    callsub removeCash

repayLoanAlgo_after_if_else@11:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1149
    // if (remainingDebt === 0) {
    frame_dig 2
    bnz repayLoanAlgo_else_body@14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1150
    // this.loan_record(op.Txn.sender).delete()
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1150
    // this.loan_record(op.Txn.sender).delete()
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1151
    // this.active_loan_records.value -= 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1151
    // this.active_loan_records.value -= 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1153-1160
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1155
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1156
    // xferAsset: rec.collateralTokenId.native,
    frame_dig 0
    dup
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1157
    // assetAmount: rec.collateralAmount.native,
    swap
    pushint 40 // 40
    extract_uint64
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1153-1159
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1158
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1153-1160
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: rec.collateralTokenId.native,
    //     assetAmount: rec.collateralAmount.native,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    retsub

repayLoanAlgo_else_body@14:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1164
    // borrowerAddress: new Address(op.Txn.sender.bytes),
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1165
    // collateralTokenId: rec.collateralTokenId,
    frame_dig 0
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1166
    // collateralAmount: rec.collateralAmount,
    swap
    extract 40 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1169
    // amount: new UintN64(repayUsed),
    frame_dig 3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1170
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1168-1172
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1171
    // changeType: new UintN8(2), // repay
    pushbytes 0x02
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1168-1172
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(2), // repay
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1173
    // principal: new UintN64(remainingDebt),
    frame_dig 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1174
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1163-1175
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1163
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1163-1175
    // this.loan_record(op.Txn.sender).value = new LoanRecord({
    //   borrowerAddress: new Address(op.Txn.sender.bytes),
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: rec.collateralAmount,
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(2), // repay
    //   }),
    //   principal: new UintN64(remainingDebt),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    // }).copy()
    swap
    box_put
    retsub

repayLoanAlgo_ternary_false@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    b repayLoanAlgo_ternary_merge@8

repayLoanAlgo_bool_false@4:
    intc_0 // 0
    b repayLoanAlgo_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawPlatformFees(paymentReceiver: bytes) -> void:
withdrawPlatformFees:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1184-1185
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawPlatformFees(paymentReceiver: Account): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1186
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1186
    // assert(op.Txn.sender === this.admin_account.value, 'UNAUTHORIZED')
    ==
    assert // UNAUTHORIZED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1187
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 19 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1189
    // const payout: uint64 = this.fee_pool.value + this.current_accumulated_commission.value
    +
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1190
    // if (payout > 0) {
    bz withdrawPlatformFees_after_if_else@3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1191-1197
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 0
    dup
    itxn_field Amount
    frame_dig -1
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1191-1196
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1195
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1191-1197
    // itxn
    //   .payment({
    //     receiver: paymentReceiver,
    //     amount: payout,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1199
    // this.removeCash(payout)
    callsub removeCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    bytec 15 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1200
    // this.fee_pool.value = 0
    intc_0 // 0
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 19 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1201
    // this.current_accumulated_commission.value = 0
    intc_0 // 0
    app_global_put

withdrawPlatformFees_after_if_else@3:
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.buyoutSplitAlgo(buyer: bytes, debtor: bytes, premiumAxferTxn: uint64, repayPayTxn: uint64, lstAppId: uint64) -> void:
buyoutSplitAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1216-1223
    // @abimethod({ allowActions: 'NoOp' })
    // public buyoutSplitAlgo(
    //   buyer: Account,
    //   debtor: Account,
    //   premiumAxferTxn: gtxn.AssetTransferTxn, // buyout token (xUSD) PREMIUM
    //   repayPayTxn: gtxn.PaymentTxn, // ALGO DEBT repayment
    //   lstAppId: uint64,
    // ): void {
    proto 5 0
    pushbytes ""
    dupn 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1224
    // assert(this.loan_record(debtor).exists, 'NO_LOAN_RECORD')
    box_len
    bury 1
    assert // NO_LOAN_RECORD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1225
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1228
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1230
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1231
    // const collateralAmount: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1232
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1234
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    pop
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1235
    // assert(debtBase > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1238
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collateralTokenId, collateralAmount, lstAppId)
    swap
    uncover 2
    frame_dig -1
    callsub calculateCollateralValueUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1239
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    swap
    callsub debtUSD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1240
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1241
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1243
    // const [hLTV, lLTV] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1244
    // const ltvBps: uint64 = divw(hLTV, lLTV, collateralUSD)
    dig 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1246
    // assert(ltvBps < this.liq_threshold_bps.value, 'NOT_BUYOUT_ELIGIBLE')
    dig 1
    >
    assert // NOT_BUYOUT_ELIGIBLE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1248
    // const [hR, lR] = mulw(this.liq_threshold_bps.value, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1249
    // const ratio_bps: uint64 = divw(hR, lR, ltvBps)
    uncover 2
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1250
    // const premiumRateBps: uint64 = ratio_bps - BASIS_POINTS
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1252
    // const [hP, lP] = mulw(collateralUSD, premiumRateBps)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1253
    // const premiumUSD: uint64 = divw(hP, lP, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1256
    // const buyoutTokenId: uint64 = this.buyout_token_id.value.native
    btoi
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1257
    // const buyoutTokenPrice: uint64 = this.getOraclePrice(this.buyout_token_id.value)
    callsub getOraclePrice
    dup
    uncover 2
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1259
    // const [hPT, lPT] = mulw(premiumUSD, USD_MICRO_UNITS)
    mulw
    cover 2
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260
    // const premiumTokens: uint64 = buyoutTokenPrice === 0 ? 0 : divw(hPT, lPT, buyoutTokenPrice)
    bnz buyoutSplitAlgo_ternary_false@2
    intc_0 // 0
    frame_bury 0

buyoutSplitAlgo_ternary_merge@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1262
    // assert(premiumAxferTxn.sender === op.Txn.sender, 'INVALID_SENDER')
    frame_dig -3
    gtxns Sender
    txn Sender
    ==
    assert // INVALID_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1263
    // assert(premiumAxferTxn.assetReceiver === Global.currentApplicationAddress, 'INVALID_RECEIVER')
    frame_dig -3
    gtxns AssetReceiver
    global CurrentApplicationAddress
    ==
    assert // INVALID_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1264
    // assert(premiumAxferTxn.xferAsset === Asset(buyoutTokenId), 'INVALID_XFER_ASSET')
    frame_dig -3
    gtxns XferAsset
    frame_dig 9
    ==
    assert // INVALID_XFER_ASSET
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1265
    // assert(premiumAxferTxn.assetAmount >= premiumTokens, 'INVALID_BUYOUT_AMOUNT')
    frame_dig -3
    gtxns AssetAmount
    dup
    frame_dig 0
    dup
    cover 3
    >=
    assert // INVALID_BUYOUT_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1268
    // const refund: uint64 = paidAmount - premiumTokens
    swap
    -
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1271
    // assert(repayPayTxn.sender === op.Txn.sender, 'BAD_REPAY_SENDER')
    frame_dig -2
    gtxns Sender
    txn Sender
    ==
    assert // BAD_REPAY_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1272
    // assert(repayPayTxn.receiver === Global.currentApplicationAddress, 'BAD_REPAY_RECEIVER')
    frame_dig -2
    gtxns Receiver
    global CurrentApplicationAddress
    ==
    assert // BAD_REPAY_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1273
    // assert(repayPayTxn.amount >= debtBase, 'INSUFFICIENT_REPAY')
    frame_dig -2
    gtxns Amount
    dup
    frame_bury 3
    dup
    frame_dig 8
    dup
    cover 3
    >=
    assert // INSUFFICIENT_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1274
    // const repayRefund: uint64 = repayPayTxn.amount - debtBase
    dig 1
    -
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1277
    // this.loan_record(debtor).delete()
    frame_dig 4
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1278
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1278
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1280-1287
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1283
    // xferAsset: collateralTokenId.native,
    frame_dig 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1232
    // const collateralTokenId: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1283
    // xferAsset: collateralTokenId.native,
    extract_uint64
    frame_dig 6
    dup
    cover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1280-1286
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1285
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1280-1287
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: collateralTokenId.native,
    //     assetAmount: collateralAmount,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig 7
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1290
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1291
    // const updatedTotal: uint64 = acVal.totalCollateral.native - collateralAmount
    dup
    pushint 24 // 24
    extract_uint64
    uncover 3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1293
    // assetId: acVal.assetId,
    dig 1
    extract 0 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1294
    // baseAssetId: acVal.baseAssetId,
    dig 2
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1295
    // totalCollateral: new UintN64(updatedTotal),
    uncover 2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1296
    // marketBaseAssetId: acVal.marketBaseAssetId,
    dig 3
    extract 16 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1297
    // originatingAppId: acVal.originatingAppId,
    uncover 4
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1292-1298
    // this.accepted_collaterals(acKey).value = new AcceptedCollateral({
    //   assetId: acVal.assetId,
    //   baseAssetId: acVal.baseAssetId,
    //   totalCollateral: new UintN64(updatedTotal),
    //   marketBaseAssetId: acVal.marketBaseAssetId,
    //   originatingAppId: acVal.originatingAppId,
    // }).copy()
    uncover 4
    uncover 4
    concat
    uncover 2
    concat
    uncover 2
    concat
    swap
    concat
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1300
    // const borrowDelta: uint64 = debtBase <= this.total_borrows.value ? debtBase : this.total_borrows.value
    <=
    bz buyoutSplitAlgo_ternary_false@6
    frame_dig 8

buyoutSplitAlgo_ternary_merge@7:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1301
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1301
    // this.total_borrows.value = this.total_borrows.value - borrowDelta
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1302
    // this.addCash(repayPayTxn.amount)
    frame_dig 3
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1340
    // const halfPremium: uint64 = premiumTokens / 2
    frame_dig 0
    dup
    pushint 2 // 2
    /
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1342-1349
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    dig 1
    itxn_field AssetAmount
    frame_dig 9
    dup
    cover 3
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1342-1348
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1347
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1342-1349
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.admin_account.value,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: halfPremium,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1351-1358
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1355
    // assetAmount: premiumTokens - halfPremium, // cover odd token if any
    uncover 2
    swap
    -
    itxn_field AssetAmount
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1351-1357
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1356
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1351-1358
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: premiumTokens - halfPremium, // cover odd token if any
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1306
    // if (refund > 0) {
    frame_dig 1
    bz buyoutSplitAlgo_after_if_else@10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1307-1314
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 1
    dup
    itxn_field AssetAmount
    frame_dig 9
    itxn_field XferAsset
    frame_dig -5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1307-1313
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1312
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1307-1314
    // itxn
    //   .assetTransfer({
    //     assetReceiver: buyer,
    //     xferAsset: buyoutTokenId,
    //     assetAmount: refund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1315
    // this.removeCash(refund)
    callsub removeCash

buyoutSplitAlgo_after_if_else@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1318
    // if (repayRefund > 0) {
    frame_dig 2
    bz buyoutSplitAlgo_after_if_else@13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1319-1325
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 2
    dup
    itxn_field Amount
    frame_dig -5
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1319-1324
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1323
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1319-1325
    // itxn
    //   .payment({
    //     receiver: buyer,
    //     amount: repayRefund,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1326
    // this.removeCash(repayRefund)
    callsub removeCash

buyoutSplitAlgo_after_if_else@13:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1329
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1329
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

buyoutSplitAlgo_ternary_false@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    b buyoutSplitAlgo_ternary_merge@7

buyoutSplitAlgo_ternary_false@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1260
    // const premiumTokens: uint64 = buyoutTokenPrice === 0 ? 0 : divw(hPT, lPT, buyoutTokenPrice)
    frame_dig 12
    frame_dig 11
    frame_dig 10
    divw
    frame_bury 0
    b buyoutSplitAlgo_ternary_merge@3


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.debtUSD(debtBaseUnits: uint64) -> uint64:
debtUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1366
    // private debtUSD(debtBaseUnits: uint64): uint64 {
    proto 1 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1367
    // const baseTokenPrice: uint64 = this.getOraclePrice(this.base_token_id.value) // price of market base token
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1368
    // const [h, l] = mulw(debtBaseUnits, baseTokenPrice)
    frame_dig -1
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1369
    // return divw(h, l, USD_MICRO_UNITS) // micro-USD
    divw
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.maxWithdrawableCollateralLST(lstAppId: uint64) -> uint64:
maxWithdrawableCollateralLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1440-1441
    // @abimethod({ allowActions: 'NoOp' })
    // public maxWithdrawableCollateralLST(lstAppId: uint64): uint64 {
    proto 1 1
    intc_0 // 0
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1442
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender, lstAppId)
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1380
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1381
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1382
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1384
    // const rec = this.loan_record(borrower).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1385
    // const collateral = this.getCollateral(rec.collateralTokenId)
    dup
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1386
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1387
    // const debtBase: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    swap
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1388
    // if (debtBase === 0) return rec.collateralAmount.native // all collateral is withdrawable if no debt
    bnz maxWithdrawableCollateralLST_after_if_else@3
    pushint 40 // 40
    extract_uint64

maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1442
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender, lstAppId)
    frame_bury 0
    retsub

maxWithdrawableCollateralLST_after_if_else@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1392
    // rec.collateralTokenId,
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    cover 2
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1393
    // rec.collateralAmount.native,
    pushint 40 // 40
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1391-1395
    // const currCollatUSD: uint64 = this.calculateCollateralValueUSD(
    //   rec.collateralTokenId,
    //   rec.collateralAmount.native,
    //   lstAppId,
    // )
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1398
    // const debtUSDv: uint64 = this.debtUSD(debtBase)
    frame_dig 3
    callsub debtUSD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1400
    // const [hReq, lReq] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:87
    // ltv_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 25 // "ltv_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1401
    // const requiredCollateralUSD: uint64 = divw(hReq, lReq, this.ltv_bps.value)
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1404
    // if (currCollatUSD <= requiredCollateralUSD) return 0
    <=
    bz maxWithdrawableCollateralLST_after_if_else@5
    intc_0 // 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1442
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender, lstAppId)
    b maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6

maxWithdrawableCollateralLST_after_if_else@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1407
    // const removableUSD: uint64 = currCollatUSD - requiredCollateralUSD
    frame_dig 1
    frame_dig 2
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1411-1414
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1413
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1411-1414
    // const circulatingLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1415-1418
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 21 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1417
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1415-1418
    // const totalDeposits = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig 0
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1422
    // const basePrice = this.getOraclePrice(ac.baseAssetId)
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1425
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    uncover 3
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1425
    // const [hU, lU] = mulw(removableUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1426
    // const removableUnderlying: uint64 = divw(hU, lU, basePrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1429
    // const [hL, lL] = mulw(removableUnderlying, circulatingLST)
    uncover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1430
    // const removableLST: uint64 = divw(hL, lL, totalDeposits)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1442
    // return this.computeMaxWithdrawableCollateralLST(op.Txn.sender, lstAppId)
    b maxWithdrawableCollateralLST_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.computeMaxWithdrawableCollateralLST@6


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64) -> void:
withdrawCollateral:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1451-1452
    // @abimethod({ allowActions: 'NoOp' })
    // public withdrawCollateral(amountLST: uint64, collateralTokenId: uint64, lstAppId: uint64): void {
    proto 3 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1453
    // assert(amountLST > 0, 'ZERO_AMOUNT')
    frame_dig -3
    assert // ZERO_AMOUNT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1454
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1455
    // const borrower = op.Txn.sender
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1456
    // assert(this.loan_record(borrower).exists, 'NO_LOAN')
    dup
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1457
    // this.accrueMarket() // 1) make time current for everyone
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1458
    // const loan = this.loan_record(borrower).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1460
    // assert(loan.collateralTokenId.native === collateralTokenId, 'WRONG_COLLATERAL')
    dup
    extract 32 8 // on error: Index access is out of bounds
    dig 1
    pushint 32 // 32
    extract_uint64
    frame_dig -2
    ==
    assert // WRONG_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1462
    // const acKey = new AcceptedCollateralKey({ assetId: new UintN64(collateralTokenId) })
    frame_dig -2
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    dig 1
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1463
    // assert(this.accepted_collaterals(acKey).exists, 'BAD_COLLATERAL')
    dup
    box_len
    bury 1
    assert // BAD_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1464
    // const acVal = this.accepted_collaterals(acKey).value.copy()
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1465
    // assert(acVal.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1467
    // const maxSafe = this.maxWithdrawableCollateralLST(lstAppId)
    frame_dig -1
    callsub maxWithdrawableCollateralLST
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1468
    // assert(amountLST <= maxSafe, 'EXCEEDS_MAX_SAFE')
    frame_dig -3
    >=
    assert // EXCEEDS_MAX_SAFE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1469
    // assert(amountLST < loan.collateralAmount.native, 'INSUFFICIENT_COLLATERAL')
    dig 2
    pushint 40 // 40
    extract_uint64
    frame_dig -3
    dig 1
    <
    assert // INSUFFICIENT_COLLATERAL
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1470
    // const remainLST: uint64 = loan.collateralAmount.native - amountLST
    frame_dig -3
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1473-1480
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -3
    itxn_field AssetAmount
    frame_dig -2
    itxn_field XferAsset
    dig 5
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1473-1479
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1478
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1473-1480
    // itxn
    //   .assetTransfer({
    //     assetReceiver: borrower,
    //     xferAsset: collateralTokenId, // LST ASA
    //     assetAmount: amountLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1486
    // collateralAmount: new UintN64(remainLST),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1489
    // amount: new UintN64(amountLST),
    frame_dig -3
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1490
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1488-1492
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1491
    // changeType: new UintN8(3), // 3 = collateral withdraw
    pushbytes 0x03
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1488-1492
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(amountLST),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(3), // 3 = collateral withdraw
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1493
    // principal: loan.principal, // unchanged
    dig 5
    extract 73 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1494
    // userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    uncover 6
    extract 81 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1483-1495
    // const newRec = new LoanRecord({
    //   borrowerAddress: new Address(borrower.bytes),
    //   collateralTokenId: new UintN64(collateralTokenId),
    //   collateralAmount: new UintN64(remainLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(amountLST),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(3), // 3 = collateral withdraw
    //   }),
    //   principal: loan.principal, // unchanged
    //   userIndexWad: loan.userIndexWad, // unchanged snapshot; no debt change here
    // })
    uncover 8
    uncover 6
    concat
    uncover 5
    concat
    uncover 3
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1496
    // this.loan_record(borrower).value = newRec.copy()
    uncover 2
    swap
    box_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1499
    // this.reduceCollateralTotal(loan.collateralTokenId, amountLST)
    frame_dig -3
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1502
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1502
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.liquidatePartialAlgo(debtor: bytes, repayPay: uint64, repayBaseAmount: uint64, lstAppId: uint64) -> void:
liquidatePartialAlgo:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1586-1592
    // @abimethod({ allowActions: 'NoOp' })
    // public liquidatePartialAlgo(
    //   debtor: Account,
    //   repayPay: gtxn.PaymentTxn, // liquidator pays ALGO
    //   repayBaseAmount: uint64, // requested repay in microALGO (can be >= live debt; excess refunded)
    //   lstAppId: uint64,
    // ): void {
    proto 4 0
    intc_0 // 0
    pushbytes ""
    dupn 20
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1593
    // assert(this.base_token_id.value.native === 0, 'BASE_NOT_ALGO')
    btoi
    !
    assert // BASE_NOT_ALGO
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1594
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:137
    // loan_record = BoxMap<Account, LoanRecord>({ keyPrefix: 'loan_record' })
    bytec 6 // "loan_record"
    frame_dig -4
    concat
    dupn 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1595
    // assert(this.loan_record(debtor).exists, 'NO_LOAN')
    box_len
    bury 1
    assert // NO_LOAN
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1596
    // this.accrueMarket()
    callsub accrueMarket
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1598
    // const rec = this.loan_record(debtor).value.copy()
    box_get
    swap
    dup
    uncover 2
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1599
    // const collTok: UintN64 = rec.collateralTokenId
    dup
    extract 32 8 // on error: Index access is out of bounds
    dup
    uncover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1600
    // const collLSTBal: uint64 = rec.collateralAmount.native
    dup
    pushint 40 // 40
    extract_uint64
    dup
    cover 2
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1601
    // const liveDebt: uint64 = this.currentDebtFromSnapshot(rec)
    callsub currentDebtFromSnapshot
    cover 3
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1602
    // assert(liveDebt > 0, 'NO_DEBT')
    dup
    assert // NO_DEBT
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1603
    // assert(repayBaseAmount > 0, 'BAD_REPAY')
    frame_dig -2
    assert // BAD_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1605
    // const collateralUSD: uint64 = this.calculateCollateralValueUSD(collTok, collLSTBal, lstAppId)
    cover 2
    frame_dig -1
    callsub calculateCollateralValueUSD
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1606
    // const debtUSDv: uint64 = this.debtUSD(liveDebt)
    dig 1
    callsub debtUSD
    dup
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1607
    // assert(debtUSDv > 0, 'BAD_DEBT_USD')
    dup
    assert // BAD_DEBT_USD
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1608
    // assert(collateralUSD > 0, 'BAD_COLLATERAL_USD')
    dig 1
    assert // BAD_COLLATERAL_USD
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1610
    // const [hLTV, lLTV] = mulw(debtUSDv, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1611
    // const ltvBps: uint64 = divw(hLTV, lLTV, collateralUSD)
    uncover 2
    divw
    dup
    cover 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "liq_threshold_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1612
    // assert(ltvBps >= this.liq_threshold_bps.value, 'NOT_LIQUIDATABLE')
    dig 1
    <=
    assert // NOT_LIQUIDATABLE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1615
    // assert(repayPay.sender === op.Txn.sender, 'BAD_REPAY_SENDER')
    frame_dig -3
    gtxns Sender
    txn Sender
    ==
    assert // BAD_REPAY_SENDER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1616
    // assert(repayPay.receiver === Global.currentApplicationAddress, 'BAD_REPAY_RECEIVER')
    frame_dig -3
    gtxns Receiver
    global CurrentApplicationAddress
    ==
    assert // BAD_REPAY_RECEIVER
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1617
    // assert(repayPay.amount >= repayBaseAmount, 'INSUFFICIENT_REPAY')
    frame_dig -3
    gtxns Amount
    dup
    cover 3
    dup
    frame_dig -2
    >=
    assert // INSUFFICIENT_REPAY
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1620
    // const basePrice = this.getOraclePrice(this.base_token_id.value) // USD
    callsub getOraclePrice
    cover 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1621
    // const isFullRepayRequest = repayRequested >= liveDebt
    uncover 2
    >=
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "liq_bonus_bps"
    app_global_get_ex
    swap
    cover 2
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:90
    // liq_threshold_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 22 // "liq_threshold_bps"
    app_global_get_ex
    swap
    dup
    cover 2
    cover 3
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:443
    // if (ltvBps <= threshold) return 0
    <=
    bz liquidatePartialAlgo_after_if_else@52
    intc_0 // 0
    frame_bury 3

liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.dynamicLiqBonusBps@60:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1624
    // let repayCandidate: uint64 = repayRequested > liveDebt ? liveDebt : repayRequested
    frame_dig 31
    dup
    frame_dig 27
    dup
    cover 3
    >
    swap
    cover 2
    select
    dup
    frame_bury 13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1628-1630
    // repayCandidate === 0
    //   ? 0
    //   : divw(mulw(repayCandidate, basePrice)[0], mulw(repayCandidate, basePrice)[1], USD_MICRO_UNITS)
    bnz liquidatePartialAlgo_ternary_false@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1629
    // ? 0
    intc_0 // 0
    frame_bury 16

liquidatePartialAlgo_ternary_merge@3:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1632
    // if (collateralUSD <= debtUSDv && !isFullRepayRequest) {
    frame_dig 28
    frame_dig 29
    <=
    dup
    frame_bury 19
    bz liquidatePartialAlgo_after_if_else@6
    frame_dig 33
    assert // FULL_REPAY_REQUIRED

liquidatePartialAlgo_after_if_else@6:
    frame_dig 3
    frame_bury 4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1635
    // if (repayUSDcandidate > 0) {
    frame_dig 16
    bz liquidatePartialAlgo_after_if_else@13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1636
    // if (collateralUSD <= debtUSDv) {
    frame_dig 19
    bz liquidatePartialAlgo_else_body@9
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1637
    // bonusBps = 0
    intc_0 // 0
    frame_bury 3

liquidatePartialAlgo_after_if_else@12:
    frame_dig 3
    frame_bury 4

liquidatePartialAlgo_after_if_else@13:
    frame_dig 4
    dup
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "liq_bonus_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1645
    // if (bonusBps > this.liq_bonus_bps.value) bonusBps = this.liq_bonus_bps.value
    >
    bz liquidatePartialAlgo_after_if_else@15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "liq_bonus_bps"
    app_global_get_ex
    swap
    frame_bury 3
    assert // check GlobalState exists

liquidatePartialAlgo_after_if_else@15:
    frame_dig 13
    frame_bury 14
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1648
    // if (!isFullRepayRequest && bonusBps < BASIS_POINTS * 10) {
    frame_dig 33
    bnz liquidatePartialAlgo_after_if_else@20
    frame_dig 3
    pushint 100000 // 100000
    <
    frame_dig 13
    frame_bury 14
    bz liquidatePartialAlgo_after_if_else@20
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1649
    // const [hMaxUsd, lMaxUsd] = mulw(collateralUSD, BASIS_POINTS)
    frame_dig 28
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1649
    // const [hMaxUsd, lMaxUsd] = mulw(collateralUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1650
    // const maxRepayUSDForCollateral: uint64 = divw(hMaxUsd, lMaxUsd, BASIS_POINTS + bonusBps)
    frame_dig 3
    +
    divw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1651
    // const [hMaxBase, lMaxBase] = mulw(maxRepayUSDForCollateral, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1652
    // const maxRepayBaseForCollateral: uint64 = divw(hMaxBase, lMaxBase, basePrice)
    frame_dig 32
    divw
    dup
    frame_bury 7
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1653
    // if (repayCandidate > maxRepayBaseForCollateral) repayCandidate = maxRepayBaseForCollateral
    frame_dig 13
    <
    bz liquidatePartialAlgo_after_if_else@19
    frame_dig 7
    frame_bury 13

liquidatePartialAlgo_after_if_else@19:
    frame_dig 13
    frame_bury 14

liquidatePartialAlgo_after_if_else@20:
    frame_dig 14
    dup
    frame_bury 13
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1656
    // const [hRU, lRU] = mulw(repayCandidate, basePrice)
    frame_dig 32
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1657
    // const repayUSD: uint64 = divw(hRU, lRU, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1659
    // const [hSZ, lSZ] = mulw(repayUSD, BASIS_POINTS + bonusBps)
    frame_dig 3
    +
    dup
    frame_bury 20
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1660
    // const seizeUSD: uint64 = divw(hSZ, lSZ, BASIS_POINTS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig 24
    concat
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1519
    // const underlyingPrice = this.getOraclePrice(this.getCollateral(collateralTokenId).baseAssetId) // USD
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1520
    // const [hUnd, lUnd] = mulw(seizeUSD, USD_MICRO_UNITS)
    uncover 2
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1520
    // const [hUnd, lUnd] = mulw(seizeUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1521
    // const seizeUnderlying: uint64 = divw(hUnd, lUnd, underlyingPrice)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    swap
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1524
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1527-1530
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1529
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1527-1530
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1531-1534
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 21 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1533
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1531-1534
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1535
    // const [hL, lL] = mulw(seizeUnderlying, circ)
    cover 2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1536
    // let seizeLST: uint64 = divw(hL, lL, total)
    uncover 2
    divw
    dup
    frame_bury 18
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1538
    // if (seizeLST > availableLST) seizeLST = availableLST
    frame_dig 25
    >
    bz liquidatePartialAlgo_after_if_else@44
    frame_dig 25
    frame_bury 18

liquidatePartialAlgo_after_if_else@44:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1663
    // assert(seizeLST > 0, 'NOTHING_TO_SEIZE')
    frame_dig 18
    dup
    assert // NOTHING_TO_SEIZE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1549
    // if (seizeLST === 0) return 0
    bnz liquidatePartialAlgo_after_if_else@48
    intc_0 // 0
    frame_bury 15

liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayBaseFromSeizedLST@49:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1666
    // if (repaySupported > liveDebt) {
    frame_dig 15
    frame_dig 27
    >
    bz liquidatePartialAlgo_after_if_else@22
    frame_dig 27
    frame_bury 15

liquidatePartialAlgo_after_if_else@22:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1670
    // if (seizeLST === collLSTBal) {
    frame_dig 18
    frame_dig 25
    ==
    dup
    frame_bury 21
    bz liquidatePartialAlgo_after_if_else@24
    frame_dig -2
    frame_bury 13

liquidatePartialAlgo_after_if_else@24:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1674
    // const proposedRepayUsed: uint64 = repayCandidate <= repaySupported ? repayCandidate : repaySupported
    frame_dig 13
    dup
    frame_dig 15
    dup
    cover 2
    <=
    swap
    cover 2
    select
    frame_bury 10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1676
    // if (!isFullRepayRequest && seizeLST === collLSTBal && proposedRepayUsed < liveDebt) {
    frame_dig 33
    bnz liquidatePartialAlgo_after_if_else@28
    frame_dig 21
    bz liquidatePartialAlgo_after_if_else@28
    frame_dig 10
    frame_dig 27
    <
    !
    assert // FULL_REPAY_REQUIRED

liquidatePartialAlgo_after_if_else@28:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1680-1684
    // const repayUsed: uint64 = isFullRepayRequest
    //   ? repayRequested <= liveDebt
    //     ? repayRequested
    //     : liveDebt
    //   : proposedRepayUsed
    frame_dig 33
    bz liquidatePartialAlgo_ternary_false@30
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1681
    // ? repayRequested <= liveDebt
    frame_dig 31
    dup
    frame_dig 27
    dup
    cover 2
    <=
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1681-1683
    // ? repayRequested <= liveDebt
    //   ? repayRequested
    //   : liveDebt
    swap
    cover 2
    select
    frame_bury 17

liquidatePartialAlgo_ternary_merge@31:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1685
    // assert(repayUsed > 0, 'ZERO_REPAY_USED')
    frame_dig 17
    dup
    assert // ZERO_REPAY_USED
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1686
    // const refundAmount: uint64 = repayRequested - repayUsed
    frame_dig 31
    dig 1
    -
    dup
    cover 2
    frame_bury 11
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1688
    // const remainingLST: uint64 = collLSTBal - seizeLST
    frame_dig 25
    frame_dig 18
    dup
    cover 3
    -
    frame_bury 12
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1689
    // const newDebtBase: uint64 = liveDebt - repayUsed
    frame_dig 27
    swap
    -
    frame_bury 8
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1691-1698
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1693
    // assetReceiver: op.Txn.sender,
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1694
    // xferAsset: collTok.native,
    frame_dig 23
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1599
    // const collTok: UintN64 = rec.collateralTokenId
    pushint 32 // 32
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1694
    // xferAsset: collTok.native,
    extract_uint64
    dup
    frame_bury 6
    uncover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1691-1697
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1696
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1691-1698
    // itxn
    //   .assetTransfer({
    //     assetReceiver: op.Txn.sender,
    //     xferAsset: collTok.native,
    //     assetAmount: seizeLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1700
    // if (refundAmount > 0) {
    bz liquidatePartialAlgo_after_if_else@35
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1701-1707
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1704
    // receiver: op.Txn.sender,
    txn Sender
    itxn_field Receiver
    frame_dig 11
    dup
    itxn_field Amount
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1701-1706
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1705
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1701-1707
    // itxn
    //   .payment({
    //     amount: refundAmount,
    //     receiver: op.Txn.sender,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1708
    // this.removeCash(refundAmount)
    callsub removeCash

liquidatePartialAlgo_after_if_else@35:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1711
    // this.reduceCollateralTotal(collTok, seizeLST)
    frame_dig 24
    frame_dig 18
    callsub reduceCollateralTotal
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1712
    // this.total_borrows.value = this.total_borrows.value - repayUsed
    frame_dig 17
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1712
    // this.total_borrows.value = this.total_borrows.value - repayUsed
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1713
    // this.addCash(repayRequested)
    frame_dig 31
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1715
    // if (newDebtBase === 0) {
    frame_dig 8
    bnz liquidatePartialAlgo_else_body@40
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1716
    // if (remainingLST > 0) {
    frame_dig 12
    bz liquidatePartialAlgo_after_if_else@39
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1717-1724
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    frame_dig 12
    dup
    itxn_field AssetAmount
    frame_dig 6
    itxn_field XferAsset
    frame_dig -4
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1717-1723
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1722
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1717-1724
    // itxn
    //   .assetTransfer({
    //     assetReceiver: debtor,
    //     xferAsset: collTok.native,
    //     assetAmount: remainingLST,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1725
    // this.reduceCollateralTotal(collTok, remainingLST)
    frame_dig 24
    swap
    callsub reduceCollateralTotal

liquidatePartialAlgo_after_if_else@39:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1727
    // this.loan_record(debtor).delete()
    frame_dig 22
    box_del
    pop
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1728
    // this.active_loan_records.value = this.active_loan_records.value - 1
    intc_1 // 1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1728
    // this.active_loan_records.value = this.active_loan_records.value - 1
    swap
    app_global_put

liquidatePartialAlgo_after_if_else@41:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1746
    // this.last_apr_bps.value = this.current_apr_bps()
    callsub current_apr_bps
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:125
    // last_apr_bps = GlobalState<uint64>()
    bytec 13 // "last_apr_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1746
    // this.last_apr_bps.value = this.current_apr_bps()
    swap
    app_global_put
    retsub

liquidatePartialAlgo_else_body@40:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1731
    // borrowerAddress: rec.borrowerAddress,
    frame_dig 26
    dup
    extract 0 32 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1732
    // collateralTokenId: rec.collateralTokenId,
    swap
    extract 32 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1733
    // collateralAmount: new UintN64(remainingLST),
    frame_dig 12
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1735
    // principal: new UintN64(newDebtBase),
    frame_dig 8
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1736
    // userIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1738
    // amount: new UintN64(repayUsed),
    frame_dig 17
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1739
    // timestamp: new UintN64(Global.latestTimestamp),
    global LatestTimestamp
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1737-1741
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4),
    // }),
    swap
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1740
    // changeType: new UintN8(4),
    pushbytes 0x04
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1737-1741
    // lastDebtChange: new DebtChange({
    //   amount: new UintN64(repayUsed),
    //   timestamp: new UintN64(Global.latestTimestamp),
    //   changeType: new UintN8(4),
    // }),
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1730-1742
    // const newRec = new LoanRecord({
    //   borrowerAddress: rec.borrowerAddress,
    //   collateralTokenId: rec.collateralTokenId,
    //   collateralAmount: new UintN64(remainingLST),
    //   borrowedTokenId: this.base_token_id.value,
    //   principal: new UintN64(newDebtBase),
    //   userIndexWad: new UintN64(this.borrow_index_wad.value),
    //   lastDebtChange: new DebtChange({
    //     amount: new UintN64(repayUsed),
    //     timestamp: new UintN64(Global.latestTimestamp),
    //     changeType: new UintN8(4),
    //   }),
    // })
    uncover 6
    uncover 6
    concat
    uncover 5
    concat
    swap
    concat
    uncover 3
    concat
    uncover 2
    concat
    swap
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1743
    // this.loan_record(debtor).value = newRec.copy()
    frame_dig 22
    swap
    box_put
    b liquidatePartialAlgo_after_if_else@41

liquidatePartialAlgo_ternary_false@30:
    frame_dig 10
    frame_bury 17
    b liquidatePartialAlgo_ternary_merge@31

liquidatePartialAlgo_after_if_else@48:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    frame_dig 0
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1552
    // assert(collateral.originatingAppId.native === lstAppId, 'mismatched LST app')
    dup
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1554-1557
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1556
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1554-1557
    // const circ = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1558-1561
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 21 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1560
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1558-1561
    // const total = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstAppId,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1562
    // const [hUnderlying, lUnderlying] = mulw(seizeLST, total)
    frame_dig 18
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1563
    // const seizedUnderlying: uint64 = divw(hUnderlying, lUnderlying, circ)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1565
    // const underlyingPrice = this.getOraclePrice(collateral.baseAssetId) // USD
    swap
    extract 8 8 // on error: Index access is out of bounds
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1566
    // const [hSeizeUSD, lSeizeUSD] = mulw(seizedUnderlying, underlyingPrice)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1567
    // const seizeUSDActual: uint64 = divw(hSeizeUSD, lSeizeUSD, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1569
    // const [hRepayUSD, lRepayUSD] = mulw(seizeUSDActual, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1570
    // const repayUSD: uint64 = divw(hRepayUSD, lRepayUSD, BASIS_POINTS + bonusBps)
    frame_dig 20
    divw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1572
    // const [hRepayBase, lRepayBase] = mulw(repayUSD, USD_MICRO_UNITS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1573
    // const repayBase: uint64 = divw(hRepayBase, lRepayBase, basePrice)
    frame_dig 32
    divw
    frame_bury 15
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1665
    // let repaySupported: uint64 = this.repayBaseFromSeizedLST(seizeLST, collTok, lstAppId, bonusBps, basePrice)
    b liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.repayBaseFromSeizedLST@49

liquidatePartialAlgo_else_body@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1639
    // const gapUSD: uint64 = collateralUSD - debtUSDv
    frame_dig 28
    frame_dig 29
    -
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1640
    // const [hCap, lCap] = mulw(gapUSD, BASIS_POINTS)
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1641
    // const bonusCap: uint64 = divw(hCap, lCap, repayUSDcandidate)
    frame_dig 16
    divw
    dup
    frame_bury 5
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1642
    // if (bonusCap < bonusBps) bonusBps = bonusCap
    frame_dig 3
    <
    bz liquidatePartialAlgo_after_if_else@12
    frame_dig 5
    frame_bury 3
    b liquidatePartialAlgo_after_if_else@12

liquidatePartialAlgo_ternary_false@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1630
    // : divw(mulw(repayCandidate, basePrice)[0], mulw(repayCandidate, basePrice)[1], USD_MICRO_UNITS)
    frame_dig 13
    frame_dig 32
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1630
    // : divw(mulw(repayCandidate, basePrice)[0], mulw(repayCandidate, basePrice)[1], USD_MICRO_UNITS)
    divw
    frame_bury 16
    b liquidatePartialAlgo_ternary_merge@3

liquidatePartialAlgo_after_if_else@52:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:445
    // const over: uint64 = ltvBps - threshold
    frame_dig 30
    frame_dig 35
    dup
    cover 2
    -
    frame_bury 9
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:446
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    <
    bz liquidatePartialAlgo_ternary_false@54
    // smart_contracts/orbital_lending/config.algo.ts:9
    // export const BASIS_POINTS: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:446
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    frame_dig 35
    -

liquidatePartialAlgo_ternary_merge@55:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:448
    // const [h, l] = mulw(over, maxBonus)
    frame_dig 9
    frame_dig 34
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:449
    // let bonus: uint64 = divw(h, l, room)
    uncover 2
    divw
    dup
    frame_bury 2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:450
    // if (bonus === 0) bonus = 1
    bnz liquidatePartialAlgo_after_if_else@57
    intc_1 // 1
    frame_bury 2

liquidatePartialAlgo_after_if_else@57:
    frame_dig 2
    dup
    frame_bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:451
    // if (bonus > maxBonus) bonus = maxBonus
    frame_dig 34
    >
    bz liquidatePartialAlgo_after_if_else@59
    frame_dig 34
    frame_bury 1

liquidatePartialAlgo_after_if_else@59:
    frame_dig 1
    frame_bury 3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1622
    // let bonusBps: uint64 = this.dynamicLiqBonusBps(ltvBps)
    b liquidatePartialAlgo_after_inlined_smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.dynamicLiqBonusBps@60

liquidatePartialAlgo_ternary_false@54:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:446
    // const room: uint64 = BASIS_POINTS > threshold ? BASIS_POINTS - threshold : 1
    intc_1 // 1
    b liquidatePartialAlgo_ternary_merge@55


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.calculateCollateralValueUSD(collateralTokenId: bytes, collateralAmount: uint64, lstApp: uint64) -> uint64:
calculateCollateralValueUSD:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1783-1784
    // @abimethod({ allowActions: 'NoOp' })
    // public calculateCollateralValueUSD(collateralTokenId: UintN64, collateralAmount: uint64, lstApp: uint64): uint64 {
    proto 3 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:134
    // accepted_collaterals = BoxMap<AcceptedCollateralKey, AcceptedCollateral>({ keyPrefix: 'accepted_collaterals' })
    bytec 11 // "accepted_collaterals"
    frame_dig -3
    concat
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:462
    // return this.accepted_collaterals(key).exists
    dup
    box_len
    bury 1
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1786
    // assert(this.collateralExists(collateralTokenId), 'unknown collateral')
    assert // unknown collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    dup
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1788
    // assert(collateralInfo.originatingAppId.native === lstApp, 'mismatched LST app')
    pushint 32 // 32
    extract_uint64
    frame_dig -1
    ==
    assert // mismatched LST app
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1790-1793
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 20 // method "getCirculatingLST()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1792
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1790-1793
    // const circulatingExternalLST = abiCall(TargetContract.prototype.getCirculatingLST, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1795-1798
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_begin
    bytec 21 // method "getTotalDeposits()uint64"
    itxn_field ApplicationArgs
    frame_dig -1
    itxn_field ApplicationID
    pushint 6 // appl
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1797
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1795-1798
    // const totalDepositsExternal = abiCall(TargetContract.prototype.getTotalDeposits, {
    //   appId: lstApp,
    //   fee: 0,
    // }).returnValue
    itxn_submit
    itxn LastLog
    dup
    extract 4 0
    swap
    extract 0 4
    bytec_2 // 0x151f7c75
    ==
    assert // Bytes has valid prefix
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1801
    // const [hC, lC] = mulw(totalDepositsExternal, collateralAmount)
    frame_dig -2
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1802
    // const underlyingCollateral = divw(hC, lC, circulatingExternalLST)
    uncover 2
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:472
    // return this.accepted_collaterals(key).value.copy()
    swap
    box_get
    assert // Box must have value
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1806
    // const baseTokenId = lstCollateral.baseAssetId
    extract 8 8 // on error: Index access is out of bounds
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1808
    // const baseTokenPrice = this.getOraclePrice(baseTokenId)
    callsub getOraclePrice
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1811
    // const [hU, lU] = mulw(underlyingCollateral, baseTokenPrice)
    mulw
    // smart_contracts/orbital_lending/config.algo.ts:11
    // export const USD_MICRO_UNITS: uint64 = 1_000_000
    intc 4 // 1000000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1812
    // const collateralUSD = divw(hU, lU, USD_MICRO_UNITS)
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1814
    // return collateralUSD
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.pickupAlgoRewards() -> void:
pickupAlgoRewards:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1923-1924
    // @abimethod({ allowActions: 'NoOp' })
    // public pickupAlgoRewards(): void {
    proto 0 0
    pushbytes ""
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1925
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1925
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can pickup rewards')
    ==
    assert // Only admin can pickup rewards
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    intc_0 // 0
    bytec 5 // "contract_state"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1926
    // assert(this.contract_state.value.native === 1, 'CONTRACT_NOT_ACTIVE')
    btoi
    intc_1 // 1
    ==
    assert // CONTRACT_NOT_ACTIVE
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1928
    // const spendable: uint64 = Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance
    global CurrentApplicationAddress
    acct_params_get AcctBalance
    assert // account funded
    global CurrentApplicationAddress
    acct_params_get AcctMinBalance
    assert // account funded
    -
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1930
    // if (spendable <= this.cash_on_hand.value) {
    <=
    bz pickupAlgoRewards_after_if_else@2
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1931
    // return // no new consensus payout to harvest
    retsub

pickupAlgoRewards_after_if_else@2:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1934
    // const rawReward: uint64 = spendable - this.cash_on_hand.value
    frame_dig 1
    swap
    -
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/config.algo.ts:15
    // export const MINIMUM_ADDITIONAL_REWARD: uint64 = 10_000
    intc_2 // 10000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1935
    // if (rawReward <= MINIMUM_ADDITIONAL_REWARD) {
    <=
    bz pickupAlgoRewards_after_if_else@4
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1936
    // return // defer tiny rewards
    retsub

pickupAlgoRewards_after_if_else@4:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1939
    // this.addCash(rawReward)
    frame_dig 0
    dup
    callsub addCash
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // commission_percentage = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "commission_percentage"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1941
    // const [hi, lo] = mulw(rawReward, this.commission_percentage.value)
    dig 1
    mulw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1942
    // const commission: uint64 = divw(hi, lo, 100)
    pushint 100 // 100
    divw
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 19 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1944
    // this.current_accumulated_commission.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 19 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1944
    // this.current_accumulated_commission.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // total_commission_earned = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "total_commission_earned"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1945
    // this.total_commission_earned.value += commission
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // total_commission_earned = GlobalState<uint64>()
    bytec 23 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1945
    // this.total_commission_earned.value += commission
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1947
    // const netReward: uint64 = rawReward - commission
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // total_additional_rewards = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "total_additional_rewards"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1948
    // this.total_additional_rewards.value += netReward
    dig 1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // total_additional_rewards = GlobalState<uint64>()
    bytec 24 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1948
    // this.total_additional_rewards.value += netReward
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1949
    // this.total_deposits.value += netReward
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1949
    // this.total_deposits.value += netReward
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.migrateCollateralTokenId(collateralTokenId: uint64) -> void:
migrateCollateralTokenId:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1952-1953
    // @abimethod({ allowActions: 'NoOp' })
    // public migrateCollateralTokenId(collateralTokenId: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1954
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate collateral')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1954
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate collateral')
    ==
    assert // Only migration admin can migrate collateral
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1955
    // const collateralBalance = Asset(collateralTokenId).balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    frame_dig -1
    asset_holding_get AssetBalance
    swap
    dup
    uncover 2
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1956
    // if (collateralBalance > 0) {
    bz migrateCollateralTokenId_after_if_else@3
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1957-1964
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    frame_dig 0
    itxn_field AssetAmount
    frame_dig -1
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1957-1963
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1962
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1957-1964
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: collateralTokenId,
    //     assetAmount: collateralBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

migrateCollateralTokenId_after_if_else@3:
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.migrateContract() -> bytes:
migrateContract:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1972-1973
    // @abimethod({ allowActions: 'NoOp' })
    // public migrateContract(): MigrationSnapshot {
    proto 0 1
    pushbytes ""
    dup
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1974
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1974
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can migrate')
    ==
    assert // Only migration admin can migrate
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1975
    // this.setContractState(2) // set to migrating
    pushint 2 // 2
    callsub setContractState
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2175
    // itxn.keyRegistration({ fee: 0 }).submit()
    itxn_begin
    pushint 2 // 2
    itxn_field TypeEnum
    intc_0 // 0
    itxn_field Fee
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1979
    // const lstAsset = Asset(this.lst_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1980
    // const lstBalance = lstAsset.balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    swap
    asset_holding_get AssetBalance
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1983-1990
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1986
    // xferAsset: this.lst_token_id.value.native,
    btoi
    uncover 2
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1983-1989
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1988
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1983-1990
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.lst_token_id.value.native,
    //     assetAmount: lstBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1992
    // if (this.base_token_id.value.native === 0) {
    btoi
    bnz migrateContract_else_body@6
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1995
    // Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance - STANDARD_TXN_FEE
    global CurrentApplicationAddress
    acct_params_get AcctBalance
    assert // account funded
    global CurrentApplicationAddress
    acct_params_get AcctMinBalance
    assert // account funded
    -
    // smart_contracts/orbital_lending/config.algo.ts:7
    // export const STANDARD_TXN_FEE: uint64 = 1_000
    pushint 1000 // 1000
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1995
    // Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance - STANDARD_TXN_FEE
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1994-1995
    // const algoBalance: uint64 =
    //   Global.currentApplicationAddress.balance - Global.currentApplicationAddress.minBalance - STANDARD_TXN_FEE
    dup
    frame_bury 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1996
    // if (algoBalance > 0) {
    bz migrateContract_after_if_else@10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1997-2003
    // itxn
    //   .payment({
    //     receiver: this.migration_admin.value,
    //     amount: algoBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    frame_dig 0
    itxn_field Amount
    itxn_field Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1997-2002
    // itxn
    //   .payment({
    //     receiver: this.migration_admin.value,
    //     amount: algoBalance,
    //     fee: 0,
    //   })
    intc_1 // 1
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2001
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:1997-2003
    // itxn
    //   .payment({
    //     receiver: this.migration_admin.value,
    //     amount: algoBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit

migrateContract_after_if_else@10:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2022
    // accepted_collaterals_count: new UintN64(this.accepted_collaterals_count.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2023
    // cash_on_hand: new UintN64(this.cash_on_hand.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2024
    // circulating_lst: new UintN64(this.circulating_lst.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2025
    // total_deposits: new UintN64(this.total_deposits.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    intc_0 // 0
    bytec_1 // "total_borrows"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2026
    // total_borrows: new UintN64(this.total_borrows.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // total_additional_rewards = GlobalState<uint64>()
    intc_0 // 0
    bytec 24 // "total_additional_rewards"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2027
    // total_additional_rewards: new UintN64(this.total_additional_rewards.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // total_commission_earned = GlobalState<uint64>()
    intc_0 // 0
    bytec 23 // "total_commission_earned"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2028
    // total_commission_earned: new UintN64(this.total_commission_earned.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    intc_0 // 0
    bytec 19 // "current_accumulated_commission"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2029
    // current_accumulated_commission: new UintN64(this.current_accumulated_commission.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    intc_0 // 0
    bytec 15 // "fee_pool"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2030
    // fee_pool: new UintN64(this.fee_pool.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    intc_0 // 0
    bytec 10 // "borrow_index_wad"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2031
    // borrowIndexWad: new UintN64(this.borrow_index_wad.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2032
    // base_token_id: new UintN64(this.base_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2033
    // lst_token_id: new UintN64(this.lst_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 17 // "buyout_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2034
    // buyout_token_id: new UintN64(this.buyout_token_id.value.native),
    btoi
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // commission_percentage = GlobalState<uint64>()
    intc_0 // 0
    bytec 29 // "commission_percentage"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2035
    // commission_percentage: new UintN64(this.commission_percentage.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    intc_0 // 0
    bytec 18 // "liq_bonus_bps"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2036
    // liq_bonus_bps: new UintN64(this.liq_bonus_bps.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    intc_0 // 0
    bytec 8 // "active_loan_records"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2037
    // active_loan_records: new UintN64(this.active_loan_records.value),
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2021-2038
    // return new MigrationSnapshot({
    //   accepted_collaterals_count: new UintN64(this.accepted_collaterals_count.value),
    //   cash_on_hand: new UintN64(this.cash_on_hand.value),
    //   circulating_lst: new UintN64(this.circulating_lst.value),
    //   total_deposits: new UintN64(this.total_deposits.value),
    //   total_borrows: new UintN64(this.total_borrows.value),
    //   total_additional_rewards: new UintN64(this.total_additional_rewards.value),
    //   total_commission_earned: new UintN64(this.total_commission_earned.value),
    //   current_accumulated_commission: new UintN64(this.current_accumulated_commission.value),
    //   fee_pool: new UintN64(this.fee_pool.value),
    //   borrowIndexWad: new UintN64(this.borrow_index_wad.value),
    //   base_token_id: new UintN64(this.base_token_id.value.native),
    //   lst_token_id: new UintN64(this.lst_token_id.value.native),
    //   buyout_token_id: new UintN64(this.buyout_token_id.value.native),
    //   commission_percentage: new UintN64(this.commission_percentage.value),
    //   liq_bonus_bps: new UintN64(this.liq_bonus_bps.value),
    //   active_loan_records: new UintN64(this.active_loan_records.value),
    // })
    uncover 12
    uncover 12
    concat
    uncover 12
    concat
    uncover 12
    concat
    uncover 7
    concat
    uncover 6
    concat
    uncover 3
    concat
    uncover 4
    concat
    uncover 4
    concat
    uncover 7
    concat
    uncover 3
    concat
    uncover 2
    concat
    uncover 2
    concat
    uncover 2
    concat
    uncover 2
    concat
    swap
    concat
    frame_bury 0
    retsub

migrateContract_else_body@6:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2007
    // const baseAsset = Asset(this.base_token_id.value.native)
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2008
    // const assetBalance = baseAsset.balance(Global.currentApplicationAddress)
    global CurrentApplicationAddress
    swap
    asset_holding_get AssetBalance
    swap
    dup
    cover 2
    frame_bury 1
    assert // account opted into asset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2009
    // if (assetBalance > 0) {
    bz migrateContract_after_if_else@10
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2010-2017
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_begin
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec_0 // "base_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2013
    // xferAsset: this.base_token_id.value.native,
    btoi
    frame_dig 1
    itxn_field AssetAmount
    itxn_field XferAsset
    itxn_field AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2010-2016
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: 0,
    //   })
    intc_3 // 4
    itxn_field TypeEnum
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2015
    // fee: 0,
    intc_0 // 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2010-2017
    // itxn
    //   .assetTransfer({
    //     assetReceiver: this.migration_admin.value,
    //     xferAsset: this.base_token_id.value.native,
    //     assetAmount: assetBalance,
    //     fee: 0,
    //   })
    //   .submit()
    itxn_submit
    b migrateContract_after_if_else@10


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.acceptMigrationAlgoContract(lstTransferTxn: uint64, algoTxn: uint64, snapshot: bytes, migrationAdmin: bytes) -> void:
acceptMigrationAlgoContract:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2049-2055
    // @abimethod({ allowActions: 'NoOp' })
    // public acceptMigrationAlgoContract(
    //   lstTransferTxn: gtxn.AssetTransferTxn,
    //   algoTxn: gtxn.PaymentTxn,
    //   snapshot: MigrationSnapshot,
    //   migrationAdmin: Account,
    // ): void {
    proto 4 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2056
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can accept migration')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:172
    // migration_admin = GlobalState<Account>()
    intc_0 // 0
    bytec 12 // "migration_admin"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2056
    // assert(op.Txn.sender === this.migration_admin.value, 'Only migration admin can accept migration')
    ==
    assert // Only migration admin can accept migration
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2058-2062
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    frame_dig -4
    gtxns Sender
    frame_dig -1
    ==
    bz acceptMigrationAlgoContract_bool_false@4
    frame_dig -4
    gtxns AssetReceiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2060
    // assetReceiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2058-2062
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    ==
    bz acceptMigrationAlgoContract_bool_false@4
    frame_dig -4
    gtxns XferAsset
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    intc_0 // 0
    bytec 9 // "lst_token_id"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2061
    // xferAsset: Asset(this.lst_token_id.value.native),
    btoi
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2058-2062
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    ==
    bz acceptMigrationAlgoContract_bool_false@4
    intc_1 // 1

acceptMigrationAlgoContract_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2058-2062
    // assertMatch(lstTransferTxn, {
    //   sender: migrationAdmin,
    //   assetReceiver: Global.currentApplicationAddress,
    //   xferAsset: Asset(this.lst_token_id.value.native),
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2063-2066
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    frame_dig -3
    gtxns Sender
    frame_dig -1
    ==
    bz acceptMigrationAlgoContract_bool_false@8
    frame_dig -3
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2065
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2063-2066
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    ==
    bz acceptMigrationAlgoContract_bool_false@8
    intc_1 // 1

acceptMigrationAlgoContract_bool_merge@9:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2063-2066
    // assertMatch(algoTxn, {
    //   sender: migrationAdmin,
    //   receiver: Global.currentApplicationAddress,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2068
    // this.cash_on_hand.value = snapshot.cash_on_hand.native
    frame_dig -2
    pushint 24 // 24
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    bytec 14 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2068
    // this.cash_on_hand.value = snapshot.cash_on_hand.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2069
    // this.total_deposits.value = snapshot.total_deposits.native
    frame_dig -2
    intc_0 // 0
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    bytec 4 // "total_deposits"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2069
    // this.total_deposits.value = snapshot.total_deposits.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2070
    // this.circulating_lst.value = snapshot.circulating_lst.native
    frame_dig -2
    pushint 16 // 16
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    bytec 7 // "circulating_lst"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2070
    // this.circulating_lst.value = snapshot.circulating_lst.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2071
    // this.total_borrows.value = snapshot.total_borrows.native
    frame_dig -2
    pushint 8 // 8
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:116
    // total_borrows = GlobalState<uint64>()
    bytec_1 // "total_borrows"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2071
    // this.total_borrows.value = snapshot.total_borrows.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2072
    // this.total_additional_rewards.value = snapshot.total_additional_rewards.native
    frame_dig -2
    pushint 112 // 112
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:163
    // total_additional_rewards = GlobalState<uint64>()
    bytec 24 // "total_additional_rewards"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2072
    // this.total_additional_rewards.value = snapshot.total_additional_rewards.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2073
    // this.total_commission_earned.value = snapshot.total_commission_earned.native
    frame_dig -2
    pushint 104 // 104
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:161
    // total_commission_earned = GlobalState<uint64>()
    bytec 23 // "total_commission_earned"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2073
    // this.total_commission_earned.value = snapshot.total_commission_earned.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2074
    // this.current_accumulated_commission.value = snapshot.current_accumulated_commission.native
    frame_dig -2
    pushint 96 // 96
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:159
    // current_accumulated_commission = GlobalState<uint64>()
    bytec 19 // "current_accumulated_commission"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2074
    // this.current_accumulated_commission.value = snapshot.current_accumulated_commission.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2075
    // this.fee_pool.value = snapshot.fee_pool.native
    frame_dig -2
    pushint 64 // 64
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:67
    // fee_pool = GlobalState<uint64>()
    bytec 15 // "fee_pool"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2075
    // this.fee_pool.value = snapshot.fee_pool.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2076
    // this.borrow_index_wad.value = snapshot.borrowIndexWad.native
    frame_dig -2
    pushint 32 // 32
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:119
    // borrow_index_wad = GlobalState<uint64>()
    bytec 10 // "borrow_index_wad"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2076
    // this.borrow_index_wad.value = snapshot.borrowIndexWad.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2077
    // this.accepted_collaterals_count.value = snapshot.accepted_collaterals_count.native
    frame_dig -2
    pushint 72 // 72
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    bytec 16 // "accepted_collaterals_count"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2077
    // this.accepted_collaterals_count.value = snapshot.accepted_collaterals_count.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2078
    // this.base_token_id.value = new UintN64(snapshot.base_token_id.native)
    frame_dig -2
    pushint 40 // 40
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:51
    // base_token_id = GlobalState<UintN64>()
    bytec_0 // "base_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2078
    // this.base_token_id.value = new UintN64(snapshot.base_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2079
    // this.lst_token_id.value = new UintN64(snapshot.lst_token_id.native)
    frame_dig -2
    pushint 56 // 56
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:54
    // lst_token_id = GlobalState<UintN64>()
    bytec 9 // "lst_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2079
    // this.lst_token_id.value = new UintN64(snapshot.lst_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2080
    // this.buyout_token_id.value = new UintN64(snapshot.buyout_token_id.native)
    frame_dig -2
    pushint 80 // 80
    extract_uint64
    itob
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:146
    // buyout_token_id = GlobalState<UintN64>()
    bytec 17 // "buyout_token_id"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2080
    // this.buyout_token_id.value = new UintN64(snapshot.buyout_token_id.native)
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2081
    // this.commission_percentage.value = snapshot.commission_percentage.native
    frame_dig -2
    pushint 48 // 48
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:157
    // commission_percentage = GlobalState<uint64>()
    bytec 29 // "commission_percentage"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2081
    // this.commission_percentage.value = snapshot.commission_percentage.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2082
    // this.liq_bonus_bps.value = snapshot.liq_bonus_bps.native
    frame_dig -2
    pushint 88 // 88
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:149
    // liq_bonus_bps = GlobalState<uint64>()
    bytec 18 // "liq_bonus_bps"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2082
    // this.liq_bonus_bps.value = snapshot.liq_bonus_bps.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2083
    // this.active_loan_records.value = snapshot.active_loan_records.native
    frame_dig -2
    pushint 120 // 120
    extract_uint64
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:140
    // active_loan_records = GlobalState<uint64>()
    bytec 8 // "active_loan_records"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2083
    // this.active_loan_records.value = snapshot.active_loan_records.native
    swap
    app_global_put
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:178
    // contract_state = GlobalState<UintN64>() // 0 = inactive, 1 = active, 2 = migrating
    bytec 5 // "contract_state"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2085
    // this.contract_state.value = new UintN64(1) // active
    pushbytes 0x0000000000000001
    app_global_put
    retsub

acceptMigrationAlgoContract_bool_false@8:
    intc_0 // 0
    b acceptMigrationAlgoContract_bool_merge@9

acceptMigrationAlgoContract_bool_false@4:
    intc_0 // 0
    b acceptMigrationAlgoContract_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getCirculatingLST() -> uint64:
getCirculatingLST:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:61
    // circulating_lst = GlobalState<uint64>()
    intc_0 // 0
    bytec 7 // "circulating_lst"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2102
    // return this.circulating_lst.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getTotalDeposits() -> uint64:
getTotalDeposits:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:64
    // total_deposits = GlobalState<uint64>()
    intc_0 // 0
    bytec 4 // "total_deposits"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2110
    // return this.total_deposits.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.getAcceptedCollateralsCount() -> uint64:
getAcceptedCollateralsCount:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:143
    // accepted_collaterals_count = GlobalState<uint64>()
    intc_0 // 0
    bytec 16 // "accepted_collaterals_count"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2118
    // return this.accepted_collaterals_count.value
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.goOnline(feePayment: uint64, votePK: bytes, selectionPK: bytes, stateProofPK: bytes, voteFirst: uint64, voteLast: uint64, voteKeyDilution: uint64) -> void:
goOnline:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2131-2140
    // @abimethod({ allowActions: 'NoOp' })
    // public goOnline(
    //   feePayment: gtxn.PaymentTxn,
    //   votePK: bytes,
    //   selectionPK: bytes,
    //   stateProofPK: bytes,
    //   voteFirst: uint64,
    //   voteLast: uint64,
    //   voteKeyDilution: uint64,
    // ): void {
    proto 7 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2141
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go online')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2141
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go online')
    ==
    assert // Only admin can go online
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2094
    // return Global.payoutsGoOnlineFee
    global PayoutsGoOnlineFee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2144-2148
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    frame_dig -7
    gtxns Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2144-2148
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    ==
    bz goOnline_bool_false@4
    frame_dig -7
    gtxns Receiver
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2146
    // receiver: Global.currentApplicationAddress,
    global CurrentApplicationAddress
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2144-2148
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    ==
    bz goOnline_bool_false@4
    frame_dig -7
    gtxns Amount
    frame_dig 0
    ==
    bz goOnline_bool_false@4
    intc_1 // 1

goOnline_bool_merge@5:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2144-2148
    // assertMatch(feePayment, {
    //   sender: this.admin_account.value,
    //   receiver: Global.currentApplicationAddress,
    //   amount: extraFee,
    // })
    assert // assert target is match for conditions
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2149-2159
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    //   .submit()
    itxn_begin
    frame_dig -1
    itxn_field VoteKeyDilution
    frame_dig -2
    itxn_field VoteLast
    frame_dig -3
    itxn_field VoteFirst
    frame_dig -4
    itxn_field StateProofPK
    frame_dig -5
    itxn_field SelectionPK
    frame_dig -6
    itxn_field VotePK
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2149-2158
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    pushint 2 // 2
    itxn_field TypeEnum
    frame_dig 0
    itxn_field Fee
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2149-2159
    // itxn
    //   .keyRegistration({
    //     voteKey: votePK,
    //     selectionKey: selectionPK,
    //     stateProofKey: stateProofPK,
    //     voteFirst: voteFirst,
    //     voteLast: voteLast,
    //     voteKeyDilution: voteKeyDilution,
    //     fee: extraFee,
    //   })
    //   .submit()
    itxn_submit
    retsub

goOnline_bool_false@4:
    intc_0 // 0
    b goOnline_bool_merge@5


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.goOffline() -> void:
goOffline:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2167
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go offline')
    txn Sender
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:74
    // admin_account = GlobalState<Account>()
    intc_0 // 0
    bytec_3 // "admin_account"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2167
    // assert(op.Txn.sender === this.admin_account.value, 'Only admin can go offline')
    ==
    assert // Only admin can go offline
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2168
    // itxn.keyRegistration({ fee: 0 }).submit()
    itxn_begin
    pushint 2 // 2
    itxn_field TypeEnum
    intc_0 // 0
    itxn_field Fee
    itxn_submit
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.addCash(amount: uint64) -> void:
addCash:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2182
    // private addCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2183
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    frame_dig -1
    +
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    bytec 14 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2183
    // this.cash_on_hand.value = this.cash_on_hand.value + amount
    swap
    app_global_put
    retsub


// smart_contracts/orbital_lending/OrbitalLending.algo.ts::OrbitalLending.removeCash(amount: uint64) -> void:
removeCash:
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2191
    // private removeCash(amount: uint64): void {
    proto 1 0
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2192
    // assert(this.cash_on_hand.value >= amount, 'INSUFFICIENT_CASH')
    frame_dig -1
    >=
    assert // INSUFFICIENT_CASH
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    intc_0 // 0
    bytec 14 // "cash_on_hand"
    app_global_get_ex
    assert // check GlobalState exists
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2193
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    frame_dig -1
    -
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:165
    // cash_on_hand = GlobalState<uint64>()
    bytec 14 // "cash_on_hand"
    // smart_contracts/orbital_lending/OrbitalLending.algo.ts:2193
    // this.cash_on_hand.value = this.cash_on_hand.value - amount
    swap
    app_global_put
    retsub
